<!DOCTYPE html>
<html>
  <head>
    <script>
      (function(){
  const {protocol:proto, host:hostName, pathname:path, search:srch, hash:hsh} = window.location;
  if (!(path.endsWith("/") || path.endsWith(".html"))) {
    window.location.replace(`${proto}//${hostName}${path}/${srch}${hsh}`);
  }
})()</script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Basic Operations</title><link rel="stylesheet" href="../../book.css">
    <script>
      
function saveCheckboxesInit() {
  for (checkbox of document.querySelectorAll('#toc input[type="checkbox"]')) {
    const value = localStorage.getItem(checkbox.id);

    // Treat the ToC toggle specially, because it should always default to
    // closed on mobile-width screens but respect user preference on desktop-width.
    if (checkbox.id === "toggle-toc" && window.matchMedia("(max-width: 700px)").matches) {
        checkbox.checked = false;
    } else if (value === "true") {
        checkbox.checked = true;
    } else if (value === "false") {
        checkbox.checked = false;
    } // if not found, do nothing

    checkbox.addEventListener("change", persistCheckbox);
  }
}

function persistCheckbox() {
  const value = this.checked; // in a handler, 'this' is the element with the handler on it
  const id = this.id;
  localStorage.setItem(this.id, value ? "true" : "false");
}

window.addEventListener("DOMContentLoaded", saveCheckboxesInit);
</script>
    <script>
      const __versoSiteRoot = "./../../"</script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <script src="../../static/katex/katex.min.js"></script>
    <script src="../../static/math.js"></script>
    <script src="../../static/print.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../-verso-js/popper.js"></script>
    <script src="../../-verso-js/tippy.js"></script>
    <link rel="stylesheet" href="../../static/colors.css">
    <link rel="stylesheet" href="../../static/theme.css">
    <link rel="stylesheet" href="../../static/print.css">
    <link rel="stylesheet" href="../../static/fonts/source-serif/source-serif-text.css">
    <link rel="stylesheet" href="../../static/fonts/source-code-pro/source-code-pro.css">
    <link rel="stylesheet" href="../../static/katex/katex.min.css">
    <link rel="stylesheet" href="../../-verso-css/tippy-border.css">
    <style>

.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
}

.hl.lean .keyword {
  font-weight : bold;
}

.hl.lean .var {
  font-style: italic;
  position: relative;
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}

.hl.lean a:hover {
  text-decoration: currentcolor underline solid;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 300;
  font-size: inherit;
}

.hl.lean .hover-info.messages {
  max-height: 10rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5rem 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5rem;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1rem;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0rem;
}

/*
@media (hover: hover) {
  .hl.lean .has-info:hover > .hover-container > .hover-info:not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .has-info:hover > .hover-container > .hover-info,
  .hl.lean .token:hover > .hover-container > .hover-info:not(.has-info *):not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .token:hover > .hover-container > .hover-info:not(.has-info *) {
    display: inline-block;
    position: absolute;
    top: 1rem;
    font-weight: normal;
    font-style: normal;
    width: min-content;
  }
}
*/

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
  white-space: pre-wrap;
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover, .hl.lean .token.typed:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: 0.1rem;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error {
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error pre {
    color: red;
}

.hl.lean .has-info.warning {
  text-decoration-color: #efd871;
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color: #efd871;
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: #efd871;
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #efd871;
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.info {
  text-decoration-color: blue;
}

@media (hover: hover) {
  .hl.lean .has-info.info:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.info {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.info {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: sans-serif;
  white-space: normal;
  max-width: 40rem;
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: monospace;
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  left: 2rem;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1rem;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
  z-index: 200;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: block;
}

/*
@media (hover: hover) {
  .hl.lean .tactic:hover > .tactic-toggle:not(:checked) ~ .tactic-state {
    display: block;
    position: absolute;
    left: 0;
    transform: translate(0.25rem, 0);
    z-index: 250;
  }
}
*/

.hl.lean .tactic > label {
  position: relative;
  transition: all 0.5s;
}

@media (hover: hover) {
  .hl.lean .tactic > label:hover {
    border-bottom: 1px dotted #bbbbbb;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  border-radius: 1rem;
  height: 0.25rem;
  vertical-align: middle;
  width: 0.6rem;
  margin-left: 0.1rem;
  margin-right: 0.1rem;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5rem;
}

.hl.lean .tactic-state summary {
  margin-left: -0.5rem;
}

.hl.lean .tactic-state details {
  padding-left: 0.5rem;
}

.hl.lean .case-label {
  display: block;
  position: relative;
}

.hl.lean .case-label input[type="checkbox"] {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .case-label:has(input[type="checkbox"])::before {
  width: 1rem;
  height: 1rem;
  display: inline-block;
  background-color: black;
  content: ' ';
  transition: ease 0.2s;
  margin-right: 0.7rem;
  clip-path: polygon(100% 0, 0 0, 50% 100%);
  width: 0.6rem;
  height: 0.6rem;
}

.hl.lean .case-label:has(input[type="checkbox"]:not(:checked))::before {
  transform: rotate(-90deg);
}

.hl.lean .case-label:has(input[type="checkbox"]) {

}

.hl.lean .case-label:has(input[type="checkbox"]:checked) {

}


.hl.lean .tactic-state .labeled-case > :not(:first-child) {
  max-height: 0px;
  display: block;
  overflow: hidden;
  transition: max-height 0.1s ease-in;
  margin-left: 0.5rem;
  margin-top: 0.1rem;
}

.hl.lean .labeled-case:has(.case-label input[type="checkbox"]:checked) > :not(:first-child) {
  max-height: 100%;
}


.hl.lean .tactic-state .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .tactic-state .goal-name {
  font-style: italic;
  font-family: monospace;
}

.hl.lean .tactic-state .hypotheses {
  display: table;
}

.hl.lean .tactic-state .hypothesis {
  display: table-row;
}

.hl.lean .tactic-state .hypothesis > * {
  display: table-cell;
}


.hl.lean .tactic-state .hypotheses .colon {
  text-align: center;
  min-width: 1rem;
}

.hl.lean .tactic-state .hypotheses .name {
  text-align: right;
}

.hl.lean .tactic-state .hypotheses .name,
.hl.lean .tactic-state .hypotheses .type,
.hl.lean .tactic-state .conclusion .type {
  font-family: monospace;
}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #efd871;
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}



.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

</style><style>
.namedocs {
  position: relative;
  border: solid 2px #99b3c0;
  background-color: #99b3c0;
  padding-left: 1px;
  padding-right: 1px;
  padding-bottom: 1px;
  padding-top: 1.5rem;
  margin-bottom: 1rem;
}

.namedocs .text {
  background-color: white;
  padding: 1.5rem;
  margin-top: 0.5rem;
}

.namedocs .text > pre {
  overflow-x: auto;
}

.namedocs .signature {
  font-family: var(--verso-code-font-family);
  font-size: larger;
  margin-top: 0 !important;
  margin-left: 1.5rem !important;
  margin-right: 1.5rem;
}

.namedocs .label {
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
  position: absolute;
  right: 0.5rem;
  top: 0.5rem;
}

/* Sticking content into the right margin is not good on narrow screens,
   so move the label to the left to make space for the permalink widget. */

@media screen and (max-width: 700px) {
  .namedocs:has(.permalink-widget.block) .label {
    right: 1.5rem;
  }
}

.namedocs h1 {
  font-size: inherit;
  font-weight: bold;
}

.namedocs > .text .constructor {
  padding-left: 0.5rem;
  padding-top: 0;
  padding-right: 0;
  padding-bottom: 0;
  margin-top: 0.5rem;
  margin-bottom: 1.5rem;
}

.namedocs > .text .constructor::before {
  content: '| ';
  display: block;
  font-family: var(--verso-code-font-family);
  font-weight: bold;
  float: left;
  width: 0.5rem;
  white-space: pre;
}

.namedocs > .text .constructor .name-and-type {
  padding-left: 0.5rem;
  float: left;
  margin-top: 0;
}
.namedocs > .text .constructor .docs {
  clear: both;
  padding-left: 1rem;
}


.namedocs .methods td, .namedocs .fields td {
  vertical-align: top;
}
.namedocs .inheritance {
  vertical-align: top;
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
}
.namedocs .inheritance ol {
  display: inline-block;
  margin: 0;
  padding: 0;
}
.namedocs .inheritance ol li {
  list-style-type: none;
  display: inline-block;
}
.namedocs .inheritance ol li::after {
  content: " > "
}
.namedocs .inheritance ol li:last-child::after {
  content: "";
}

.namedocs .extends {
  display: inline;
  margin: 0;
  padding: 0;
}

.namedocs .extends li {
  list-style-type: none;
  display: inline-block;
}

.namedocs .extends li label {
  padding-right: 1rem;
}

.namedocs .subdocs .name-and-type {
  font-size: 1rem;
  margin-left: 0;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs .subdocs .docs {
  margin-left: 1.5rem;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs:has(input[data-parent-idx]) [data-inherited-from] {
  transition-property: opacity, display;
  transition-duration: 0.4s;
  transition-behavior: allow-discrete;
  @starting-style { opacity: 0 !important; }
}
.namedocs:has(input[data-parent-idx="0"]) [data-inherited-from="0"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="0"]:checked) [data-inherited-from="0"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="0"]:checked):has(.inheritance[data-inherited-from="0"]:hover) [data-inherited-from]:not([data-inherited-from="0"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="1"]) [data-inherited-from="1"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="1"]:checked) [data-inherited-from="1"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="1"]:checked):has(.inheritance[data-inherited-from="1"]:hover) [data-inherited-from]:not([data-inherited-from="1"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="2"]) [data-inherited-from="2"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="2"]:checked) [data-inherited-from="2"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="2"]:checked):has(.inheritance[data-inherited-from="2"]:hover) [data-inherited-from]:not([data-inherited-from="2"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="3"]) [data-inherited-from="3"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="3"]:checked) [data-inherited-from="3"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="3"]:checked):has(.inheritance[data-inherited-from="3"]:hover) [data-inherited-from]:not([data-inherited-from="3"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="4"]) [data-inherited-from="4"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="4"]:checked) [data-inherited-from="4"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="4"]:checked):has(.inheritance[data-inherited-from="4"]:hover) [data-inherited-from]:not([data-inherited-from="4"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="5"]) [data-inherited-from="5"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="5"]:checked) [data-inherited-from="5"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="5"]:checked):has(.inheritance[data-inherited-from="5"]:hover) [data-inherited-from]:not([data-inherited-from="5"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="6"]) [data-inherited-from="6"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="6"]:checked) [data-inherited-from="6"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="6"]:checked):has(.inheritance[data-inherited-from="6"]:hover) [data-inherited-from]:not([data-inherited-from="6"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="7"]) [data-inherited-from="7"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="7"]:checked) [data-inherited-from="7"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="7"]:checked):has(.inheritance[data-inherited-from="7"]:hover) [data-inherited-from]:not([data-inherited-from="7"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="8"]) [data-inherited-from="8"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="8"]:checked) [data-inherited-from="8"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="8"]:checked):has(.inheritance[data-inherited-from="8"]:hover) [data-inherited-from]:not([data-inherited-from="8"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="9"]) [data-inherited-from="9"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="9"]:checked) [data-inherited-from="9"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="9"]:checked):has(.inheritance[data-inherited-from="9"]:hover) [data-inherited-from]:not([data-inherited-from="9"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="10"]) [data-inherited-from="10"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="10"]:checked) [data-inherited-from="10"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="10"]:checked):has(.inheritance[data-inherited-from="10"]:hover) [data-inherited-from]:not([data-inherited-from="10"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="11"]) [data-inherited-from="11"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="11"]:checked) [data-inherited-from="11"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="11"]:checked):has(.inheritance[data-inherited-from="11"]:hover) [data-inherited-from]:not([data-inherited-from="11"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="12"]) [data-inherited-from="12"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="12"]:checked) [data-inherited-from="12"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="12"]:checked):has(.inheritance[data-inherited-from="12"]:hover) [data-inherited-from]:not([data-inherited-from="12"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="13"]) [data-inherited-from="13"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="13"]:checked) [data-inherited-from="13"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="13"]:checked):has(.inheritance[data-inherited-from="13"]:hover) [data-inherited-from]:not([data-inherited-from="13"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="14"]) [data-inherited-from="14"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="14"]:checked) [data-inherited-from="14"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="14"]:checked):has(.inheritance[data-inherited-from="14"]:hover) [data-inherited-from]:not([data-inherited-from="14"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="15"]) [data-inherited-from="15"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="15"]:checked) [data-inherited-from="15"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="15"]:checked):has(.inheritance[data-inherited-from="15"]:hover) [data-inherited-from]:not([data-inherited-from="15"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="16"]) [data-inherited-from="16"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="16"]:checked) [data-inherited-from="16"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="16"]:checked):has(.inheritance[data-inherited-from="16"]:hover) [data-inherited-from]:not([data-inherited-from="16"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="17"]) [data-inherited-from="17"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="17"]:checked) [data-inherited-from="17"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="17"]:checked):has(.inheritance[data-inherited-from="17"]:hover) [data-inherited-from]:not([data-inherited-from="17"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="18"]) [data-inherited-from="18"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="18"]:checked) [data-inherited-from="18"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="18"]:checked):has(.inheritance[data-inherited-from="18"]:hover) [data-inherited-from]:not([data-inherited-from="18"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="19"]) [data-inherited-from="19"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="19"]:checked) [data-inherited-from="19"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="19"]:checked):has(.inheritance[data-inherited-from="19"]:hover) [data-inherited-from]:not([data-inherited-from="19"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="20"]) [data-inherited-from="20"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="20"]:checked) [data-inherited-from="20"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="20"]:checked):has(.inheritance[data-inherited-from="20"]:hover) [data-inherited-from]:not([data-inherited-from="20"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="21"]) [data-inherited-from="21"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="21"]:checked) [data-inherited-from="21"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="21"]:checked):has(.inheritance[data-inherited-from="21"]:hover) [data-inherited-from]:not([data-inherited-from="21"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="22"]) [data-inherited-from="22"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="22"]:checked) [data-inherited-from="22"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="22"]:checked):has(.inheritance[data-inherited-from="22"]:hover) [data-inherited-from]:not([data-inherited-from="22"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="23"]) [data-inherited-from="23"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="23"]:checked) [data-inherited-from="23"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="23"]:checked):has(.inheritance[data-inherited-from="23"]:hover) [data-inherited-from]:not([data-inherited-from="23"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="24"]) [data-inherited-from="24"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="24"]:checked) [data-inherited-from="24"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="24"]:checked):has(.inheritance[data-inherited-from="24"]:hover) [data-inherited-from]:not([data-inherited-from="24"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="25"]) [data-inherited-from="25"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="25"]:checked) [data-inherited-from="25"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="25"]:checked):has(.inheritance[data-inherited-from="25"]:hover) [data-inherited-from]:not([data-inherited-from="25"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="26"]) [data-inherited-from="26"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="26"]:checked) [data-inherited-from="26"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="26"]:checked):has(.inheritance[data-inherited-from="26"]:hover) [data-inherited-from]:not([data-inherited-from="26"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="27"]) [data-inherited-from="27"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="27"]:checked) [data-inherited-from="27"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="27"]:checked):has(.inheritance[data-inherited-from="27"]:hover) [data-inherited-from]:not([data-inherited-from="27"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="28"]) [data-inherited-from="28"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="28"]:checked) [data-inherited-from="28"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="28"]:checked):has(.inheritance[data-inherited-from="28"]:hover) [data-inherited-from]:not([data-inherited-from="28"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="29"]) [data-inherited-from="29"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="29"]:checked) [data-inherited-from="29"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="29"]:checked):has(.inheritance[data-inherited-from="29"]:hover) [data-inherited-from]:not([data-inherited-from="29"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="30"]) [data-inherited-from="30"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="30"]:checked) [data-inherited-from="30"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="30"]:checked):has(.inheritance[data-inherited-from="30"]:hover) [data-inherited-from]:not([data-inherited-from="30"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="31"]) [data-inherited-from="31"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="31"]:checked) [data-inherited-from="31"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="31"]:checked):has(.inheritance[data-inherited-from="31"]:hover) [data-inherited-from]:not([data-inherited-from="31"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="32"]) [data-inherited-from="32"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="32"]:checked) [data-inherited-from="32"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="32"]:checked):has(.inheritance[data-inherited-from="32"]:hover) [data-inherited-from]:not([data-inherited-from="32"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="33"]) [data-inherited-from="33"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="33"]:checked) [data-inherited-from="33"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="33"]:checked):has(.inheritance[data-inherited-from="33"]:hover) [data-inherited-from]:not([data-inherited-from="33"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="34"]) [data-inherited-from="34"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="34"]:checked) [data-inherited-from="34"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="34"]:checked):has(.inheritance[data-inherited-from="34"]:hover) [data-inherited-from]:not([data-inherited-from="34"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="35"]) [data-inherited-from="35"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="35"]:checked) [data-inherited-from="35"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="35"]:checked):has(.inheritance[data-inherited-from="35"]:hover) [data-inherited-from]:not([data-inherited-from="35"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="36"]) [data-inherited-from="36"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="36"]:checked) [data-inherited-from="36"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="36"]:checked):has(.inheritance[data-inherited-from="36"]:hover) [data-inherited-from]:not([data-inherited-from="36"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="37"]) [data-inherited-from="37"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="37"]:checked) [data-inherited-from="37"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="37"]:checked):has(.inheritance[data-inherited-from="37"]:hover) [data-inherited-from]:not([data-inherited-from="37"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="38"]) [data-inherited-from="38"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="38"]:checked) [data-inherited-from="38"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="38"]:checked):has(.inheritance[data-inherited-from="38"]:hover) [data-inherited-from]:not([data-inherited-from="38"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="39"]) [data-inherited-from="39"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="39"]:checked) [data-inherited-from="39"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="39"]:checked):has(.inheritance[data-inherited-from="39"]:hover) [data-inherited-from]:not([data-inherited-from="39"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="40"]) [data-inherited-from="40"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="40"]:checked) [data-inherited-from="40"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="40"]:checked):has(.inheritance[data-inherited-from="40"]:hover) [data-inherited-from]:not([data-inherited-from="40"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="41"]) [data-inherited-from="41"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="41"]:checked) [data-inherited-from="41"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="41"]:checked):has(.inheritance[data-inherited-from="41"]:hover) [data-inherited-from]:not([data-inherited-from="41"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="42"]) [data-inherited-from="42"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="42"]:checked) [data-inherited-from="42"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="42"]:checked):has(.inheritance[data-inherited-from="42"]:hover) [data-inherited-from]:not([data-inherited-from="42"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="43"]) [data-inherited-from="43"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="43"]:checked) [data-inherited-from="43"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="43"]:checked):has(.inheritance[data-inherited-from="43"]:hover) [data-inherited-from]:not([data-inherited-from="43"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="44"]) [data-inherited-from="44"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="44"]:checked) [data-inherited-from="44"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="44"]:checked):has(.inheritance[data-inherited-from="44"]:hover) [data-inherited-from]:not([data-inherited-from="44"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="45"]) [data-inherited-from="45"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="45"]:checked) [data-inherited-from="45"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="45"]:checked):has(.inheritance[data-inherited-from="45"]:hover) [data-inherited-from]:not([data-inherited-from="45"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="46"]) [data-inherited-from="46"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="46"]:checked) [data-inherited-from="46"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="46"]:checked):has(.inheritance[data-inherited-from="46"]:hover) [data-inherited-from]:not([data-inherited-from="46"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="47"]) [data-inherited-from="47"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="47"]:checked) [data-inherited-from="47"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="47"]:checked):has(.inheritance[data-inherited-from="47"]:hover) [data-inherited-from]:not([data-inherited-from="47"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="48"]) [data-inherited-from="48"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="48"]:checked) [data-inherited-from="48"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="48"]:checked):has(.inheritance[data-inherited-from="48"]:hover) [data-inherited-from]:not([data-inherited-from="48"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="49"]) [data-inherited-from="49"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="49"]:checked) [data-inherited-from="49"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="49"]:checked):has(.inheritance[data-inherited-from="49"]:hover) [data-inherited-from]:not([data-inherited-from="49"]) {
  opacity: 0.5;
}
</style><style>.solution {
  padding: 1.5em;
  border: 1px solid #98B2C0;
  border-radius: 0.5em;
  margin-bottom: 0.75em;
  margin-top: 0.75em;
  clear: both; /* Don't overlap margin notes with solutions */
}
.solution p:last-child {margin-bottom:0;}
.solution .description::before {
  content: "";
}
.solution[open] .description {
  margin-bottom: 1em;
}
.solution .description {
  font-style: italic;
  font-family: var(--verso-structure-font-family);
}
.solution .hl.lean.block {
  overflow-x: auto;
}
</style><style>
div.TODO {
  border: 5px solid red;
  position: relative;
}
div.TODO::before {
  content: "TODO";
  position: absolute;
  top: 0;
  right: 0;
  color: red;
  font-size: large;
  font-weight: bold;
  transform: rotate(-90deg) translate(-2em);
}
</style><style>.foldable {
  padding: 1.5em;
  border: 1px solid #98B2C0;
  border-radius: 0.5em;
  margin-bottom: 0.75em;
  margin-top: 0.75em;
  clear: both; /* Don't overlap margin notes with foldables */
}
.foldable p:last-child {margin-bottom:0;}
.foldable .description::before {
  content: "";
}
.foldable[open] .description {
  margin-bottom: 1em;
}
.foldable .description {
  font-style: italic;
  font-family: var(--verso-structure-font-family);
}
.foldable .hl.lean.block {
  overflow-x: auto;
}
</style><script>
      
window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    let siteRoot = typeof __versoSiteRoot !== 'undefined' ? __versoSiteRoot : "/";
    fetch(siteRoot + "-verso-docs.json").then((resp) => resp.json()).then((versoDocData) => {

      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        theme: "lean",
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        ignoreAttributes: true,
        onShow(inst) {
          if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          content.className = "hl lean";
          content.style.display = "block";
          content.style.maxHeight = "300px";
          content.style.overflowY = "auto";
          content.style.overflowX = "hidden";
          const hoverId = tgt.dataset.versoHover;
          const hoverInfo = tgt.querySelector(".hover-info");
          if (hoverId) { // Docstrings from the table
            // TODO stop doing an implicit conversion from string to number here
            let data = versoDocData[hoverId];
            if (data) {
              const info = document.createElement("span");
              info.className = "hover-info";
              info.style.display = "block";
              info.innerHTML = data;
              content.appendChild(info);
              /* Render docstrings - TODO server-side */
              if ('undefined' !== typeof marked) {
                  for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                      const str = d.innerText;
                      const html = marked.parse(str);
                      const rendered = document.createElement("div");
                      rendered.classList.add("docstring");
                      rendered.innerHTML = html;
                      d.parentNode.replaceChild(rendered, d);
                  }
              }
            } else {
              content.innerHTML = "Failed to load doc ID: " + hoverId;
            }
          } else if (hoverInfo) { // The inline info, still used for compiler messages
            content.appendChild(hoverInfo.cloneNode(true));
          }
          return content;
        }
      };

      const addTippy = (selector, props) => {
        tippy(selector, Object.assign({}, defaultTippyProps, props));
      };
      addTippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token', {theme: 'lean'});
      addTippy('.hl.lean .has-info.warning', {theme: 'warning message'});
      addTippy('.hl.lean .has-info.info', {theme: 'info message'});
      addTippy('.hl.lean .has-info.error', {theme: 'error message'});

      tippy('.hl.lean .tactic', {
        allowHtml: true,
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        maxWidth: "none",
        onShow(inst) {
          const toggle = inst.reference.querySelector("input.tactic-toggle");
          if (toggle && toggle.checked) {
            return false;
          }
          if (blockedByTippy(inst.reference)) { return false; }
        },
        theme: "tactic",
        placement: 'bottom-start',
        content (tgt) {
          const content = document.createElement("span");
          const state = tgt.querySelector(".tactic-state").cloneNode(true);
          state.style.display = "block";
          content.appendChild(state);
          content.style.display = "block";
          content.className = "hl lean popup";
          return content;
        }
      });
  });
}
</script>
    </head>
  <body>
    <label for="toggle-toc" id="toggle-toc-click"><span class="line line1"></span><span class="line line2"></span><span class="line line3"></span></label><div class="with-toc">
      <div class="toc-backdrop" onclick="document.getElementById('toggle-toc-click')?.click()"></div>
      <nav id="toc">
        <input type="checkbox" id="toggle-toc" checked="checked"><div class="first">
          <a href="../../" id="logo"><img src="../../static/lean_logo.svg"></a><nav id="local-buttons">
            <a class="local-button active" href="../#Scientific-Computing-in-Lean--Working-with-Arrays" rel="prev" title="1. Working with Arrays"><span class="arrow">←</span><span class="where">Prev</span></a><a class="local-button active" href="../#Scientific-Computing-in-Lean--Working-with-Arrays" title="1. Working with Arrays"><span class="arrow">↑</span><span class="where">Up</span></a><a class="local-button active" href="../Tensor-Operations/#Scientific-Computing-in-Lean--Working-with-Arrays--Tensor-Operations" rel="next" title="1.2. Tensor Operations"><span class="where">Next</span><span class="arrow">→</span></a></nav>
          <div class="split-tocs">
            <div class="split-toc book">
              <div class="title">
                <label for="--verso-manual-toc-----bookRoot" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-----bookRoot"></label><span class=""><a href="../../">Scientific Computing in Lean</a></span></div>
              <table><tr class="current numbered"><td class="num">1.</td><td><a href="../#Scientific-Computing-in-Lean--Working-with-Arrays">Working with Arrays</a></td></tr><tr class="numbered"><td class="num">2.</td><td><a href="../../Differentiation/#Scientific-Computing-in-Lean--Differentiation">Differentiation</a></td></tr><tr class="numbered"><td class="num">3.</td><td><a href="../../Miscellaneous/#Scientific-Computing-in-Lean--Miscellaneous">Miscellaneous</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-Scientific-Computing-in-Lean--Working-with-Arrays" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-Scientific-Computing-in-Lean--Working-with-Arrays"></label><span class="number">1.</span> <span class=""><a href="../#Scientific-Computing-in-Lean--Working-with-Arrays">Working with Arrays</a></span></div>
              <table><tr class="current numbered"><td class="num">1.1.</td><td><a href="#Scientific-Computing-in-Lean--Working-with-Arrays--Basic-Operations">Basic Operations</a></td></tr><tr class="numbered"><td class="num">1.2.</td><td><a href="../Tensor-Operations/#Scientific-Computing-in-Lean--Working-with-Arrays--Tensor-Operations">Tensor Operations</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-Scientific-Computing-in-Lean--Working-with-Arrays--Basic-Operations" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-Scientific-Computing-in-Lean--Working-with-Arrays--Basic-Operations" checked="checked"></label><span class="number">1.1.</span> <span class="current"><a href="#Scientific-Computing-in-Lean--Working-with-Arrays--Basic-Operations">Basic Operations</a></span></div>
              <table><tr class="numbered"><td class="num">1.1.1.</td><td><a href="#Scientific-Computing-in-Lean--Working-with-Arrays--Basic-Operations--Reshaping-Arrays">Reshaping Arrays</a></td></tr><tr class="numbered"><td class="num">1.1.2.</td><td><a href="#Scientific-Computing-in-Lean--Working-with-Arrays--Basic-Operations--Exercises">Exercises</a></td></tr></table></div>
            </div>
          </div>
        <div class="last"></div>
        </nav>
      <main><section>
          <h1>
            1.1. Basic Operations</h1>
          <p>
            What distinguishes Lean from many other programming languages is that Lean is so called dependently typed programming language. This allows us to work with arrays that have their dimensions specified in their type. For example, vector dot product can be defined as</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-526">def</span> <span class="const token" data-binding="const-dot" data-verso-hover="29" id="dot">dot</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.13" data-verso-hover="30">x</span> <span class="var token" data-binding="var-_uniq.19" data-verso-hover="30">y</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">∑</span> <span class="var token" data-binding="var-_uniq.399" data-verso-hover="31">i</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.13" data-verso-hover="30">x</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.399" data-verso-hover="31">i</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">*</span> <span class="var token" data-binding="var-_uniq.19" data-verso-hover="30">y</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.399" data-verso-hover="31">i</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><p>
            This function accepts the size of the array as an argument <code>n : Nat</code> and then two arrays of the same size <code>n</code>. The meaning of <strong>dependently typed</strong> is that the type of function argument can depend on the value of another argument. Here the type of <code>x</code> and <code>y</code> is <code>Float^[n]</code> which depends on the first argument <code>n</code>. This is really not possible in ordinary programming languages, some of them allow you to provide the dimension at compile time. In Lean this is not the case, the dimension <code>n</code> can be determined completly at runtime.</p>
          <p>
            As you can see, one of the nice advantages is that we didn't have to specify the range over which we want to sum at it is automatically infered it should sum over the numbers <code>0..(n-1)</code>.</p>
          <p>
            We can test the function with</p>
          <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">2.000000</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-1369" data-verso-hover="11">#eval</span></span> <a href="#dot"><span class="const token" data-binding="const-dot" data-verso-hover="29">dot</span></a> <span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
            <pre>2.000000
</pre></div>
          <p>
            When calling a function, you have to provide only the arguments with normal braces, such as <code>(x y : Float^[n])</code>. Arguments with the curly braces <code>{n : Nat}</code> are implicit and will be infered automatically from the other arguments, from <code>x</code> and <code>y</code> in this case. Lean prevents us from providing arrays of different lenghts</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-1829" data-verso-hover="11">#eval</span> <a href="#dot"><span class="const token" data-binding="const-dot" data-verso-hover="29">dot</span></a> <span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">]</span> <span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="message error">failed to synthesize
  OfFn (Float^[2]) (Fin 3) Float
Additional diagnostic information may be available using the `set_option diagnostics true` command.</code></span></span><span class="unknown token" data-binding="">⊞[</span></span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><div class="error">
            <pre>failed to synthesize
  OfFn (Float^[2]) (Fin 3) Float
Additional diagnostic information may be available using the `set_option diagnostics true` command.
</pre></div>
          <p>
            (TODO: Improve this error message! It is very cryptic.)</p>
          <p>
            Let's back up and talk about the notation <code>Float^[n]</code> and how it connects to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.DataArray" data-verso-hover="12">DataArray</span></code> we talked about previously. An array <code>x : Float^[n]</code> has length <code>n</code> and thus can be indexed with number <code>0..(n-1)</code>. The type expressing all natural numbers smaller then <code>n</code> is denoted with <code>Fin n</code>. It is defined as a structure:</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-2596">structure</span> <span class="const token" data-binding="const-BasicOperations.Fin" data-verso-hover="32" id="BasicOperations___Fin">Fin</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-null-2620">where</span>
  <span class="const token" data-binding="const-BasicOperations.Fin.val" data-verso-hover="33" id="BasicOperations___Fin">val</span>  <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span>
  <span class="const token" data-binding="const-BasicOperations.Fin.isLt" data-verso-hover="34" id="BasicOperations___Fin">isLt</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="2">val</span> <span class="unknown token" data-binding="">&lt;</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span>
<span class="unknown token" data-binding=""></span></code><p>
            which holds the value <code>val</code> and a proof <code>isLt</code> that the value is infact smaller then <code>n</code>.</p>
          <p>
            <code>Float^[n]</code> is just a syntactic sugar for <code>DataArrayN Float (Fin n)</code> which is <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.DataArray" data-verso-hover="12">DataArray</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span></code> together with a proof that the size of the array is <code>n</code>. In general, <code>Fin n</code> can be replaced with an arbitrary index type <code>I</code>. The definition of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.DataArrayN" data-verso-hover="19">DataArrayN</span></code> is:</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-3044">structure</span> <span class="const token" data-binding="const-BasicOperations.DataArrayN" data-verso-hover="35" id="BasicOperations___DataArrayN___h_size">DataArrayN</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="36">I</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-SciLean.PlainDataType" data-verso-hover="37">PlainDataType</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">X</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-SciLean.IndexType" data-verso-hover="38">IndexType</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="36">I</span><span class="unknown token" data-binding="">]</span> <span class="keyword token" data-binding="kw-occ-null-3123">where</span>
  <span class="const token" data-binding="const-BasicOperations.DataArrayN.data" data-verso-hover="39" id="BasicOperations___DataArrayN___h_size">data</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-SciLean.DataArray" data-verso-hover="12">DataArray</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">X</span>
  <span class="const token" data-binding="const-BasicOperations.DataArrayN.h_size" data-verso-hover="40" id="BasicOperations___DataArrayN___h_size">h_size</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-SciLean.Size.size" data-verso-hover="41">size</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="36">I</span> <span class="unknown token" data-binding="">=</span> <span class="var token" data-binding="var-_uniq.22" data-verso-hover="42">data</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-SciLean.DataArray.size" data-verso-hover="43">size</span>
<span class="unknown token" data-binding=""></span></code><p>
            which is an array <code>data</code> with a proof that the array size it equal to the size of the index set <code>I</code>. In the case of <code>I = Fin n</code> we have <code>size (Fin n) = n.</code></p>
          <p>
            Having the flexibility using an arbitrary type <code>I</code> as index is already sufficient to support arbitrary n-dimensional array. To get matrices we pick <code>I = Fin n × Fin m</code>. In other words matrix is just an array indexed by pair of indices <code>(i,j)</code> where <code>0≤i&lt;n</code> and <code>0≤j&lt;m</code>. Thus <code>DataArrayN Float (Fin n × Fin m)</code> is just a <code>n×m</code> matrix and the syntactic sugar for it is <code>Float^[n,m]</code>. We can generalize this and pick <code>I = Fin n₁ × ... × Fin nᵣ</code> which yields <code>r</code>-dimensional array with dimensions <code>n₁, ..., nᵣ</code>. The syntactic sugar for <code>DataArrayN Float (Fin n₁ × ... × Fin nᵣ)</code> is <code>Float^[n₁, ..., nᵣ]</code>.</p>
          <p>
            Have a look at chapter 1.4. Structures in Functional Programming in Lean to learn more about structures</p>
          <p>
            Let's go over the basic operations on arrays in <strong>SciLean</strong>. As we mentioned previously you can create <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-List" data-verso-hover="20">List</span></code> with <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">2.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">3.0</span><span class="unknown token" data-binding="">]</span></code> or <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Array" data-verso-hover="0">Array</span></code> with <code>#[1.0,2.0,3.0]</code>. Here we will mainly focus on <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.DataArray" data-verso-hover="12">DataArray</span></code> that uses <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">2.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">3.0</span><span class="unknown token" data-binding="">]</span></code> so let's create one</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-4415">def</span> <span class="const token" data-binding="const-u" data-verso-hover="44" id="u">u</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">2.0</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">3.0</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><p>
            we can access its elements with bracket notation <code>u[i]</code></p>
          <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">1.000000</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-4530" data-verso-hover="11">#eval</span></span> <a href="#u"><span class="const token" data-binding="const-u" data-verso-hover="44">u</span></a><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="45">0</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
            <pre>1.000000
</pre></div>
          <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">2.000000</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-4610" data-verso-hover="11">#eval</span></span> <a href="#u"><span class="const token" data-binding="const-u" data-verso-hover="44">u</span></a><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="45">1</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
            <pre>2.000000
</pre></div>
          <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">3.000000</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-4690" data-verso-hover="11">#eval</span></span> <a href="#u"><span class="const token" data-binding="const-u" data-verso-hover="44">u</span></a><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="45">2</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
            <pre>3.000000
</pre></div>
          <p>
            Lean can leverage the index information in the type of <code>u</code> so we can easily sum all the elements of <code class="hl lean inline" data-lean-context="examples"><a href="#u"><span class="const token" data-binding="const-u" data-verso-hover="44">u</span></a></code></p>
          <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">6.000000</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-4878" data-verso-hover="11">#eval</span></span> <span class="unknown token" data-binding="">∑</span> <span class="var token" data-binding="var-_uniq.377" data-verso-hover="45">i</span><span class="unknown token" data-binding="">,</span> <a href="#u"><span class="const token" data-binding="const-u" data-verso-hover="44">u</span></a><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.377" data-verso-hover="45">i</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
            <pre>6.000000
</pre></div>
          <p>
            or convert an array to a function from the index type to array values</p>
          <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun i =&gt; u[i] : Fin 3 → Float</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-5031">#check</span></span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-5038">fun</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="45">i</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="#u"><span class="const token" data-binding="const-u" data-verso-hover="44">u</span></a><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="45">i</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
            <pre>fun i =&gt; u[i] : Fin 3 → Float
</pre></div>
          <p>
            Lean automatically infers the type of <code>i</code></p>
          <p>
            Similarly we can create a matrix</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-5199">def</span> <span class="const token" data-binding="const-A" data-verso-hover="46" id="A">A</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">2.0</span><span class="unknown token" data-binding="">;</span> <span class="unknown token" data-binding="">3.0</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">4.0</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><p>
            and we can access its elements</p>
          <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">2.000000</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-5294" data-verso-hover="11">#eval</span></span> <a href="#A"><span class="const token" data-binding="const-A" data-verso-hover="46">A</span></a><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="47">0</span><span class="unknown token" data-binding="">,</span><span class="typed token" data-binding="" data-verso-hover="48">1</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
            <pre>2.000000
</pre></div>
          <p>
            Because matrix <code>A</code> is just an array indexed by <code>Fin 2 × Fin 2</code> we can also write it as</p>
          <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">3.000000</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-5465" data-verso-hover="11">#eval</span></span> <a href="#A"><span class="const token" data-binding="const-A" data-verso-hover="46">A</span></a><span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="47">1</span><span class="unknown token" data-binding="">,</span><span class="typed token" data-binding="" data-verso-hover="48">0</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
            <pre>3.000000
</pre></div>
          <p>
            which might look like an odd quirk of our definition of matrix but hopeful later on you will see that this generality allows us to work with indices that have a proper meaning rather being a meaningless number.</p>
          <p>
            Popular method for creating arrays in Python is list comprehension. To some capacity this can be viewed as process turning a function, <code>f : Idx → Elem</code>, into an array <code>DataArraN Elem Idx</code>. The notation is very similar to lambda notation <code>fun x =&gt; f x</code></p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-6017" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.14" data-verso-hover="50">f</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> <span class="typed token" data-binding="" data-verso-hover="2">10</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">)</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">⊞ i =&gt; f i : Float^[10]</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-6049">#check</span></span> <span class="unknown token" data-binding="">⊞</span> <span class="var token" data-binding="var-_uniq.31" data-verso-hover="52">i</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="50">f</span> <span class="var token" data-binding="var-_uniq.31" data-verso-hover="52">i</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
            <pre>⊞ i =&gt; f i : Float^[10]
</pre></div>
          <p>
            Unlike lambda notation, array notation uncurries all of its arguments. This means that <code>⊞ i j =&gt; f i j</code> creates and matrix indexed by <code>(i,j)</code>. For example outer product of two arrays can be defines as</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-6352">def</span> <span class="const token" data-binding="const-outerProduct" data-verso-hover="53">outerProduct</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">m</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">n</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">}</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.29" data-verso-hover="54">x</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">m</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.37" data-verso-hover="30">y</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">m</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span>
  <span class="unknown token" data-binding="">⊞</span> <span class="var token" data-binding="var-_uniq.64" data-verso-hover="55">i</span> <span class="var token" data-binding="var-_uniq.67" data-verso-hover="31">j</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.29" data-verso-hover="54">x</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.64" data-verso-hover="55">i</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.37" data-verso-hover="30">y</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.67" data-verso-hover="31">j</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><p>
            If you want an array of arrays instead of matrix you would write <code>⊞ i =&gt; (⊞ j =&gt; x[i]*y[j])</code> or <code>⊞ j =&gt; (⊞ i =&gt; x[i]*y[j])</code> depending whether you want the matrix stored as an array of rows or columns.</p>
          <p>
            Another way to set up a matrix is to set its elements one by one</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-6758">def</span> <span class="const token" data-binding="const-outerProduct" data-verso-hover="56">outerProduct</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">}</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.29" data-verso-hover="30">x</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.37" data-verso-hover="54">y</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-Id.run" data-verso-hover="6">Id.run</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-6833">do</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-6838">let</span> <span class="keyword token" data-binding="kw-occ-null-6842">mut</span> <span class="var token" data-binding="var-_uniq.1259" data-verso-hover="57">A</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span> <span class="typed token" data-binding="" data-verso-hover="57">0</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-6869" data-verso-hover="9">for</span> <span class="var token" data-binding="var-_uniq.381" data-verso-hover="31">i</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-6873">in</span> <span class="const token" data-binding="const-SciLean.fullRange" data-verso-hover="58">fullRange</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-6869" data-verso-hover="9">do</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-6903" data-verso-hover="9">for</span> <span class="var token" data-binding="var-_uniq.481" data-verso-hover="55">j</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-6907">in</span> <span class="const token" data-binding="const-SciLean.fullRange" data-verso-hover="58">fullRange</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-6903" data-verso-hover="9">do</span>
      <span class="var token" data-binding="var-_uniq.1259" data-verso-hover="57">A</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.381" data-verso-hover="31">i</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.481" data-verso-hover="55">j</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.29" data-verso-hover="30">x</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.381" data-verso-hover="31">i</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.37" data-verso-hover="54">y</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.481" data-verso-hover="55">j</span><span class="unknown token" data-binding="">]</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doReturn-6961" data-verso-hover="10">return</span> <span class="var token" data-binding="var-_uniq.1259" data-verso-hover="57">A</span>
<span class="unknown token" data-binding=""></span></code><p>
            We first create mutable zero matrix and then set every. The function <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.fullRange" data-verso-hover="58">fullRange</span></code> creates a range that runs over all the elements of <code>I</code>. When working with matrices, one has to be careful if they are in column major or row major ordering and accordingly iterate over <code>i</code> first and then over <code>j</code>. We will explain later how this is done in <strong>SciLean</strong> so for now it is safe to just iterate over both indices simultaneously and we get the optimal order</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-7435">def</span> <span class="const token" data-binding="const-outerProduct''" data-verso-hover="59" id="outerProduct______">outerProduct''</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">}</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.29" data-verso-hover="30">x</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.37" data-verso-hover="54">y</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-Id.run" data-verso-hover="6">Id.run</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-7512">do</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-7517">let</span> <span class="keyword token" data-binding="kw-occ-null-7521">mut</span> <span class="var token" data-binding="var-_uniq.428" data-verso-hover="57">A</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span> <span class="typed token" data-binding="" data-verso-hover="57">0</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-7548" data-verso-hover="9">for</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.424" data-verso-hover="31">i</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.425" data-verso-hover="55">j</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-7552">in</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-SciLean.fullRange" data-verso-hover="58">fullRange</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span> <span class="unknown token" data-binding="">×</span> <span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-7548" data-verso-hover="9">do</span>
    <span class="var token" data-binding="var-_uniq.428" data-verso-hover="57">A</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.424" data-verso-hover="31">i</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.425" data-verso-hover="55">j</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.29" data-verso-hover="30">x</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.424" data-verso-hover="31">i</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.37" data-verso-hover="54">y</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.425" data-verso-hover="55">j</span><span class="unknown token" data-binding="">]</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doReturn-7619" data-verso-hover="10">return</span> <span class="var token" data-binding="var-_uniq.428" data-verso-hover="57">A</span>
<span class="unknown token" data-binding=""></span></code><p>
            Of course the above implementation of has the drawback that it first initialized the whole matrix to zero and then go over the matrix again and set it up to the correct value. Sometimes it is much more natural to create the matrix element by element. We can create an array with dynamic size and push element one by one. Once we are done we can fix the dimensions of the matrix.</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-8034">def</span> <span class="const token" data-binding="const-outerProduct" data-verso-hover="56">outerProduct</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">}</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.29" data-verso-hover="30">x</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.37" data-verso-hover="54">y</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-Id.run" data-verso-hover="6">Id.run</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-8127">do</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-8132">let</span> <span class="keyword token" data-binding="kw-occ-null-8136">mut</span> <span class="var token" data-binding="var-_uniq.1120" data-verso-hover="60">A</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-SciLean.DataArray" data-verso-hover="12">DataArray</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-Inhabited.default" data-verso-hover="61">default</span>
  <span class="var token" data-binding="var-_uniq.1120" data-verso-hover="60">A</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.1120" data-verso-hover="60">A</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-SciLean.DataArray.reserve" data-verso-hover="62">reserve</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span><span class="unknown token" data-binding="">)</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-8196" data-verso-hover="9">for</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1116" data-verso-hover="31">i</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.1117" data-verso-hover="55">j</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-8200">in</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-SciLean.fullRange" data-verso-hover="58">fullRange</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="2">n</span> <span class="unknown token" data-binding="">×</span> <span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="2">m</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-8196" data-verso-hover="9">do</span>
    <span class="var token" data-binding="var-_uniq.1120" data-verso-hover="60">A</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.1120" data-verso-hover="60">A</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-SciLean.DataArray.push" data-verso-hover="17">push</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.29" data-verso-hover="30">x</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.1116" data-verso-hover="31">i</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.37" data-verso-hover="54">y</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.1117" data-verso-hover="55">j</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doReturn-8271" data-verso-hover="10">return</span> <span class="unknown token" data-binding="">{</span> <span class="const token" data-binding="const-SciLean.DataArrayN.data" data-verso-hover="63">data</span><span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.1120" data-verso-hover="60">A</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-SciLean.DataArrayN.h_size" data-verso-hover="64">h_size</span><span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-SciLean.termSorry_proof-8299" data-verso-hover="65">sorry_proof</span> <span class="unknown token" data-binding="">}</span>
<span class="unknown token" data-binding=""></span></code><p>
            Recall that <code>Float^[n,m]</code> is just syntax for <code>DataArrayN Float (Fin n × Fin m)</code> and <code>DataArrayN X I</code> is just a structure holding <code>data : DataArray X</code> and a proof <code>h_size : data.size = size I</code>. In this case, we provide the matrix <code>A</code> and in the second element we should provide a proof that <code>A.size = size (Fin n × Fin m) = n*m</code>. Right now, we do not want to focus on proofs so we just omit it. Deciding when to provide proofs and when to omit them is a crucial skill when writing programs in Lean. Often it is very useful to just state what your program is supposed to do. It is a an amazing tool to clarify in your head what program are you actually writing. On the other hand, providing all the proofs can be really tedious and often a waste of time if you have to reorganize your program and all your proofs are suddently invalid.</p>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Working-with-Arrays--Basic-Operations--Reshaping-Arrays">
              1.1.1. Reshaping Arrays</h2>
            <p>
              Reshaping arrays is a common operation, where you may need to transform an array of one shape into another while preserving its total size. <strong>SciLean</strong> provides several functions for reshaping arrays, allowing you to convert arrays of arbitrary shapes into vectors, matrices, or arrays of higher rank.</p>
            <pre>def reshape1 (x : Float^[I]) (n : Nat)    (h : size I = n)     : Float^[n] := ...
def reshape2 (x : Float^[I]) (n m : Nat)  (h : size I = n*m)   : Float^[n,m] := ...
def reshape3 (x : Float^[I]) (n m k: Nat) (h : size I = n*m*k) : Float^[n,m,k] := ...
...
</pre><p>
              For example, to create a matrix, you can first create an array and then convert it to a matrix:</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">⊞[1.0, 2.0, 3.0, 4.0].reshape (Fin 2 × Fin 2) ⋯ : Float^[2, 2]</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-9846">#check</span></span> <span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">2.0</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">3.0</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">4.0</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-SciLean.DataArrayN.reshape" data-verso-hover="66">reshape</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> <span class="typed token" data-binding="" data-verso-hover="2">2</span> <span class="unknown token" data-binding="">×</span> <span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> <span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="tactic"><label for="tactic-state-329038712568595860-9903-9905"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-9903" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-329038712568595860-9903-9905"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.14" data-verso-hover="50">f</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> 10 → <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-SciLean.Size.size" data-verso-hover="41">size</span> (<span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> 2<span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> 2)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="const token" data-binding="const-SciLean.Size.size" data-verso-hover="41">size</span> (<span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> 4)</span></span></span></span></span> <span class="tactic"><label for="tactic-state-7-9906-9912"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.decide-9906" data-verso-hover="70">decide</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-9906-9912"><span class="tactic-state">All goals completed! 🐙</span></span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
              Here, we also prove that reshaping an array of size four to a two-by-two matrix is valid by calling the tactic <code>decide</code>. This tactic works well with concrete numbers, when variables are involved, feel free to omit the proof with <code>sorry</code>.</p>
            <p>
              These reshape functions are concrete instances of a general <code>reshape</code> function:</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">SciLean.DataArrayN.reshape.{u_1, u_3, u_4} {α : Type u_1} [pd : PlainDataType α] {ι : Type u_4} [IndexType ι]
  (x : α^[ι]) (κ : Type u_3) [IndexType κ] (hs : size κ = size ι) : α^[κ]</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-10268">#check</span></span> <span class="const token" data-binding="const-SciLean.DataArrayN.reshape" data-verso-hover="66">DataArrayN.reshape</span>
<span class="unknown token" data-binding=""></span></code><p>
              which reshapes an array of shape <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.236" data-verso-hover="71">I</span></code> to an array of shape <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.270" data-verso-hover="72">J</span></code>. Using this function for vectors or matrices is cumbersome, as <code>x.reshape2 n m sorry</code> is just a shorthand for <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.319" data-verso-hover="73">x</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-SciLean.DataArrayN.reshape" data-verso-hover="66">reshape</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> <span class="var token" data-binding="var-_uniq.306" data-verso-hover="2">n</span> <span class="unknown token" data-binding="">×</span> <span class="const token" data-binding="const-Fin" data-verso-hover="51">Fin</span> <span class="var token" data-binding="var-_uniq.308" data-verso-hover="2">m</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.sorry-10629" data-verso-hover="74">sorry</span></code>.</p>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Working-with-Arrays--Basic-Operations--Exercises">
              1.1.2. Exercises</h2>
            <ol start="1">
              <li>
                <p>
                  Write function that computes mean and variance</p>
                <ul>
                  <li>
                    <p>
                      For array of floats <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.375" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span></code>.</p>
                    </li>
                  <li>
                    <p>
                      For arbitrarily shaped data <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.411" data-verso-hover="75">I</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.408" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span></code>. Mean should have type <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.464" data-verso-hover="76">I</span><span class="unknown token" data-binding="">]</span></code> and covariance should have type <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.497" data-verso-hover="77">I</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.497" data-verso-hover="77">I</span><span class="unknown token" data-binding="">]</span></code>.</p>
                    </li>
                  </ul>
                </li>
              </ol>
            <details class="foldable"><summary class="description">Solution for <code>Float^[n]</code></summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-11105" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.66" data-verso-hover="2">n</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">}</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-11125">def</span> <span class="const token" data-binding="const-mean" data-verso-hover="78">mean</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.77" data-verso-hover="30">x</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.66" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> <span class="unknown token" data-binding="">:=</span>
  <span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="47">1</span><span class="unknown token" data-binding="">/</span><span class="var token" data-binding="var-_uniq.66" data-verso-hover="2">n</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Nat.toFloat" data-verso-hover="79">toFloat</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">•</span> <span class="unknown token" data-binding="">∑</span> <span class="var token" data-binding="var-_uniq.153" data-verso-hover="31">i</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.77" data-verso-hover="30">x</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.153" data-verso-hover="31">i</span><span class="unknown token" data-binding="">]</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-11194">def</span> <span class="const token" data-binding="const-variance" data-verso-hover="80" id="mean">variance</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.532" data-verso-hover="30">x</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.66" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> <span class="unknown token" data-binding="">:=</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-11236" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.545" data-verso-hover="47">m</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-mean" data-verso-hover="78">mean</span> <span class="var token" data-binding="var-_uniq.532" data-verso-hover="30">x</span>
  <span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="47">1</span><span class="unknown token" data-binding="">/</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.66" data-verso-hover="2">n</span><span class="unknown token" data-binding="">-</span><span class="typed token" data-binding="" data-verso-hover="2">1</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Nat.toFloat" data-verso-hover="79">toFloat</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">•</span> <span class="unknown token" data-binding="">∑</span> <span class="var token" data-binding="var-_uniq.699" data-verso-hover="31">i</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.532" data-verso-hover="30">x</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.699" data-verso-hover="31">i</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.545" data-verso-hover="47">m</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span>
<span class="unknown token" data-binding=""></span></code></details><details class="foldable"><summary class="description">Solution for <code>Float^[I]^[n]</code></summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-11370" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.80" data-verso-hover="2">n</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.82" data-verso-hover="36">I</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-SciLean.IndexType" data-verso-hover="38">IndexType</span> <span class="var token" data-binding="var-_uniq.82" data-verso-hover="36">I</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-DecidableEq" data-verso-hover="82">DecidableEq</span> <span class="var token" data-binding="var-_uniq.82" data-verso-hover="36">I</span><span class="unknown token" data-binding="">]</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-11431">def</span> <span class="const token" data-binding="const-mean" data-verso-hover="83">mean</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="84">x</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.82" data-verso-hover="36">I</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.80" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.82" data-verso-hover="36">I</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span>
  <span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="47">1</span><span class="unknown token" data-binding="">/</span><span class="var token" data-binding="var-_uniq.80" data-verso-hover="2">n</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Nat.toFloat" data-verso-hover="79">toFloat</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">•</span> <span class="unknown token" data-binding="">∑</span> <span class="var token" data-binding="var-_uniq.206" data-verso-hover="31">i</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.126" data-verso-hover="84">x</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.206" data-verso-hover="31">i</span><span class="unknown token" data-binding="">]</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-11508">def</span> <span class="const token" data-binding="const-covariance" data-verso-hover="85" id="mean-next">covariance</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1124" data-verso-hover="84">x</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.82" data-verso-hover="36">I</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.80" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.82" data-verso-hover="36">I</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.82" data-verso-hover="36">I</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-11562" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.1166" data-verso-hover="73">m</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-mean" data-verso-hover="83">mean</span> <span class="var token" data-binding="var-_uniq.1124" data-verso-hover="84">x</span>
  <span class="unknown token" data-binding="">⊞</span> <span class="var token" data-binding="var-_uniq.1169" data-verso-hover="86">i</span> <span class="var token" data-binding="var-_uniq.1172" data-verso-hover="86">j</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">∑</span> <span class="var token" data-binding="var-_uniq.1182" data-verso-hover="31">k</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1124" data-verso-hover="84">x</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.1182" data-verso-hover="31">k</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.1169" data-verso-hover="86">i</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.1166" data-verso-hover="73">m</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.1169" data-verso-hover="86">i</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">*</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1124" data-verso-hover="84">x</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.1182" data-verso-hover="31">k</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.1172" data-verso-hover="86">j</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.1166" data-verso-hover="73">m</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.1172" data-verso-hover="86">j</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code></details></section>
          </section>
        </main></div>
    </body>
  </html>

