<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Function Transformation</title><link rel="stylesheet" href="../../book.css">
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <script src="../../static/katex/katex.min.js"></script>
    <script src="../../static/math.js"></script>
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../../-verso-js/popper.js"></script>
    <script src="../../-verso-js/tippy.js"></script>
    <link rel="stylesheet" href="../../static/theme.css">
    <link rel="stylesheet" href="../../static/inter/inter.css">
    <link rel="stylesheet" href="../../static/firacode/fira_code.css">
    <link rel="stylesheet" href="../../static/katex/katex.min.css">
    <link rel="stylesheet" href="../../-verso-css/tippy-border.css">
    <style>
div.collapsible-hint {
  margin: 5px 0;
}

div.collapsible-hint-header {
  padding: 2px;
  font-size: medium;
  cursor: pointer;
  position: relative;
}

div.collapsible-hint-header::after {
  content: "⊢";
  position: absolute;
  left: 50px;
  transition: transform 0.3s ease;
}

div.collapsible-hint-content {
  border: 1px solid white;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

div.collapsible-hint.expanded .collapsible-hint-content {
  max-height: 500px; /* Adjust this value depending on the content's height */
  border: 1px solid lightgrey;
}

div.collapsible-hint.expanded .collapsible-hint-header::after {
  transform: rotate(90deg); /* Rotate to show ">" when expanded */
}
</style><style>

.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
}

.hl.lean .keyword {
  font-weight : bold;
}

.hl.lean .var {
  font-style: italic;
  position: relative;
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5em;
  z-index: 300;
  font-size: inherit;
}

.hl.lean .hover-info.messages {
  max-height: 10em;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5em 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5em;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1em;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0em;
}

/*
@media (hover: hover) {
  .hl.lean .has-info:hover > .hover-container > .hover-info:not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .has-info:hover > .hover-container > .hover-info,
  .hl.lean .token:hover > .hover-container > .hover-info:not(.has-info *):not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .token:hover > .hover-container > .hover-info:not(.has-info *) {
    display: inline-block;
    position: absolute;
    top: 1em;
    font-weight: normal;
    font-style: normal;
    width: min-content;
  }
}
*/

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: 0.1rem;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5em;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error {
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2em solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error pre {
    color: red;
}

.hl.lean .has-info.warning {
  text-decoration-color: #efd871;
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color: #efd871;
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: #efd871;
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2em solid #efd871;
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.info {
  text-decoration-color: blue;
}

@media (hover: hover) {
  .hl.lean .has-info.info:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.info {
  background-color: #e5e5e5;
  border-left: 0.2em solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.info {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: sans-serif;
  white-space: normal;
  max-width: 40em;
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1em;
  margin-right: 1em;
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: monospace;
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  left: 2em;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1em;
  padding: 0.5em;
  font-family: sans-serif;
  background-color: #ffffff;
  z-index: 200;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5em;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: block;
}

/*
@media (hover: hover) {
  .hl.lean .tactic:hover > .tactic-toggle:not(:checked) ~ .tactic-state {
    display: block;
    position: absolute;
    left: 0;
    transform: translate(0.25rem, 0);
    z-index: 250;
  }
}
*/

.hl.lean .tactic > label {
  position: relative;
  transition: all 0.5s;
}

@media (hover: hover) {
  .hl.lean .tactic > label:hover {
    border-bottom: 1px dotted #bbbbbb;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  border-radius: 1em;
  height: 0.25em;
  vertical-align: middle;
  width: 0.6em;
  margin-left: 0.1em;
  margin-right: 0.1em;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5em;
}

.hl.lean .tactic-state summary {
  margin-left: -0.5em;
}

.hl.lean .tactic-state details {
  padding-left: 0.5em;
}

.hl.lean .tactic-state .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .tactic-state .goal-name {
  font-style: italic;
  font-family: monospace;
}

.hl.lean .tactic-state .hypotheses td.colon {
  text-align: center;
  min-width: 1em;
}

.hl.lean .tactic-state .hypotheses td.name {
  text-align: right;
}

.hl.lean .tactic-state .hypotheses td.name,
.hl.lean .tactic-state .hypotheses td.type,
.hl.lean .tactic-state .conclusion .type {
  font-family: monospace;
}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #efd871;
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}



.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

</style><style>
div.TODO {
  border: 5px solid red;
  position: relative;
}
div.TODO::before {
  content: "TODO";
  position: absolute;
  top: 0;
  right: 0;
  color: red;
  font-size: large;
  font-weight: bold;
  transform: rotate(-90deg) translate(-2em);
}
</style><style>
div.collapsible {
  margin: 5px 0;
}

div.collapsible-header {
  padding: 2px;
  font-size: medium;
  cursor: pointer;
  position: relative;
}

div.collapsible-header::after {
  content: "⊢";
  position: absolute;
  left: 60px;
  transition: transform 0.3s ease;
}

div.collapsible-content {
  border: 1px solid white;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

div.collapsible.expanded .collapsible-content {
  max-height: 500px; /* Adjust this value depending on the content's height */
  border: 1px solid lightgrey;
}

div.collapsible.expanded .collapsible-header::after {
  transform: rotate(90deg); /* Rotate to show ">" when expanded */
}
</style><script>
      
window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    fetch("/-verso-docs.json").then((resp) => resp.json()).then((versoDocData) => {

      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        theme: "lean",
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        ignoreAttributes: true,
        onShow(inst) {
          if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          content.className = "hl lean";
          content.style.display = "block";
          content.style.maxHeight = "300px";
          content.style.overflowY = "auto";
          content.style.overflowX = "hidden";
          const hoverId = tgt.dataset.versoHover;
          const hoverInfo = tgt.querySelector(".hover-info");
          if (hoverId) { // Docstrings from the table
            // TODO stop doing an implicit conversion from string to number here
            let data = versoDocData[hoverId];
            if (data) {
              const info = document.createElement("span");
              info.className = "hover-info";
              info.style.display = "block";
              info.innerHTML = data;
              content.appendChild(info);
              /* Render docstrings - TODO server-side */
              if ('undefined' !== typeof marked) {
                  for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                      const str = d.innerText;
                      const html = marked.parse(str);
                      const rendered = document.createElement("div");
                      rendered.classList.add("docstring");
                      rendered.innerHTML = html;
                      d.parentNode.replaceChild(rendered, d);
                  }
              }
            } else {
              content.innerHTML = "Failed to load doc ID: " + hoverId;
            }
          } else if (hoverInfo) { // The inline info, still used for compiler messages
            content.appendChild(hoverInfo.cloneNode(true));
          }
          return content;
        }
      };

      const addTippy = (selector, props) => {
        tippy(selector, Object.assign({}, defaultTippyProps, props));
      };
      addTippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token', {theme: 'lean'});
      addTippy('.hl.lean .has-info.warning', {theme: 'warning message'});
      addTippy('.hl.lean .has-info.info', {theme: 'info message'});
      addTippy('.hl.lean .has-info.error', {theme: 'error message'});

      tippy('.hl.lean .tactic', {
        allowHtml: true,
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        maxWidth: "none",
        onShow(inst) {
          const toggle = inst.reference.querySelector("input.tactic-toggle");
          if (toggle && toggle.checked) {
            return false;
          }
          if (blockedByTippy(inst.reference)) { return false; }
        },
        theme: "tactic",
        placement: 'bottom-start',
        content (tgt) {
          const content = document.createElement("span");
          const state = tgt.querySelector(".tactic-state").cloneNode(true);
          state.style.display = "block";
          content.appendChild(state);
          content.style.display = "block";
          content.className = "hl lean popup";
          return content;
        }
      });
  });
}
</script>
    </head>
  <body>
    <div class="with-toc">
      <header>
        <h1>
          <a href="../../">Scientific Computing in Lean</a></h1>
        <div id="controls">
          <label for="toggle-toc" id="toggle-toc-click">📖</label></div>
        <div id="print">
          <span>🖨</span></div>
        </header>
      <nav id="toc">
        <input type="checkbox" id="toggle-toc" checked="checked"><ol>
          <li>
            <a href="../../Introduction#Scientific-Computing-in-Lean--Introduction">Introduction</a><ol>
              <li>
                <a href="../../Introduction/About#Scientific-Computing-in-Lean--Introduction--About">About</a></li>
              <li>
                <a href="../../Introduction/Introduction#Scientific-Computing-in-Lean--Introduction--Introduction">Introduction</a><ol>
                  <li>
                    <a href="../../Introduction/Introduction#Scientific-Computing-in-Lean--Introduction--Introduction--Why-Lean-for-Scientific-Computing">Why Lean for Scientific Computing?</a></li>
                  </ol>
                </li>
              </ol>
            </li>
          <li>
            <a href="../../Working-with-Arrays#Scientific-Computing-in-Lean--Working-with-Arrays">Working with Arrays</a><ol>
              <li>
                <a href="../../Working-with-Arrays/Basic-Operations#Scientific-Computing-in-Lean--Working-with-Arrays--Basic-Operations">Basic Operations</a><ol>
                  <li>
                    <a href="../../Working-with-Arrays/Basic-Operations#Scientific-Computing-in-Lean--Working-with-Arrays--Basic-Operations--Reshaping-Arrays">Reshaping Arrays</a></li>
                  <li>
                    <a href="../../Working-with-Arrays/Basic-Operations#Scientific-Computing-in-Lean--Working-with-Arrays--Basic-Operations--Exercises">Exercises</a></li>
                  </ol>
                </li>
              <li>
                <a href="../../Working-with-Arrays/Tensor-Operations#Scientific-Computing-in-Lean--Working-with-Arrays--Tensor-Operations">Tensor Operations</a><ol>
                  <li>
                    <a href="../../Working-with-Arrays/Tensor-Operations#Scientific-Computing-in-Lean--Working-with-Arrays--Tensor-Operations--Transformations-and-Reductions">Transformations and Reductions</a></li>
                  <li>
                    <a href="../../Working-with-Arrays/Tensor-Operations#Scientific-Computing-in-Lean--Working-with-Arrays--Tensor-Operations--Convolution-and-Operations-on-Indices">Convolution and Operations on Indices</a></li>
                  <li>
                    <a href="../../Working-with-Arrays/Tensor-Operations#Scientific-Computing-in-Lean--Working-with-Arrays--Tensor-Operations--Pooling-and-Difficulties-with-Dependent-Types">Pooling and Difficulties with Dependent Types</a></li>
                  <li>
                    <a href="../../Working-with-Arrays/Tensor-Operations#Scientific-Computing-in-Lean--Working-with-Arrays--Tensor-Operations--Simple-Neural-Network">Simple Neural Network</a></li>
                  </ol>
                </li>
              <li>
                <a href="../../Working-with-Arrays/Optimizing-Array-Expressions#Scientific-Computing-in-Lean--Working-with-Arrays--Optimizing-Array-Expressions">Optimizing Array Expressions</a><ol>
                  <li>
                    <a href="../../Working-with-Arrays/Optimizing-Array-Expressions#Scientific-Computing-in-Lean--Working-with-Arrays--Optimizing-Array-Expressions--Loop-Fusion">Loop Fusion</a></li>
                  <li>
                    <a href="../../Working-with-Arrays/Optimizing-Array-Expressions#Scientific-Computing-in-Lean--Working-with-Arrays--Optimizing-Array-Expressions--Optimizing-Array-Indexing">Optimizing Array Indexing</a></li>
                  </ol>
                </li>
              </ol>
            </li>
          <li>
            <a href="../../Differentiation#Scientific-Computing-in-Lean--Differentiation">Differentiation</a><ol>
              <li>
                <a href="../../Differentiation/Symbolic-Differentiation#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation">Symbolic Differentiation</a><ol>
                  <li>
                    <a href="../../Differentiation/Symbolic-Differentiation#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Notation">Notation</a></li>
                  <li>
                    <a href="../../Differentiation/Symbolic-Differentiation#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Examples">Examples</a></li>
                  <li>
                    <a href="../../Differentiation/Symbolic-Differentiation#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Gradient">Gradient</a></li>
                  <li>
                    <a href="../../Differentiation/Symbolic-Differentiation#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Derivative-Rules">Derivative Rules</a></li>
                  <li>
                    <a href="../../Differentiation/Symbolic-Differentiation#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Differentiating-Division-Log-Sqrt-">Differentiating Division, Log, Sqrt, ...</a></li>
                  <li>
                    <a href="../../Differentiation/Symbolic-Differentiation#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Abstract-Vector-Spaces">Abstract Vector Spaces</a></li>
                  </ol>
                </li>
              <li>
                <a href="../../Differentiation/Automatic-Differentiation#Scientific-Computing-in-Lean--Differentiation--Automatic-Differentiation">Automatic Differentiation</a><ol>
                  <li>
                    <a href="../../Differentiation/Automatic-Differentiation#Scientific-Computing-in-Lean--Differentiation--Automatic-Differentiation--Forward-Mode">Forward Mode</a></li>
                  <li>
                    <a href="../../Differentiation/Automatic-Differentiation#Scientific-Computing-in-Lean--Differentiation--Automatic-Differentiation--Reverse-Mode">Reverse Mode</a></li>
                  <li>
                    <a href="../../Differentiation/Automatic-Differentiation#Scientific-Computing-in-Lean--Differentiation--Automatic-Differentiation--Derivatives-of-Neural-Network-Layers">Derivatives of Neural Network Layers</a></li>
                  </ol>
                </li>
              <li>
                <a href="../../Differentiation/Function-Transformation#Scientific-Computing-in-Lean--Differentiation--Function-Transformation">Function Transformation</a><ol>
                  <li>
                    <a href="../../Differentiation/Function-Transformation#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--User-Defined-Function-Transformation">User Defined Function Transformation</a></li>
                  <li>
                    <a href="../../Differentiation/Function-Transformation#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Lambda-Theorems">Lambda Theorems</a></li>
                  <li>
                    <a href="../../Differentiation/Function-Transformation#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Function-Theorems">Function Theorems</a></li>
                  <li>
                    <a href="../../Differentiation/Function-Transformation#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Free-Variable-Theorems">Free Variable Theorems</a></li>
                  <li>
                    <a href="../../Differentiation/Function-Transformation#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Morphism-Theorems">Morphism Theorems</a></li>
                  <li>
                    <a href="../../Differentiation/Function-Transformation#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Advanced-Function-Theorems">Advanced Function Theorems</a></li>
                  </ol>
                </li>
              </ol>
            </li>
          <li>
            <a href="../../Examples#Scientific-Computing-in-Lean--Examples">Examples</a><ol>
              <li>
                <a href="../../Examples/Harmonic-Oscillator#Scientific-Computing-in-Lean--Examples--Harmonic-Oscillator">Harmonic Oscillator</a></li>
              </ol>
            </li>
          </ol>
        </nav>
      <main><section>
          <h1>
            Function Transformation</h1>
          <p>
            In this chapter we will look under the lid of the tactic <code>fun_trans</code>, a tactic for general function transformation. Explain the main idea behind it, how to define your own function transformations and how does it work internally.</p>
          <p>
            Note: One of the main inspiration is Google JAX which is descibed as: "Google JAX is a machine learning framework for transforming numerical functions." </p>
          <p>
            So far we have encoutered couple of function transfomations <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fderiv" data-verso-hover="235">fderiv</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.fwdFDeriv" data-verso-hover="353">fwdFDeriv</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.revFDeriv" data-verso-hover="358">revFDeriv</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-adjoint" data-verso-hover="279">adjoint</span></code>. In general, function transformation should be a higher order function <code>F</code> taking a function and producing a function that should satisfy</p>
          <p>
            $$F(f \circ g) = F(f) \circ F(g)
$$</p>
          <p>
            where the composition \( \circ \) should be some kind of generalized composition.</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-1108" data-verso-hover="13">open</span> <span class="unknown token" data-binding="">SciLean</span> 
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-1122" data-verso-hover="52">variable</span> 
  <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10327" data-verso-hover="284">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="unknown token" data-binding="">ℝ</span> <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10342" data-verso-hover="354">hg</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="unknown token" data-binding="">ℝ</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10344" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span> <span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10852" data-verso-hover="359">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="unknown token" data-binding="">ℝ</span> <span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10869" data-verso-hover="361">hg</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="unknown token" data-binding="">ℝ</span> <span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-1323">example</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span> <span class="unknown token" data-binding="">∘</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span> <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">*</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span> <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-10833689455517079360-1382-1384"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-1382" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-10833689455517079360-1382-1384"><div class="tactic-state"><div class="goal"><table class="hypotheses"><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10327" data-verso-hover="284">hf✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10342" data-verso-hover="354">hg✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10344" data-verso-hover="236">x✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10852" data-verso-hover="359">hf</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10869" data-verso-hover="361">hg</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr></table><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∂ (<span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span><span class="const token" data-binding="const-Function.comp" data-verso-hover="355"> ∘ </span><span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span>) <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span><span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span>(∂ <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span> (<span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span> <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span>))<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="153"> * </span>∂ <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span> <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span></span></span></div></div></span> 
  <span class="tactic"><label for="tactic-state-3110499946236782487-1388-1414"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-1388" data-verso-hover="253">unfold</span> <span class="const token" data-binding="const-Function.comp" data-verso-hover="355">Function.comp</span> <span class="const token" data-binding="const-deriv" data-verso-hover="246">deriv</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3110499946236782487-1388-1414"><div class="tactic-state"><div class="goal"><table class="hypotheses"><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10327" data-verso-hover="284">hf✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10342" data-verso-hover="354">hg✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10344" data-verso-hover="236">x✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10852" data-verso-hover="359">hf</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10869" data-verso-hover="361">hg</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr></table><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(∂ (<span class="var token" data-binding="var-_uniq.6722" data-verso-hover="236">x</span>:=<span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span>), <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span> (<span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span> <span class="var token" data-binding="var-_uniq.6722" data-verso-hover="236">x</span>)) 1<span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span>(∂ <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span> (<span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span> <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span>)) 1<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="153"> * </span>(∂ <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span> <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span>) 1</span></span></div></div></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-1416-1435"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-1416">fun_trans</span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-mul_comm" data-verso-hover="362">mul_comm</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-1416-1435"><div class="tactic-state">All goals completed! 🐙</div></span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-1437">example</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">↿</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span> <span class="unknown token" data-binding="">∘</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">↿</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂&gt;</span> <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">∘</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">↿</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂&gt;</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-7894730386446070932-1506-1508"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-1506" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7894730386446070932-1506-1508"><div class="tactic-state"><div class="goal"><table class="hypotheses"><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10327" data-verso-hover="284">hf✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10342" data-verso-hover="354">hg✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10344" data-verso-hover="236">x✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10852" data-verso-hover="359">hf</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10869" data-verso-hover="361">hg</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr></table><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="356">↿</span>(∂&gt; <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span><span class="const token" data-binding="const-Function.comp" data-verso-hover="355"> ∘ </span><span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="356">↿</span>(∂&gt; <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span>)<span class="const token" data-binding="const-Function.comp" data-verso-hover="355"> ∘ </span><span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="356">↿</span>(∂&gt; <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span>)</span></span></div></div></span> 
  <span class="tactic"><label for="tactic-state-7-1512-1566"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-1512">fun_trans</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="356">Function.HasUncurry.uncurry</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-Function.comp" data-verso-hover="355">Function.comp</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-1512-1566"><div class="tactic-state">All goals completed! 🐙</div></span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-1568">example</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">&lt;∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span> <span class="unknown token" data-binding="">∘</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span> 
          <span class="unknown token" data-binding="">=</span> 
          <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-1621" data-verso-hover="80">let</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.11000" data-verso-hover="236">y</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.11001" data-verso-hover="241">dg</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">&lt;∂</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span> <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span><span class="unknown token" data-binding="">;</span> 
          <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-1656" data-verso-hover="80">let</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.11056" data-verso-hover="236">z</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.11057" data-verso-hover="241">df</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">&lt;∂</span> <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span> <span class="var token" data-binding="var-_uniq.11000" data-verso-hover="236">y</span><span class="unknown token" data-binding="">;</span> 
          <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.11056" data-verso-hover="236">z</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.11001" data-verso-hover="241">dg</span> <span class="unknown token" data-binding="">∘</span> <span class="var token" data-binding="var-_uniq.11057" data-verso-hover="241">df</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-1702308998228143292-1709-1711"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-1709" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1702308998228143292-1709-1711"><div class="tactic-state"><div class="goal"><table class="hypotheses"><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10327" data-verso-hover="284">hf✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10342" data-verso-hover="354">hg✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10344" data-verso-hover="236">x✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10852" data-verso-hover="359">hf</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10869" data-verso-hover="361">hg</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr></table><span class="conclusion"><span class="prefix">⊢ </span><span class="type">&lt;∂ (<span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span><span class="const token" data-binding="const-Function.comp" data-verso-hover="355"> ∘ </span><span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span>) <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span><span class="const token" data-binding="const-Eq" data-verso-hover="72"> =
  </span><span class="keyword token" data-binding="">match</span> &lt;∂ <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span> <span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span> <span class="keyword token" data-binding="">with</span>
  | (<span class="var token" data-binding="var-_uniq.13571" data-verso-hover="236">y</span>, <span class="var token" data-binding="var-_uniq.13572" data-verso-hover="241">dg</span>) =&gt;
    <span class="keyword token" data-binding="">match</span> &lt;∂ <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span> <span class="var token" data-binding="var-_uniq.13533" data-verso-hover="236">y</span> <span class="keyword token" data-binding="">with</span>
    | (<span class="var token" data-binding="var-_uniq.13561" data-verso-hover="236">z</span>, <span class="var token" data-binding="var-_uniq.13562" data-verso-hover="241">df</span>) =&gt; (<span class="var token" data-binding="var-_uniq.13551" data-verso-hover="236">z</span>, <span class="var token" data-binding="var-_uniq.13534" data-verso-hover="241">dg</span><span class="const token" data-binding="const-Function.comp" data-verso-hover="355"> ∘ </span><span class="var token" data-binding="var-_uniq.13552" data-verso-hover="241">df</span>)</span></span></div></div></span> 
 <span class="tactic"><label for="tactic-state-7-1714-1739"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-1714">fun_trans</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Function.comp" data-verso-hover="355">Function.comp</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-1714-1739"><div class="tactic-state">All goals completed! 🐙</div></span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-1741">example</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-adjoint" data-verso-hover="279">adjoint</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span> <span class="unknown token" data-binding="">∘</span> <span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="const token" data-binding="const-adjoint" data-verso-hover="279">adjoint</span> <span class="unknown token" data-binding="">ℝ</span> <span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span> <span class="unknown token" data-binding="">∘</span> <span class="const token" data-binding="const-adjoint" data-verso-hover="279">adjoint</span> <span class="unknown token" data-binding="">ℝ</span> <span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-12668659059314156525-1810-1812"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-1810" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12668659059314156525-1810-1812"><div class="tactic-state"><div class="goal"><table class="hypotheses"><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10327" data-verso-hover="284">hf✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10137" data-verso-hover="241">f</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10342" data-verso-hover="354">hg✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10141" data-verso-hover="241">g</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10344" data-verso-hover="236">x✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10852" data-verso-hover="359">hf</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10869" data-verso-hover="361">hg</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.10871" data-verso-hover="236">x</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span></td></tr></table><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-adjoint" data-verso-hover="279">adjoint</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> (<span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span><span class="const token" data-binding="const-Function.comp" data-verso-hover="355"> ∘ </span><span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="const token" data-binding="const-adjoint" data-verso-hover="279">adjoint</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10352" data-verso-hover="241">B</span><span class="const token" data-binding="const-Function.comp" data-verso-hover="355"> ∘ </span><span class="const token" data-binding="const-adjoint" data-verso-hover="279">adjoint</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="var token" data-binding="var-_uniq.10348" data-verso-hover="241">A</span></span></span></div></div></span> 
  <span class="tactic"><label for="tactic-state-7-1816-1840"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-1816">fun_trans</span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Function.comp" data-verso-hover="355">Function.comp</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-1816-1840"><div class="tactic-state">All goals completed! 🐙</div></span>
<span class="unknown token" data-binding=""></span></code><p>
            Also <code>F</code> should preserve identity</p>
          <p>
            $$F(\text{id}) = \text{id}
$$</p>
          <p>
            where \( \text{id} \) is some generalized notion of identity function</p>
          <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-2002">example</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-fderiv" data-verso-hover="235">fderiv</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2025">fun</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2047">fun</span> <span class="unknown token" data-binding="">_</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="keyword token" data-binding="kw-occ-SciLean.«termFun_=>L[_]_»-2056">fun</span> <span class="var token" data-binding="var-_uniq.206" data-verso-hover="236">dx</span> <span class="unknown token" data-binding="">=&gt;L[</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">]</span> <span class="var token" data-binding="var-_uniq.206" data-verso-hover="236">dx</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-14011202760167922843-2079-2081"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-2079" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-14011202760167922843-2079-2081"><div class="tactic-state"><div class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∂ <span class="var token" data-binding="var-_uniq.3201" data-verso-hover="236">x</span>, <span class="var token" data-binding="var-_uniq.3201" data-verso-hover="236">x</span><span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3202" data-verso-hover="236">x</span> =&gt; <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3216" data-verso-hover="236">dx</span> =&gt;L[<span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span>] <span class="var token" data-binding="var-_uniq.3216" data-verso-hover="236">dx</span></span></span></div></div></span> <span class="tactic"><label for="tactic-state-7-2082-2091"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-2082">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-2082-2091"><div class="tactic-state">All goals completed! 🐙</div></span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-2092">example</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂&gt;</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2109">fun</span> <span class="var token" data-binding="var-_uniq.3212" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.3212" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2130">fun</span> <span class="var token" data-binding="var-_uniq.3385" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.3388" data-verso-hover="236">dx</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3385" data-verso-hover="236">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.3388" data-verso-hover="236">dx</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-17570646539162542410-2152-2154"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-2152" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-17570646539162542410-2152-2154"><div class="tactic-state"><div class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∂&gt; <span class="var token" data-binding="var-_uniq.3514" data-verso-hover="236">x</span>, <span class="var token" data-binding="var-_uniq.3514" data-verso-hover="236">x</span><span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3516" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.3517" data-verso-hover="236">dx</span> =&gt; (<span class="var token" data-binding="var-_uniq.3516" data-verso-hover="236">x</span>, <span class="var token" data-binding="var-_uniq.3517" data-verso-hover="236">dx</span>)</span></span></div></div></span> <span class="tactic"><label for="tactic-state-7-2155-2164"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-2155">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-2155-2164"><div class="tactic-state">All goals completed! 🐙</div></span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-2165">example</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">&lt;∂</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2182">fun</span> <span class="var token" data-binding="var-_uniq.3517" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.3517" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2203">fun</span> <span class="var token" data-binding="var-_uniq.3621" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3621" data-verso-hover="236">x</span><span class="unknown token" data-binding="">,</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2216">fun</span> <span class="var token" data-binding="var-_uniq.3628" data-verso-hover="236">dx</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.3628" data-verso-hover="236">dx</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-12673449491510249907-2233-2235"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-2233" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12673449491510249907-2233-2235"><div class="tactic-state"><div class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">&lt;∂ <span class="var token" data-binding="var-_uniq.3766" data-verso-hover="236">x</span>, <span class="var token" data-binding="var-_uniq.3766" data-verso-hover="236">x</span><span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3767" data-verso-hover="236">x</span> =&gt; (<span class="var token" data-binding="var-_uniq.3767" data-verso-hover="236">x</span>, <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3773" data-verso-hover="236">dx</span> =&gt; <span class="var token" data-binding="var-_uniq.3773" data-verso-hover="236">dx</span>)</span></span></div></div></span> <span class="tactic"><label for="tactic-state-7-2236-2245"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-2236">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-2236-2245"><div class="tactic-state">All goals completed! 🐙</div></span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-2246">example</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-adjoint" data-verso-hover="279">adjoint</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2270">fun</span> <span class="var token" data-binding="var-_uniq.3766" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.3766" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2291">fun</span> <span class="var token" data-binding="var-_uniq.3859" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.3859" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-6486380394652980496-2305-2307"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-2305" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6486380394652980496-2305-2307"><div class="tactic-state"><div class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="const token" data-binding="const-adjoint" data-verso-hover="279">adjoint</span> <span class="const token" data-binding="const-Real" data-verso-hover="237">ℝ</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3950" data-verso-hover="236">x</span> =&gt; <span class="var token" data-binding="var-_uniq.3950" data-verso-hover="236">x</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3951" data-verso-hover="236">x</span> =&gt; <span class="var token" data-binding="var-_uniq.3951" data-verso-hover="236">x</span></span></span></div></div></span> <span class="tactic"><label for="tactic-state-7-2308-2317"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-2308">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-2308-2317"><div class="tactic-state">All goals completed! 🐙</div></span>
<span class="unknown token" data-binding=""></span></code><p>
            (Note: If you are familiar with category theorey then <code>F</code> is often a functor. For example <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fderiv" data-verso-hover="235">fderiv</span></code> is not really a functor yet it still fits into SciLean's function transformation framework.)</p>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--User-Defined-Function-Transformation">
              User Defined Function Transformation</h2>
            <p>
              Let's demonstrate <code>fun_trans</code> capability by defining a slight variant of forward mode derivative</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-2669" data-verso-hover="13">open</span> <span class="unknown token" data-binding="">SciLean</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-2682" data-verso-hover="52">variable</span> 
  <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="272">R</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-RCLike" data-verso-hover="337">RCLike</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="272">R</span><span class="unknown token" data-binding="">]</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.9" data-verso-hover="328">X</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.9" data-verso-hover="328">X</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="272">R</span> <span class="var token" data-binding="var-_uniq.9" data-verso-hover="328">X</span><span class="unknown token" data-binding="">]</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.153" data-verso-hover="338">Y</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.153" data-verso-hover="338">Y</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="272">R</span> <span class="var token" data-binding="var-_uniq.153" data-verso-hover="338">Y</span><span class="unknown token" data-binding="">]</span>

<span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.noncomputable-2817">noncomputable</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-2831">def</span> <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.580" data-verso-hover="339">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.9" data-verso-hover="139">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.153" data-verso-hover="140">Y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.9" data-verso-hover="139">X</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.9" data-verso-hover="139">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.153" data-verso-hover="140">Y</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.153" data-verso-hover="140">Y</span> <span class="unknown token" data-binding="">:=</span> 
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2882">fun</span> <span class="var token" data-binding="var-_uniq.592" data-verso-hover="364">xdx</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.580" data-verso-hover="339">f</span> <span class="var token" data-binding="var-_uniq.592" data-verso-hover="364">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-fderiv" data-verso-hover="235">fderiv</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.580" data-verso-hover="339">f</span> <span class="var token" data-binding="var-_uniq.592" data-verso-hover="364">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span> <span class="var token" data-binding="var-_uniq.592" data-verso-hover="364">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
              The only difference is that <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span></code> is uncurried version of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.fwdFDeriv" data-verso-hover="353">fwdFDeriv</span></code>.</p>
            <p>
              My marking the definition with <code>@[fun_trans]</code> attribute we let Lean know that it is a function transformation. For <code>fun_trans</code> to work properly with this newly defined function transformation we have to state its transformation rules/theorems. There are couple types</p>
            <ol start="1">
              <li>
                <p>
                  Lambda theorems.
  Theorems about basic lambda terms like indentity <code>fun x =&gt; x</code>, constant <code>fun x =&gt; y</code>, composition <code>fun x =&gt; f (g x)</code> and few more.</p>
                </li>
              <li>
                <p>
                  Function theorems.
  Theorems about functions like addition, multiplication etc.</p>
                </li>
              <li>
                <p>
                  Free variable theorems.
  These theorems usually state a transformation rule under some special condition. Like derivative of linear function is the function itself.</p>
                </li>
              <li>
                <p>
                  Morphism theorems.
  Theorems about bundled morphisms. These are very special theorems that </p>
                </li>
              </ol>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Lambda-Theorems">
              Lambda Theorems</h2>
            <p>
              The tactic <code>fun_trans</code> transforms a complicated functions by first decomposing them into a sequence of function compositions and then transforms each of those function separetely. For example when we want to transform function <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4048">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.613" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.613" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.613" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">^</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span></code> then <code>fun_trans</code> effectivelly rewrites it as</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-4134">example</span> <span class="unknown token" data-binding="">:</span>
  <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4147">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">^</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">=</span>
  <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4186">fun</span> <span class="var token" data-binding="var-_uniq.227" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.227" data-verso-hover="236">x</span><span class="unknown token" data-binding="">^</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">∘</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4205">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.589" data-verso-hover="236">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.590" data-verso-hover="236">y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.589" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.590" data-verso-hover="236">y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">∘</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4230">fun</span> <span class="var token" data-binding="var-_uniq.296" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.296" data-verso-hover="236">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.296" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-4707705310463902365-4251-4253"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-4251" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-4707705310463902365-4251-4253"><div class="tactic-state"><div class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1029" data-verso-hover="236">x</span> =&gt; (2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="153"> * </span><span class="var token" data-binding="var-_uniq.1029" data-verso-hover="236">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="156"> + </span><span class="var token" data-binding="var-_uniq.1029" data-verso-hover="236">x</span>)<span class="const token" data-binding="const-HPow.hPow" data-verso-hover="238"> ^ </span>2)<span class="const token" data-binding="const-Eq" data-verso-hover="72"> =
  </span>(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1076" data-verso-hover="236">x</span> =&gt; <span class="var token" data-binding="var-_uniq.1076" data-verso-hover="236">x</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="238"> ^ </span>2)<span class="const token" data-binding="const-Function.comp" data-verso-hover="355"> ∘
    </span>(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1085" data-verso-hover="240">x</span> =&gt;
        <span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.1085" data-verso-hover="240">x</span> <span class="keyword token" data-binding="">with</span>
        | (<span class="var token" data-binding="var-_uniq.1099" data-verso-hover="236">x</span>, <span class="var token" data-binding="var-_uniq.1100" data-verso-hover="236">y</span>) =&gt; <span class="var token" data-binding="var-_uniq.1088" data-verso-hover="236">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="156"> + </span><span class="var token" data-binding="var-_uniq.1089" data-verso-hover="236">y</span>)<span class="const token" data-binding="const-Function.comp" data-verso-hover="355"> ∘
      </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1106" data-verso-hover="236">x</span> =&gt; (2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="153"> * </span><span class="var token" data-binding="var-_uniq.1106" data-verso-hover="236">x</span>, <span class="var token" data-binding="var-_uniq.1106" data-verso-hover="236">x</span>)</span></span></div></div></span> <span class="tactic"><label for="tactic-state-7-4254-4257"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticRfl-4254" data-verso-hover="283">rfl</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-4254-4257"><div class="tactic-state">All goals completed! 🐙</div></span>
<span class="unknown token" data-binding=""></span></code><p>
              Therefore <code>fun_trans</code> needs to know how to handle transfoming composition but also to transform <code>(fun x =&gt; (2*x,x))</code> it ineeds to know how to transform pairing of two functions <code>fun x =&gt; 2*x</code> and <code>fun x =&gt; x</code>. </p>
            <p>
              Lambda theorems are responsible for reducing the problem of transforming function like <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4569">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.775" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.775" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.775" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">^</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span></code> into transformation of all the elementary functions <code>(fun x =&gt; x^2)</code>, <code>(fun (x,y) =&gt; x+y)</code> and <code>(fun x =&gt; 2*x)</code>. Those are handled by function theorems and we will talk about those a bit later.</p>
            <p>
              There are six basic lambda theorems saying how lambda terms are transformed</p>
            <ol start="1">
              <li>
                <p>
                  Identity rule for transforming <code>fun (x : X) =&gt; x</code></p>
                </li>
              <li>
                <p>
                  Constant rule for transforming <code>fun (x : X) =&gt; y</code></p>
                </li>
              <li>
                <p>
                  Composition rule for transforming <code>fun (x : X) =&gt; f (g x)</code></p>
                </li>
              <li>
                <p>
                  Let rule for transforming <code>fun (x : X) =&gt; let y := g x; f x y</code></p>
                </li>
              <li>
                <p>
                  Apply rule for transforming <code>fun (f : X → Y) =&gt; f x</code></p>
                </li>
              <li>
                <p>
                  Pi rule for transforming <code>fun (x : X) (y : Y) =&gt; f x y</code></p>
                </li>
              </ol>
            <p>
              There are also three theorems about product type which technically speaking fall under the category of "function theorems" but they are so fundamental that we list them here</p>
            <ol start="7">
              <li>
                <p>
                  Product rule for transforming <code>fun (x : X) =&gt; (f x, g x)</code></p>
                </li>
              <li>
                <p>
                  First projection rule for transforming <code>fun (xy : X×Y) =&gt; xy.1</code></p>
                </li>
              <li>
                <p>
                  Second projection rule for transforming <code>fun (xy : X×Y) =&gt; xy.2</code></p>
                </li>
              </ol>
            <p>
              The collection of these theorems allows <code>fun_trans</code> to transform any complicated lambda expression if it can transform all the atomic functions in the lambda expression.</p>
            <p>
              Let us give an example of few lambda theorems for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span></code></p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-5848" data-verso-hover="13">open</span> <span class="unknown token" data-binding="">SciLean</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-5861" data-verso-hover="52">variable</span> 
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.1428" data-verso-hover="272">R</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-RCLike" data-verso-hover="337">RCLike</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="272">R</span><span class="unknown token" data-binding="">]</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.1434" data-verso-hover="328">X</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="328">X</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="272">R</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="328">X</span><span class="unknown token" data-binding="">]</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.1578" data-verso-hover="338">Y</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="338">Y</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="272">R</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="338">Y</span><span class="unknown token" data-binding="">]</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.1716" data-verso-hover="365">Z</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1716" data-verso-hover="365">Z</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="272">R</span> <span class="var token" data-binding="var-_uniq.1716" data-verso-hover="365">Z</span><span class="unknown token" data-binding="">]</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-6030">theorem</span> <span class="const token" data-binding="const-fwdFDeriv'.id_rule" data-verso-hover="366">fwdFDeriv'.id_rule</span> <span class="unknown token" data-binding="">:</span> 
    <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6078">fun</span> <span class="var token" data-binding="var-_uniq.866" data-verso-hover="278">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="138">X</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.866" data-verso-hover="278">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6096">fun</span> <span class="var token" data-binding="var-_uniq.904" data-verso-hover="364">xdx</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.904" data-verso-hover="364">xdx</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-8631768199335957718-6114-6116"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-6114" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8631768199335957718-6114-6116"><div class="tactic-state"><div class="goal"><table class="hypotheses"><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_2</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.432" data-verso-hover="367">inst✝²</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-RCLike" data-verso-hover="337">RCLike</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1434" data-verso-hover="138">X</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_1</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.438" data-verso-hover="280">inst✝¹</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="138">X</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.576" data-verso-hover="368">inst✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="138">X</span></td></tr></table><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="278">x</span> =&gt; <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="278">x</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1430" data-verso-hover="364">xdx</span> =&gt; <span class="var token" data-binding="var-_uniq.1430" data-verso-hover="364">xdx</span></span></span></div></div></span>
  <span class="tactic"><label for="tactic-state-7045764790157914542-6119-6136"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-6119" data-verso-hover="253">unfold</span> <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7045764790157914542-6119-6136"><div class="tactic-state"><div class="goal"><table class="hypotheses"><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_2</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.432" data-verso-hover="367">inst✝²</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-RCLike" data-verso-hover="337">RCLike</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1434" data-verso-hover="138">X</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_1</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.438" data-verso-hover="280">inst✝¹</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="138">X</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.576" data-verso-hover="368">inst✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="138">X</span></td></tr></table><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1426" data-verso-hover="364">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1432" data-verso-hover="278">x</span> =&gt; <span class="var token" data-binding="var-_uniq.1432" data-verso-hover="278">x</span>) <span class="var token" data-binding="var-_uniq.1426" data-verso-hover="364">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.1433" data-verso-hover="278">x</span>:=<span class="var token" data-binding="var-_uniq.1426" data-verso-hover="364">xdx</span>.1), <span class="var token" data-binding="var-_uniq.1433" data-verso-hover="278">x</span>) <span class="var token" data-binding="var-_uniq.1426" data-verso-hover="364">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1435" data-verso-hover="364">xdx</span> =&gt; <span class="var token" data-binding="var-_uniq.1435" data-verso-hover="364">xdx</span></span></span></div></div></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-6138-6147"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-6138">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-6138-6147"><div class="tactic-state">All goals completed! 🐙</div></span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-6149">theorem</span> <span class="const token" data-binding="const-fwdFDeriv'.comp_rule" data-verso-hover="369">fwdFDeriv'.comp_rule</span> 
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.1716" data-verso-hover="140">Z</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="141">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span><span class="unknown token" data-binding="">)</span> 
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1943" data-verso-hover="371">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1987" data-verso-hover="372">hg</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> 
    <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6289">fun</span> <span class="var token" data-binding="var-_uniq.2001" data-verso-hover="278">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="141">X</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span> <span class="var token" data-binding="var-_uniq.2001" data-verso-hover="278">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> 
    <span class="unknown token" data-binding="">=</span> 
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6323">fun</span> <span class="var token" data-binding="var-_uniq.2038" data-verso-hover="364">xdx</span> <span class="unknown token" data-binding="">=&gt;</span> 
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-6341" data-verso-hover="80">let</span> <span class="var token" data-binding="var-_uniq.2332" data-verso-hover="373">ydy</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span> <span class="var token" data-binding="var-_uniq.2038" data-verso-hover="364">xdx</span>
      <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span> <span class="var token" data-binding="var-_uniq.2332" data-verso-hover="373">ydy</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-9064809938972530357-6399-6401"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-6399" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-9064809938972530357-6399-6401"><div class="tactic-state"><div class="goal"><table class="hypotheses"><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_1</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1431" data-verso-hover="367">inst✝⁶</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-RCLike" data-verso-hover="337">RCLike</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1434" data-verso-hover="141">X</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_4</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1437" data-verso-hover="280">inst✝⁵</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="141">X</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1575" data-verso-hover="368">inst✝⁴</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="141">X</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_2</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1581" data-verso-hover="344">inst✝³</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1713" data-verso-hover="374">inst✝²</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1716" data-verso-hover="140">Z</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_3</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1719" data-verso-hover="375">inst✝¹</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1716" data-verso-hover="140">Z</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1851" data-verso-hover="376">inst✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1716" data-verso-hover="140">Z</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span></td><td class="colon">:</td><td class="type"><span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span> → <span class="var token" data-binding="var-_uniq.1716" data-verso-hover="140">Z</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span></td><td class="colon">:</td><td class="type"><span class="var token" data-binding="var-_uniq.1434" data-verso-hover="141">X</span> → <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1943" data-verso-hover="371">hf</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1987" data-verso-hover="372">hg</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span></td></tr></table><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4726" data-verso-hover="278">x</span> =&gt; <span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span> (<span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span> <span class="var token" data-binding="var-_uniq.4726" data-verso-hover="278">x</span>))<span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="364">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.4728" data-verso-hover="373">ydy</span> := <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="364">xdx</span>;
  <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span> <span class="var token" data-binding="var-_uniq.4728" data-verso-hover="373">ydy</span></span></span></div></div></span>
  <span class="tactic"><label for="tactic-state-6945202863601185833-6404-6421"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-6404" data-verso-hover="253">unfold</span> <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6945202863601185833-6404-6421"><div class="tactic-state"><div class="goal"><table class="hypotheses"><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_1</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1431" data-verso-hover="367">inst✝⁶</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-RCLike" data-verso-hover="337">RCLike</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1434" data-verso-hover="141">X</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_4</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1437" data-verso-hover="280">inst✝⁵</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="141">X</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1575" data-verso-hover="368">inst✝⁴</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="141">X</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_2</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1581" data-verso-hover="344">inst✝³</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1713" data-verso-hover="374">inst✝²</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1716" data-verso-hover="140">Z</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_3</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1719" data-verso-hover="375">inst✝¹</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1716" data-verso-hover="140">Z</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1851" data-verso-hover="376">inst✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1716" data-verso-hover="140">Z</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span></td><td class="colon">:</td><td class="type"><span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span> → <span class="var token" data-binding="var-_uniq.1716" data-verso-hover="140">Z</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span></td><td class="colon">:</td><td class="type"><span class="var token" data-binding="var-_uniq.1434" data-verso-hover="141">X</span> → <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="139">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1943" data-verso-hover="371">hf</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1987" data-verso-hover="372">hg</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="138">R</span> <span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span></td></tr></table><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4725" data-verso-hover="364">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4731" data-verso-hover="278">x</span> =&gt; <span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span> (<span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span> <span class="var token" data-binding="var-_uniq.4731" data-verso-hover="278">x</span>)) <span class="var token" data-binding="var-_uniq.4725" data-verso-hover="364">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.4732" data-verso-hover="278">x</span>:=<span class="var token" data-binding="var-_uniq.4725" data-verso-hover="364">xdx</span>.1), <span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span> (<span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span> <span class="var token" data-binding="var-_uniq.4732" data-verso-hover="278">x</span>)) <span class="var token" data-binding="var-_uniq.4725" data-verso-hover="364">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="364">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.4738" data-verso-hover="373">ydy</span> := (<span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="364">xdx</span>.1, (∂ <span class="var token" data-binding="var-_uniq.1859" data-verso-hover="339">g</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="364">xdx</span>.1) <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="364">xdx</span>.2);
  (<span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span> <span class="var token" data-binding="var-_uniq.4738" data-verso-hover="373">ydy</span>.1, (∂ <span class="var token" data-binding="var-_uniq.1855" data-verso-hover="370">f</span> <span class="var token" data-binding="var-_uniq.4738" data-verso-hover="373">ydy</span>.1) <span class="var token" data-binding="var-_uniq.4738" data-verso-hover="373">ydy</span>.2)</span></span></div></div></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-6423-6432"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-6423">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-6423-6432"><div class="tactic-state">All goals completed! 🐙</div></span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-6434">theorem</span> <span class="const token" data-binding="const-fwdFDeriv'.pi_rule" data-verso-hover="377">fwdFDeriv'.pi_rule</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-SciLean.IndexType" data-verso-hover="41">IndexType</span> <span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span><span class="unknown token" data-binding="">]</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="140">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="141">Y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5252" data-verso-hover="379">hf</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">∀</span> <span class="var token" data-binding="var-_uniq.5166" data-verso-hover="88">i</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="unknown token" data-binding="">·</span> <span class="var token" data-binding="var-_uniq.5166" data-verso-hover="88">i</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> 
    <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6564">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5267" data-verso-hover="278">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="140">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5269" data-verso-hover="88">i</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.5267" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.5269" data-verso-hover="88">i</span><span class="unknown token" data-binding="">)</span> 
    <span class="unknown token" data-binding="">=</span> 
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6606">fun</span> <span class="var token" data-binding="var-_uniq.5625" data-verso-hover="364">xdx</span> <span class="unknown token" data-binding="">=&gt;</span> 
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-6624" data-verso-hover="80">let</span> <span class="var token" data-binding="var-_uniq.5664" data-verso-hover="380">ydy</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6635">fun</span> <span class="var token" data-binding="var-_uniq.5630" data-verso-hover="88">i</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="unknown token" data-binding="">·</span> <span class="var token" data-binding="var-_uniq.5630" data-verso-hover="88">i</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.5625" data-verso-hover="364">xdx</span>
      <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6677">fun</span> <span class="var token" data-binding="var-_uniq.5671" data-verso-hover="88">i</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5664" data-verso-hover="380">ydy</span> <span class="var token" data-binding="var-_uniq.5671" data-verso-hover="88">i</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6697">fun</span> <span class="var token" data-binding="var-_uniq.5682" data-verso-hover="88">i</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5664" data-verso-hover="380">ydy</span> <span class="var token" data-binding="var-_uniq.5682" data-verso-hover="88">i</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-3628894206806866085-6720-6722"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-6720" data-verso-hover="69">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3628894206806866085-6720-6722"><div class="tactic-state"><div class="goal"><table class="hypotheses"><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_2</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.4730" data-verso-hover="367">inst✝⁵</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-RCLike" data-verso-hover="337">RCLike</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1434" data-verso-hover="140">X</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_3</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.4736" data-verso-hover="280">inst✝⁴</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="140">X</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.4874" data-verso-hover="368">inst✝³</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="140">X</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1578" data-verso-hover="141">Y</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_4</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.4880" data-verso-hover="344">inst✝²</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="141">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.5012" data-verso-hover="374">inst✝¹</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="141">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_1</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.5699" data-verso-hover="197">inst✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IndexType" data-verso-hover="41">IndexType</span> <span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span></td><td class="colon">:</td><td class="type"><span class="var token" data-binding="var-_uniq.1434" data-verso-hover="140">X</span> → <span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span> → <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="141">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.5252" data-verso-hover="379">hf</span></td><td class="colon">:</td><td class="type">∀ (<span class="var token" data-binding="var-_uniq.7566" data-verso-hover="88">i</span> : <span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span>), <span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7567" data-verso-hover="278">x</span> =&gt; <span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.7567" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.7566" data-verso-hover="88">i</span></td></tr></table><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7568" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.7569" data-verso-hover="88">i</span> =&gt; <span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.7568" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.7569" data-verso-hover="88">i</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7570" data-verso-hover="364">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.7573" data-verso-hover="380">ydy</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7571" data-verso-hover="88">i</span> =&gt; <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7572" data-verso-hover="278">x</span> =&gt; <span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.7572" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.7571" data-verso-hover="88">i</span>) <span class="var token" data-binding="var-_uniq.7570" data-verso-hover="364">xdx</span>;
  (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7579" data-verso-hover="88">i</span> =&gt; (<span class="var token" data-binding="var-_uniq.7573" data-verso-hover="380">ydy</span> <span class="var token" data-binding="var-_uniq.7579" data-verso-hover="88">i</span>).1, <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7581" data-verso-hover="88">i</span> =&gt; (<span class="var token" data-binding="var-_uniq.7573" data-verso-hover="380">ydy</span> <span class="var token" data-binding="var-_uniq.7581" data-verso-hover="88">i</span>).2)</span></span></div></div></span>
  <span class="tactic"><label for="tactic-state-13449643122862655836-6725-6742"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-6725" data-verso-hover="253">unfold</span> <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13449643122862655836-6725-6742"><div class="tactic-state"><div class="goal"><table class="hypotheses"><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_2</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.4730" data-verso-hover="367">inst✝⁵</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-RCLike" data-verso-hover="337">RCLike</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1434" data-verso-hover="140">X</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_3</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.4736" data-verso-hover="280">inst✝⁴</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="140">X</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.4874" data-verso-hover="368">inst✝³</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="140">X</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.1578" data-verso-hover="141">Y</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_4</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.4880" data-verso-hover="344">inst✝²</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="273">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="141">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.5012" data-verso-hover="374">inst✝¹</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="336">NormedSpace</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="141">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span></td><td class="colon">:</td><td class="type"><span class="sort token" data-binding="">Type u_1</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.5699" data-verso-hover="197">inst✝</span></td><td class="colon">:</td><td class="type"><span class="const token" data-binding="const-SciLean.IndexType" data-verso-hover="41">IndexType</span> <span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span></td><td class="colon">:</td><td class="type"><span class="var token" data-binding="var-_uniq.1434" data-verso-hover="140">X</span> → <span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span> → <span class="var token" data-binding="var-_uniq.1578" data-verso-hover="141">Y</span></td></tr><tr class="hypothesis"><td class="name"><span class="var token" data-binding="var-_uniq.5252" data-verso-hover="379">hf</span></td><td class="colon">:</td><td class="type">∀ (<span class="var token" data-binding="var-_uniq.7566" data-verso-hover="88">i</span> : <span class="var token" data-binding="var-_uniq.5153" data-verso-hover="138">I</span>), <span class="const token" data-binding="const-Differentiable" data-verso-hover="285">Differentiable</span> <span class="var token" data-binding="var-_uniq.1428" data-verso-hover="139">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7567" data-verso-hover="278">x</span> =&gt; <span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.7567" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.7566" data-verso-hover="88">i</span></td></tr></table><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7566" data-verso-hover="364">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7575" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.7576" data-verso-hover="88">i</span> =&gt; <span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.7575" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.7576" data-verso-hover="88">i</span>) <span class="var token" data-binding="var-_uniq.7566" data-verso-hover="364">xdx</span>.1, (∂ (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7579" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.7580" data-verso-hover="88">i</span> =&gt; <span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.7579" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.7580" data-verso-hover="88">i</span>) <span class="var token" data-binding="var-_uniq.7566" data-verso-hover="364">xdx</span>.1) <span class="var token" data-binding="var-_uniq.7566" data-verso-hover="364">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="72"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7581" data-verso-hover="364">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.7590" data-verso-hover="380">ydy</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7582" data-verso-hover="88">i</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7588" data-verso-hover="278">x</span> =&gt; <span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.7588" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.7582" data-verso-hover="88">i</span>) <span class="var token" data-binding="var-_uniq.7581" data-verso-hover="364">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.7589" data-verso-hover="278">x</span>:=<span class="var token" data-binding="var-_uniq.7581" data-verso-hover="364">xdx</span>.1), <span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.7589" data-verso-hover="278">x</span> <span class="var token" data-binding="var-_uniq.7582" data-verso-hover="88">i</span>) <span class="var token" data-binding="var-_uniq.7581" data-verso-hover="364">xdx</span>.2);
  (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7596" data-verso-hover="88">i</span> =&gt; (<span class="var token" data-binding="var-_uniq.7590" data-verso-hover="380">ydy</span> <span class="var token" data-binding="var-_uniq.7596" data-verso-hover="88">i</span>).1, <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.7598" data-verso-hover="88">i</span> =&gt; (<span class="var token" data-binding="var-_uniq.7590" data-verso-hover="380">ydy</span> <span class="var token" data-binding="var-_uniq.7598" data-verso-hover="88">i</span>).2)</span></span></div></div></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-6744-6770"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-6744" data-verso-hover="199">simp</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-SciLean.fderiv.pi_rule" data-verso-hover="381">fderiv.pi_rule</span> <span class="var token" data-binding="var-_uniq.5162" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.5252" data-verso-hover="379">hf</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-6744-6770"><div class="tactic-state">All goals completed! 🐙</div></span>
<span class="unknown token" data-binding=""></span></code><section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Lambda-Theorems--Exercises">
                Exercises</h3>
              <ol start="1">
                <li>
                  <p>
                    Write down the constant lambda theorems of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span></code></p>
                  </li>
                <li>
                  <p>
                    Write down the produce and projection lambda theorems of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span></code></p>
                  </li>
                <li>
                  <p>
                    Write down the apply lambda theorems of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span></code>. 
  Hint: You want to write it for a function <code>fun (f : I → X) =&gt; f i</code> where <code>I</code> has instance of <code>[IndexType I]</code> (probably only <code>[Fintype I]</code> is enough)</p>
                  </li>
                <li>
                  <p>
                    Write down the let lambda theorems of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="363">fwdFDeriv'</span></code>. 
  Pay attention the the use of let bindings on the right hand side. Careful use of let bindings is important for the efficiency of the resulting code. Also you do not want to differentiate <code>f</code> w.r.t. to <code>x</code> and <code>y</code> separetely but rather differentiate it w.r.t. <code>x</code> and <code>y</code> simultatinously.</p>
                  </li>
                </ol>
              </section>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Function-Theorems">
              Function Theorems</h2>
            <section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Function-Theorems--Simple-vs-Compositional-Form">
                Simple vs Compositional Form</h3>
              </section>
            <section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Function-Theorems--User-Defined-Functions">
                User Defined Functions</h3>
              </section>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Free-Variable-Theorems">
              Free Variable Theorems</h2>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Morphism-Theorems">
              Morphism Theorems</h2>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Advanced-Function-Theorems">
              Advanced Function Theorems</h2>
            <section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Advanced-Function-Theorems--Polymorphic-Functions">
                Polymorphic Functions</h3>
              </section>
            <section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Advanced-Function-Theorems--High-Order-Functions">
                High Order Functions</h3>
              </section>
            <section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Advanced-Function-Theorems--Recursive-Functions">
                Recursive Functions</h3>
              </section>
            </section>
          </section>
        </main></div>
    </body>
  </html>

