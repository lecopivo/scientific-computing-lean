<!DOCTYPE html>
<html>
  <head>
    <script>
      (function(){
  const {protocol:proto, host:hostName, pathname:path, search:srch, hash:hsh} = window.location;
  if (!(path.endsWith("/") || path.endsWith(".html"))) {
    window.location.replace(`${proto}//${hostName}${path}/${srch}${hsh}`);
  }
})()</script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Function Transformation</title><link rel="stylesheet" href="../../book.css">
    <script>
      
function saveCheckboxesInit() {
  for (checkbox of document.querySelectorAll('#toc input[type="checkbox"]')) {
    const value = localStorage.getItem(checkbox.id);

    // Treat the ToC toggle specially, because it should always default to
    // closed on mobile-width screens but respect user preference on desktop-width.
    if (checkbox.id === "toggle-toc" && window.matchMedia("(max-width: 700px)").matches) {
        checkbox.checked = false;
    } else if (value === "true") {
        checkbox.checked = true;
    } else if (value === "false") {
        checkbox.checked = false;
    } // if not found, do nothing

    checkbox.addEventListener("change", persistCheckbox);
  }
}

function persistCheckbox() {
  const value = this.checked; // in a handler, 'this' is the element with the handler on it
  const id = this.id;
  localStorage.setItem(this.id, value ? "true" : "false");
}

window.addEventListener("DOMContentLoaded", saveCheckboxesInit);
</script>
    <script>
      const __versoSiteRoot = "./../../"</script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <script src="../../static/katex/katex.min.js"></script>
    <script src="../../static/math.js"></script>
    <script src="../../static/print.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../-verso-js/popper.js"></script>
    <script src="../../-verso-js/tippy.js"></script>
    <link rel="stylesheet" href="../../static/colors.css">
    <link rel="stylesheet" href="../../static/theme.css">
    <link rel="stylesheet" href="../../static/print.css">
    <link rel="stylesheet" href="../../static/fonts/source-serif/source-serif-text.css">
    <link rel="stylesheet" href="../../static/fonts/source-code-pro/source-code-pro.css">
    <link rel="stylesheet" href="../../static/katex/katex.min.css">
    <link rel="stylesheet" href="../../-verso-css/tippy-border.css">
    <style>

.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
}

.hl.lean .keyword {
  font-weight : bold;
}

.hl.lean .var {
  font-style: italic;
  position: relative;
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}

.hl.lean a:hover {
  text-decoration: currentcolor underline solid;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 300;
  font-size: inherit;
}

.hl.lean .hover-info.messages {
  max-height: 10rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5rem 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5rem;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1rem;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0rem;
}

/*
@media (hover: hover) {
  .hl.lean .has-info:hover > .hover-container > .hover-info:not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .has-info:hover > .hover-container > .hover-info,
  .hl.lean .token:hover > .hover-container > .hover-info:not(.has-info *):not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .token:hover > .hover-container > .hover-info:not(.has-info *) {
    display: inline-block;
    position: absolute;
    top: 1rem;
    font-weight: normal;
    font-style: normal;
    width: min-content;
  }
}
*/

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
  white-space: pre-wrap;
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover, .hl.lean .token.typed:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: 0.1rem;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error {
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error pre {
    color: red;
}

.hl.lean .has-info.warning {
  text-decoration-color: #efd871;
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color: #efd871;
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: #efd871;
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #efd871;
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.info {
  text-decoration-color: blue;
}

@media (hover: hover) {
  .hl.lean .has-info.info:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.info {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.info {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: sans-serif;
  white-space: normal;
  max-width: 40rem;
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: monospace;
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  left: 2rem;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1rem;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
  z-index: 200;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: block;
}

/*
@media (hover: hover) {
  .hl.lean .tactic:hover > .tactic-toggle:not(:checked) ~ .tactic-state {
    display: block;
    position: absolute;
    left: 0;
    transform: translate(0.25rem, 0);
    z-index: 250;
  }
}
*/

.hl.lean .tactic > label {
  position: relative;
  transition: all 0.5s;
}

@media (hover: hover) {
  .hl.lean .tactic > label:hover {
    border-bottom: 1px dotted #bbbbbb;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  border-radius: 1rem;
  height: 0.25rem;
  vertical-align: middle;
  width: 0.6rem;
  margin-left: 0.1rem;
  margin-right: 0.1rem;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5rem;
}

.hl.lean .tactic-state summary {
  margin-left: -0.5rem;
}

.hl.lean .tactic-state details {
  padding-left: 0.5rem;
}

.hl.lean .case-label {
  display: block;
  position: relative;
}

.hl.lean .case-label input[type="checkbox"] {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .case-label:has(input[type="checkbox"])::before {
  width: 1rem;
  height: 1rem;
  display: inline-block;
  background-color: black;
  content: ' ';
  transition: ease 0.2s;
  margin-right: 0.7rem;
  clip-path: polygon(100% 0, 0 0, 50% 100%);
  width: 0.6rem;
  height: 0.6rem;
}

.hl.lean .case-label:has(input[type="checkbox"]:not(:checked))::before {
  transform: rotate(-90deg);
}

.hl.lean .case-label:has(input[type="checkbox"]) {

}

.hl.lean .case-label:has(input[type="checkbox"]:checked) {

}


.hl.lean .tactic-state .labeled-case > :not(:first-child) {
  max-height: 0px;
  display: block;
  overflow: hidden;
  transition: max-height 0.1s ease-in;
  margin-left: 0.5rem;
  margin-top: 0.1rem;
}

.hl.lean .labeled-case:has(.case-label input[type="checkbox"]:checked) > :not(:first-child) {
  max-height: 100%;
}


.hl.lean .tactic-state .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .tactic-state .goal-name {
  font-style: italic;
  font-family: monospace;
}

.hl.lean .tactic-state .hypotheses {
  display: table;
}

.hl.lean .tactic-state .hypothesis {
  display: table-row;
}

.hl.lean .tactic-state .hypothesis > * {
  display: table-cell;
}


.hl.lean .tactic-state .hypotheses .colon {
  text-align: center;
  min-width: 1rem;
}

.hl.lean .tactic-state .hypotheses .name {
  text-align: right;
}

.hl.lean .tactic-state .hypotheses .name,
.hl.lean .tactic-state .hypotheses .type,
.hl.lean .tactic-state .conclusion .type {
  font-family: monospace;
}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #efd871;
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}



.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

</style><style>
.namedocs {
  position: relative;
  border: solid 2px #99b3c0;
  background-color: #99b3c0;
  padding-left: 1px;
  padding-right: 1px;
  padding-bottom: 1px;
  padding-top: 1.5rem;
  margin-bottom: 1rem;
}

.namedocs .text {
  background-color: white;
  padding: 1.5rem;
  margin-top: 0.5rem;
}

.namedocs .text > pre {
  overflow-x: auto;
}

.namedocs .signature {
  font-family: var(--verso-code-font-family);
  font-size: larger;
  margin-top: 0 !important;
  margin-left: 1.5rem !important;
  margin-right: 1.5rem;
}

.namedocs .label {
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
  position: absolute;
  right: 0.5rem;
  top: 0.5rem;
}

/* Sticking content into the right margin is not good on narrow screens,
   so move the label to the left to make space for the permalink widget. */

@media screen and (max-width: 700px) {
  .namedocs:has(.permalink-widget.block) .label {
    right: 1.5rem;
  }
}

.namedocs h1 {
  font-size: inherit;
  font-weight: bold;
}

.namedocs > .text .constructor {
  padding-left: 0.5rem;
  padding-top: 0;
  padding-right: 0;
  padding-bottom: 0;
  margin-top: 0.5rem;
  margin-bottom: 1.5rem;
}

.namedocs > .text .constructor::before {
  content: '| ';
  display: block;
  font-family: var(--verso-code-font-family);
  font-weight: bold;
  float: left;
  width: 0.5rem;
  white-space: pre;
}

.namedocs > .text .constructor .name-and-type {
  padding-left: 0.5rem;
  float: left;
  margin-top: 0;
}
.namedocs > .text .constructor .docs {
  clear: both;
  padding-left: 1rem;
}


.namedocs .methods td, .namedocs .fields td {
  vertical-align: top;
}
.namedocs .inheritance {
  vertical-align: top;
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
}
.namedocs .inheritance ol {
  display: inline-block;
  margin: 0;
  padding: 0;
}
.namedocs .inheritance ol li {
  list-style-type: none;
  display: inline-block;
}
.namedocs .inheritance ol li::after {
  content: " > "
}
.namedocs .inheritance ol li:last-child::after {
  content: "";
}

.namedocs .extends {
  display: inline;
  margin: 0;
  padding: 0;
}

.namedocs .extends li {
  list-style-type: none;
  display: inline-block;
}

.namedocs .extends li label {
  padding-right: 1rem;
}

.namedocs .subdocs .name-and-type {
  font-size: 1rem;
  margin-left: 0;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs .subdocs .docs {
  margin-left: 1.5rem;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs:has(input[data-parent-idx]) [data-inherited-from] {
  transition-property: opacity, display;
  transition-duration: 0.4s;
  transition-behavior: allow-discrete;
  @starting-style { opacity: 0 !important; }
}
.namedocs:has(input[data-parent-idx="0"]) [data-inherited-from="0"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="0"]:checked) [data-inherited-from="0"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="0"]:checked):has(.inheritance[data-inherited-from="0"]:hover) [data-inherited-from]:not([data-inherited-from="0"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="1"]) [data-inherited-from="1"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="1"]:checked) [data-inherited-from="1"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="1"]:checked):has(.inheritance[data-inherited-from="1"]:hover) [data-inherited-from]:not([data-inherited-from="1"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="2"]) [data-inherited-from="2"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="2"]:checked) [data-inherited-from="2"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="2"]:checked):has(.inheritance[data-inherited-from="2"]:hover) [data-inherited-from]:not([data-inherited-from="2"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="3"]) [data-inherited-from="3"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="3"]:checked) [data-inherited-from="3"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="3"]:checked):has(.inheritance[data-inherited-from="3"]:hover) [data-inherited-from]:not([data-inherited-from="3"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="4"]) [data-inherited-from="4"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="4"]:checked) [data-inherited-from="4"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="4"]:checked):has(.inheritance[data-inherited-from="4"]:hover) [data-inherited-from]:not([data-inherited-from="4"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="5"]) [data-inherited-from="5"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="5"]:checked) [data-inherited-from="5"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="5"]:checked):has(.inheritance[data-inherited-from="5"]:hover) [data-inherited-from]:not([data-inherited-from="5"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="6"]) [data-inherited-from="6"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="6"]:checked) [data-inherited-from="6"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="6"]:checked):has(.inheritance[data-inherited-from="6"]:hover) [data-inherited-from]:not([data-inherited-from="6"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="7"]) [data-inherited-from="7"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="7"]:checked) [data-inherited-from="7"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="7"]:checked):has(.inheritance[data-inherited-from="7"]:hover) [data-inherited-from]:not([data-inherited-from="7"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="8"]) [data-inherited-from="8"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="8"]:checked) [data-inherited-from="8"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="8"]:checked):has(.inheritance[data-inherited-from="8"]:hover) [data-inherited-from]:not([data-inherited-from="8"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="9"]) [data-inherited-from="9"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="9"]:checked) [data-inherited-from="9"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="9"]:checked):has(.inheritance[data-inherited-from="9"]:hover) [data-inherited-from]:not([data-inherited-from="9"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="10"]) [data-inherited-from="10"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="10"]:checked) [data-inherited-from="10"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="10"]:checked):has(.inheritance[data-inherited-from="10"]:hover) [data-inherited-from]:not([data-inherited-from="10"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="11"]) [data-inherited-from="11"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="11"]:checked) [data-inherited-from="11"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="11"]:checked):has(.inheritance[data-inherited-from="11"]:hover) [data-inherited-from]:not([data-inherited-from="11"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="12"]) [data-inherited-from="12"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="12"]:checked) [data-inherited-from="12"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="12"]:checked):has(.inheritance[data-inherited-from="12"]:hover) [data-inherited-from]:not([data-inherited-from="12"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="13"]) [data-inherited-from="13"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="13"]:checked) [data-inherited-from="13"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="13"]:checked):has(.inheritance[data-inherited-from="13"]:hover) [data-inherited-from]:not([data-inherited-from="13"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="14"]) [data-inherited-from="14"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="14"]:checked) [data-inherited-from="14"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="14"]:checked):has(.inheritance[data-inherited-from="14"]:hover) [data-inherited-from]:not([data-inherited-from="14"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="15"]) [data-inherited-from="15"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="15"]:checked) [data-inherited-from="15"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="15"]:checked):has(.inheritance[data-inherited-from="15"]:hover) [data-inherited-from]:not([data-inherited-from="15"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="16"]) [data-inherited-from="16"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="16"]:checked) [data-inherited-from="16"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="16"]:checked):has(.inheritance[data-inherited-from="16"]:hover) [data-inherited-from]:not([data-inherited-from="16"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="17"]) [data-inherited-from="17"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="17"]:checked) [data-inherited-from="17"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="17"]:checked):has(.inheritance[data-inherited-from="17"]:hover) [data-inherited-from]:not([data-inherited-from="17"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="18"]) [data-inherited-from="18"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="18"]:checked) [data-inherited-from="18"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="18"]:checked):has(.inheritance[data-inherited-from="18"]:hover) [data-inherited-from]:not([data-inherited-from="18"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="19"]) [data-inherited-from="19"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="19"]:checked) [data-inherited-from="19"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="19"]:checked):has(.inheritance[data-inherited-from="19"]:hover) [data-inherited-from]:not([data-inherited-from="19"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="20"]) [data-inherited-from="20"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="20"]:checked) [data-inherited-from="20"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="20"]:checked):has(.inheritance[data-inherited-from="20"]:hover) [data-inherited-from]:not([data-inherited-from="20"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="21"]) [data-inherited-from="21"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="21"]:checked) [data-inherited-from="21"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="21"]:checked):has(.inheritance[data-inherited-from="21"]:hover) [data-inherited-from]:not([data-inherited-from="21"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="22"]) [data-inherited-from="22"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="22"]:checked) [data-inherited-from="22"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="22"]:checked):has(.inheritance[data-inherited-from="22"]:hover) [data-inherited-from]:not([data-inherited-from="22"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="23"]) [data-inherited-from="23"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="23"]:checked) [data-inherited-from="23"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="23"]:checked):has(.inheritance[data-inherited-from="23"]:hover) [data-inherited-from]:not([data-inherited-from="23"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="24"]) [data-inherited-from="24"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="24"]:checked) [data-inherited-from="24"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="24"]:checked):has(.inheritance[data-inherited-from="24"]:hover) [data-inherited-from]:not([data-inherited-from="24"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="25"]) [data-inherited-from="25"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="25"]:checked) [data-inherited-from="25"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="25"]:checked):has(.inheritance[data-inherited-from="25"]:hover) [data-inherited-from]:not([data-inherited-from="25"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="26"]) [data-inherited-from="26"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="26"]:checked) [data-inherited-from="26"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="26"]:checked):has(.inheritance[data-inherited-from="26"]:hover) [data-inherited-from]:not([data-inherited-from="26"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="27"]) [data-inherited-from="27"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="27"]:checked) [data-inherited-from="27"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="27"]:checked):has(.inheritance[data-inherited-from="27"]:hover) [data-inherited-from]:not([data-inherited-from="27"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="28"]) [data-inherited-from="28"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="28"]:checked) [data-inherited-from="28"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="28"]:checked):has(.inheritance[data-inherited-from="28"]:hover) [data-inherited-from]:not([data-inherited-from="28"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="29"]) [data-inherited-from="29"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="29"]:checked) [data-inherited-from="29"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="29"]:checked):has(.inheritance[data-inherited-from="29"]:hover) [data-inherited-from]:not([data-inherited-from="29"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="30"]) [data-inherited-from="30"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="30"]:checked) [data-inherited-from="30"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="30"]:checked):has(.inheritance[data-inherited-from="30"]:hover) [data-inherited-from]:not([data-inherited-from="30"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="31"]) [data-inherited-from="31"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="31"]:checked) [data-inherited-from="31"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="31"]:checked):has(.inheritance[data-inherited-from="31"]:hover) [data-inherited-from]:not([data-inherited-from="31"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="32"]) [data-inherited-from="32"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="32"]:checked) [data-inherited-from="32"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="32"]:checked):has(.inheritance[data-inherited-from="32"]:hover) [data-inherited-from]:not([data-inherited-from="32"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="33"]) [data-inherited-from="33"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="33"]:checked) [data-inherited-from="33"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="33"]:checked):has(.inheritance[data-inherited-from="33"]:hover) [data-inherited-from]:not([data-inherited-from="33"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="34"]) [data-inherited-from="34"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="34"]:checked) [data-inherited-from="34"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="34"]:checked):has(.inheritance[data-inherited-from="34"]:hover) [data-inherited-from]:not([data-inherited-from="34"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="35"]) [data-inherited-from="35"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="35"]:checked) [data-inherited-from="35"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="35"]:checked):has(.inheritance[data-inherited-from="35"]:hover) [data-inherited-from]:not([data-inherited-from="35"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="36"]) [data-inherited-from="36"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="36"]:checked) [data-inherited-from="36"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="36"]:checked):has(.inheritance[data-inherited-from="36"]:hover) [data-inherited-from]:not([data-inherited-from="36"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="37"]) [data-inherited-from="37"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="37"]:checked) [data-inherited-from="37"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="37"]:checked):has(.inheritance[data-inherited-from="37"]:hover) [data-inherited-from]:not([data-inherited-from="37"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="38"]) [data-inherited-from="38"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="38"]:checked) [data-inherited-from="38"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="38"]:checked):has(.inheritance[data-inherited-from="38"]:hover) [data-inherited-from]:not([data-inherited-from="38"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="39"]) [data-inherited-from="39"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="39"]:checked) [data-inherited-from="39"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="39"]:checked):has(.inheritance[data-inherited-from="39"]:hover) [data-inherited-from]:not([data-inherited-from="39"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="40"]) [data-inherited-from="40"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="40"]:checked) [data-inherited-from="40"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="40"]:checked):has(.inheritance[data-inherited-from="40"]:hover) [data-inherited-from]:not([data-inherited-from="40"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="41"]) [data-inherited-from="41"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="41"]:checked) [data-inherited-from="41"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="41"]:checked):has(.inheritance[data-inherited-from="41"]:hover) [data-inherited-from]:not([data-inherited-from="41"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="42"]) [data-inherited-from="42"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="42"]:checked) [data-inherited-from="42"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="42"]:checked):has(.inheritance[data-inherited-from="42"]:hover) [data-inherited-from]:not([data-inherited-from="42"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="43"]) [data-inherited-from="43"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="43"]:checked) [data-inherited-from="43"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="43"]:checked):has(.inheritance[data-inherited-from="43"]:hover) [data-inherited-from]:not([data-inherited-from="43"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="44"]) [data-inherited-from="44"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="44"]:checked) [data-inherited-from="44"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="44"]:checked):has(.inheritance[data-inherited-from="44"]:hover) [data-inherited-from]:not([data-inherited-from="44"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="45"]) [data-inherited-from="45"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="45"]:checked) [data-inherited-from="45"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="45"]:checked):has(.inheritance[data-inherited-from="45"]:hover) [data-inherited-from]:not([data-inherited-from="45"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="46"]) [data-inherited-from="46"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="46"]:checked) [data-inherited-from="46"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="46"]:checked):has(.inheritance[data-inherited-from="46"]:hover) [data-inherited-from]:not([data-inherited-from="46"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="47"]) [data-inherited-from="47"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="47"]:checked) [data-inherited-from="47"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="47"]:checked):has(.inheritance[data-inherited-from="47"]:hover) [data-inherited-from]:not([data-inherited-from="47"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="48"]) [data-inherited-from="48"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="48"]:checked) [data-inherited-from="48"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="48"]:checked):has(.inheritance[data-inherited-from="48"]:hover) [data-inherited-from]:not([data-inherited-from="48"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="49"]) [data-inherited-from="49"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="49"]:checked) [data-inherited-from="49"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="49"]:checked):has(.inheritance[data-inherited-from="49"]:hover) [data-inherited-from]:not([data-inherited-from="49"]) {
  opacity: 0.5;
}
</style><style>.solution {
  padding: 1.5em;
  border: 1px solid #98B2C0;
  border-radius: 0.5em;
  margin-bottom: 0.75em;
  margin-top: 0.75em;
  clear: both; /* Don't overlap margin notes with solutions */
}
.solution p:last-child {margin-bottom:0;}
.solution .description::before {
  content: "";
}
.solution[open] .description {
  margin-bottom: 1em;
}
.solution .description {
  font-style: italic;
  font-family: var(--verso-structure-font-family);
}
.solution .hl.lean.block {
  overflow-x: auto;
}
</style><style>
div.TODO {
  border: 5px solid red;
  position: relative;
}
div.TODO::before {
  content: "TODO";
  position: absolute;
  top: 0;
  right: 0;
  color: red;
  font-size: large;
  font-weight: bold;
  transform: rotate(-90deg) translate(-2em);
}
</style><style>.foldable {
  padding: 1.5em;
  border: 1px solid #98B2C0;
  border-radius: 0.5em;
  margin-bottom: 0.75em;
  margin-top: 0.75em;
  clear: both; /* Don't overlap margin notes with foldables */
}
.foldable p:last-child {margin-bottom:0;}
.foldable .description::before {
  content: "";
}
.foldable[open] .description {
  margin-bottom: 1em;
}
.foldable .description {
  font-style: italic;
  font-family: var(--verso-structure-font-family);
}
.foldable .hl.lean.block {
  overflow-x: auto;
}
</style><script>
      
window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    let siteRoot = typeof __versoSiteRoot !== 'undefined' ? __versoSiteRoot : "/";
    fetch(siteRoot + "-verso-docs.json").then((resp) => resp.json()).then((versoDocData) => {

      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        theme: "lean",
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        ignoreAttributes: true,
        onShow(inst) {
          if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          content.className = "hl lean";
          content.style.display = "block";
          content.style.maxHeight = "300px";
          content.style.overflowY = "auto";
          content.style.overflowX = "hidden";
          const hoverId = tgt.dataset.versoHover;
          const hoverInfo = tgt.querySelector(".hover-info");
          if (hoverId) { // Docstrings from the table
            // TODO stop doing an implicit conversion from string to number here
            let data = versoDocData[hoverId];
            if (data) {
              const info = document.createElement("span");
              info.className = "hover-info";
              info.style.display = "block";
              info.innerHTML = data;
              content.appendChild(info);
              /* Render docstrings - TODO server-side */
              if ('undefined' !== typeof marked) {
                  for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                      const str = d.innerText;
                      const html = marked.parse(str);
                      const rendered = document.createElement("div");
                      rendered.classList.add("docstring");
                      rendered.innerHTML = html;
                      d.parentNode.replaceChild(rendered, d);
                  }
              }
            } else {
              content.innerHTML = "Failed to load doc ID: " + hoverId;
            }
          } else if (hoverInfo) { // The inline info, still used for compiler messages
            content.appendChild(hoverInfo.cloneNode(true));
          }
          return content;
        }
      };

      const addTippy = (selector, props) => {
        tippy(selector, Object.assign({}, defaultTippyProps, props));
      };
      addTippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token', {theme: 'lean'});
      addTippy('.hl.lean .has-info.warning', {theme: 'warning message'});
      addTippy('.hl.lean .has-info.info', {theme: 'info message'});
      addTippy('.hl.lean .has-info.error', {theme: 'error message'});

      tippy('.hl.lean .tactic', {
        allowHtml: true,
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        maxWidth: "none",
        onShow(inst) {
          const toggle = inst.reference.querySelector("input.tactic-toggle");
          if (toggle && toggle.checked) {
            return false;
          }
          if (blockedByTippy(inst.reference)) { return false; }
        },
        theme: "tactic",
        placement: 'bottom-start',
        content (tgt) {
          const content = document.createElement("span");
          const state = tgt.querySelector(".tactic-state").cloneNode(true);
          state.style.display = "block";
          content.appendChild(state);
          content.style.display = "block";
          content.className = "hl lean popup";
          return content;
        }
      });
  });
}
</script>
    </head>
  <body>
    <label for="toggle-toc" id="toggle-toc-click"><span class="line line1"></span><span class="line line2"></span><span class="line line3"></span></label><div class="with-toc">
      <div class="toc-backdrop" onclick="document.getElementById('toggle-toc-click')?.click()"></div>
      <nav id="toc">
        <input type="checkbox" id="toggle-toc" checked="checked"><div class="first">
          <a href="../../" id="logo"><img src="../../static/lean_logo.svg"></a><nav id="local-buttons">
            <a class="local-button active" href="../Automatic-Differentiation/#Scientific-Computing-in-Lean--Differentiation--Automatic-Differentiation" rel="prev" title="2.2. Automatic Differentiation"><span class="arrow">←</span><span class="where">Prev</span></a><a class="local-button active" href="../#Scientific-Computing-in-Lean--Differentiation" title="2. Differentiation"><span class="arrow">↑</span><span class="where">Up</span></a><a class="local-button active" href="../../Miscellaneous/#Scientific-Computing-in-Lean--Miscellaneous" rel="next" title="3. Miscellaneous"><span class="where">Next</span><span class="arrow">→</span></a></nav>
          <div class="split-tocs">
            <div class="split-toc book">
              <div class="title">
                <label for="--verso-manual-toc-----bookRoot" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-----bookRoot"></label><span class=""><a href="../../">Scientific Computing in Lean</a></span></div>
              <table><tr class="numbered"><td class="num">1.</td><td><a href="../../Working-with-Arrays/#Scientific-Computing-in-Lean--Working-with-Arrays">Working with Arrays</a></td></tr><tr class="current numbered"><td class="num">2.</td><td><a href="../#Scientific-Computing-in-Lean--Differentiation">Differentiation</a></td></tr><tr class="numbered"><td class="num">3.</td><td><a href="../../Miscellaneous/#Scientific-Computing-in-Lean--Miscellaneous">Miscellaneous</a></td></tr><tr class="numbered"><td class="num">4.</td><td><a href="../../Examples/#Scientific-Computing-in-Lean--Examples">Examples</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-Scientific-Computing-in-Lean--Differentiation" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-Scientific-Computing-in-Lean--Differentiation"></label><span class="number">2.</span> <span class=""><a href="../#Scientific-Computing-in-Lean--Differentiation">Differentiation</a></span></div>
              <table><tr class="numbered"><td class="num">2.1.</td><td><a href="../Symbolic-Differentiation/#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation">Symbolic Differentiation</a></td></tr><tr class="numbered"><td class="num">2.2.</td><td><a href="../Automatic-Differentiation/#Scientific-Computing-in-Lean--Differentiation--Automatic-Differentiation">Automatic Differentiation</a></td></tr><tr class="current numbered"><td class="num">2.3.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Function-Transformation">Function Transformation</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-Scientific-Computing-in-Lean--Differentiation--Function-Transformation" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-Scientific-Computing-in-Lean--Differentiation--Function-Transformation" checked="checked"></label><span class="number">2.3.</span> <span class="current"><a href="#Scientific-Computing-in-Lean--Differentiation--Function-Transformation">Function Transformation</a></span></div>
              <table><tr class="numbered"><td class="num">2.3.1.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Implementing-Forward-Mode-AD">Implementing Forward Mode AD</a></td></tr><tr class="numbered"><td class="num">2.3.2.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Lambda-Theorems">Lambda Theorems</a></td></tr><tr class="numbered"><td class="num">2.3.3.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Function-Theorems">Function Theorems</a></td></tr><tr class="numbered"><td class="num">2.3.4.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--User-Defined-Functions">User Defined Functions</a></td></tr><tr class="numbered"><td class="num">2.3.5.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Free-Variable-Theorems">Free Variable Theorems</a></td></tr><tr class="numbered"><td class="num">2.3.6.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Morphism-Theorems">Morphism Theorems</a></td></tr><tr class="numbered"><td class="num">2.3.7.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Compositional-vs-Simple-Form">Compositional vs Simple Form</a></td></tr><tr class="numbered"><td class="num">2.3.8.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Function-Transformation--High-Order-Functions">High Order Functions</a></td></tr></table></div>
            </div>
          </div>
        <div class="last"></div>
        </nav>
      <main><section>
          <h1>
            2.3. Function Transformation</h1>
          <p>
            In this chapter we will look under the lid of the tactic <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="">fun_trans</span></code>, a tactic for general function transformation. Explain the main idea behind it, how to define your own function transformations and how does it work internally.</p>
          <p>
            So far we have encoutered couple of function transfomations <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fderiv" data-verso-hover="176">fderiv</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.fwdFDeriv" data-verso-hover="299">fwdFDeriv</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.revFDeriv" data-verso-hover="311">revFDeriv</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-adjoint" data-verso-hover="208">adjoint</span></code>. In general, function transformation should be a higher order function <code>F</code> taking a function and producing a function that should satisfy</p>
          <p>
            $$F(f \circ g) = F(f) \circ F(g)
$$</p>
          <p>
            where the composition \( \circ \) should be some kind of generalized composition.</p>
          <p>
            Examples of composition rules for function transformations we have see so far</p>
          <pre>      (∂ (f ∘ g) x dx) = (∂ f (g x) (∂ g x dx))

     (∂&gt; (f ∘ g) x dx) = let (y,dy) := ∂&gt; g x dx
                         (∂&gt; f y dy)

        (&lt;∂ (f ∘ g) x) = let (y,dg) := &lt;∂ g x;
                         let (z,df) := &lt;∂ f y;
                         (z, dg ∘ df)

     adjoint ℝ (A ∘ B) = adjoint ℝ B ∘ adjoint ℝ A
</pre><p>
            Also <code>F</code> should preserve identity</p>
          <p>
            $$F(\text{id}) = \text{id}
$$</p>
          <p>
            where \( \text{id} \) is some generalized notion of identity function</p>
          <p>
            Examples of identity rules for function transformations we have see so far</p>
          <pre>  (fderiv ℝ (fun x : ℝ =&gt; x)) = (fun _ =&gt; fun dx =&gt;L[ℝ] dx)

        (∂&gt; (fun x : ℝ =&gt; x)) = fun x dx =&gt; (x,dx)

        (&lt;∂ (fun x : ℝ =&gt; x)) = fun x =&gt; (x, fun dx =&gt; dx)

 (adjoint ℝ (fun x : ℝ =&gt; x)) = fun x =&gt; x
</pre><section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Implementing-Forward-Mode-AD">
              2.3.1. Implementing Forward Mode AD</h2>
            <p>
              Let's demonstrate <code>fun_trans</code> capability by defining a slight variant of forward mode derivative</p>
            <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.noncomputable-2513">noncomputable</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-2527">def</span> <span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312" id="fwdFDeriv___">fwdFDeriv'</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> <span class="unknown token" data-binding="">:=</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-2577">fun</span> <span class="var token" data-binding="var-_uniq.406" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.406" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-fderiv" data-verso-hover="176">fderiv</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.406" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span> <span class="var token" data-binding="var-_uniq.406" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
              The only difference is that <code class="hl lean inline" data-lean-context="examples"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></code> is uncurried version of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.fwdFDeriv" data-verso-hover="299">fwdFDeriv</span></code>.</p>
            <p>
              My marking the definition with <code>@[fun_trans]</code> attribute we let Lean know that it is a function transformation. For <code>fun_trans</code> to work properly with this newly defined function transformation we have to state its transformation rules/theorems. There are couple types</p>
            <ol start="1">
              <li>
                <p>
                  Lambda theorems.
  Theorems about basic lambda terms like indentity <code>fun x =&gt; x</code>, constant <code>fun x =&gt; y</code>, composition <code>fun x =&gt; f (g x)</code> and few more.</p>
                </li>
              <li>
                <p>
                  Function theorems.
  Theorems about functions like addition, multiplication etc.</p>
                </li>
              <li>
                <p>
                  Free variable theorems.
  These theorems usually state a transformation rule under some special condition. Like derivative of linear function is the function itself.</p>
                </li>
              <li>
                <p>
                  Morphism theorems.
  Theorems about bundled morphisms. These are very special theorems that dealing with bundled morphism  i.e. functions satisfying certain property like <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-SciLean.«termFun_:_=>L[_]_»-3612">fun</span> <span class="var token" data-binding="var-_uniq.2140" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">=&gt;L[</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">]</span> <span class="typed token" data-binding="" data-verso-hover="177">2</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.2140" data-verso-hover="177">x</span></code> which is a continuous linear function.</p>
                </li>
              </ol>
            <p>
              We will demonstrate</p>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Lambda-Theorems">
              2.3.2. Lambda Theorems</h2>
            <p>
              The tactic <code>fun_trans</code> transforms a complicated functions by first decomposing them into a sequence of function compositions and then transforms each of those function separetely. For example when we want to transform function <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-3953">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3602" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="177">2</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.3602" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.3602" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">)</span></code> then <code>fun_trans</code> effectivelly rewrites it as</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-4039">example</span> <span class="unknown token" data-binding="">:</span>
  <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4052">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="177">2</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">=</span>
  <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4091">fun</span> <span class="var token" data-binding="var-_uniq.901" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.901" data-verso-hover="177">x</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">∘</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4110">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1582" data-verso-hover="177">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.1583" data-verso-hover="177">y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.1582" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.1583" data-verso-hover="177">y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">∘</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4135">fun</span> <span class="var token" data-binding="var-_uniq.970" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="177">2</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.970" data-verso-hover="177">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.970" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-117128269356769272-4156-4158"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-4156" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-117128269356769272-4156-4158"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁶</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.279" data-verso-hover="318">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.390" data-verso-hover="319">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3308" data-verso-hover="177">x</span> =&gt; (2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.3308" data-verso-hover="177">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.3308" data-verso-hover="177">x</span>)<span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> =
  </span>(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3355" data-verso-hover="177">x</span> =&gt; <span class="var token" data-binding="var-_uniq.3355" data-verso-hover="177">x</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2)<span class="const token" data-binding="const-Function.comp" data-verso-hover="302"> ∘
    </span>(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3364" data-verso-hover="181">x</span> =&gt;
        <span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.3364" data-verso-hover="181">x</span> <span class="keyword token" data-binding="">with</span>
        | (<span class="var token" data-binding="var-_uniq.3378" data-verso-hover="177">x</span>, <span class="var token" data-binding="var-_uniq.3379" data-verso-hover="177">y</span>) =&gt; <span class="var token" data-binding="var-_uniq.3367" data-verso-hover="177">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.3368" data-verso-hover="177">y</span>)<span class="const token" data-binding="const-Function.comp" data-verso-hover="302"> ∘
      </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3385" data-verso-hover="177">x</span> =&gt; (2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.3385" data-verso-hover="177">x</span>, <span class="var token" data-binding="var-_uniq.3385" data-verso-hover="177">x</span>)</span></span></span></span></span> <span class="tactic"><label for="tactic-state-7-4159-4162"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticRfl-4159" data-verso-hover="215">rfl</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-4159-4162"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              Therefore <code>fun_trans</code> needs to know how to handle transfoming composition but also to transform <code>(fun x =&gt; (2*x,x))</code> it ineeds to know how to transform pairing of two functions <code>fun x =&gt; 2*x</code> and <code>fun x =&gt; x</code>.</p>
            <p>
              Lambda theorems are responsible for reducing the problem of transforming function like <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-4473">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4545" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="177">2</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.4545" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.4545" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">)</span></code> into transformation of all the elementary functions <code>(fun x =&gt; x^2)</code>, <code>(fun (x,y) =&gt; x+y)</code> and <code>(fun x =&gt; 2*x)</code>. Those are handled by function theorems and we will talk about those a bit later.</p>
            <p>
              There are six basic lambda theorems saying how lambda terms are transformed</p>
            <ol start="1">
              <li>
                <p>
                  Identity rule for transforming <code>fun (x : X) =&gt; x</code></p>
                </li>
              <li>
                <p>
                  Constant rule for transforming <code>fun (x : X) =&gt; y</code></p>
                </li>
              <li>
                <p>
                  Composition rule for transforming <code>fun (x : X) =&gt; f (g x)</code></p>
                </li>
              <li>
                <p>
                  Let rule for transforming <code>fun (x : X) =&gt; let y := g x; f x y</code></p>
                </li>
              <li>
                <p>
                  Apply rule for transforming <code>fun (f : X → Y) =&gt; f x</code></p>
                </li>
              <li>
                <p>
                  Pi rule for transforming <code>fun (x : X) (y : Y) =&gt; f x y</code></p>
                </li>
              </ol>
            <p>
              There are also three theorems about product type which technically speaking fall under the category of "function theorems" but they are so fundamental that we list them here</p>
            <ol start="7">
              <li>
                <p>
                  Product rule for transforming <code>fun (x : X) =&gt; (f x, g x)</code></p>
                </li>
              <li>
                <p>
                  First projection rule for transforming <code>fun (xy : X×Y) =&gt; xy.1</code></p>
                </li>
              <li>
                <p>
                  Second projection rule for transforming <code>fun (xy : X×Y) =&gt; xy.2</code></p>
                </li>
              </ol>
            <p>
              The collection of these theorems allows <code>fun_trans</code> to transform any complicated lambda expression if it can transform all the atomic functions in the lambda expression.</p>
            <p>
              Let us give an example of few lambda theorems for <code class="hl lean inline" data-lean-context="examples"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></code></p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-5752">theorem</span> <span class="const token" data-binding="const-fwdFDeriv'.id_rule" data-verso-hover="320" id="fwdFDeriv______pi_rule">fwdFDeriv'.id_rule</span> <span class="unknown token" data-binding="">:</span>
    <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-5799">fun</span> <span class="var token" data-binding="var-_uniq.401" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.401" data-verso-hover="207">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-5817">fun</span> <span class="var token" data-binding="var-_uniq.454" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.454" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-8904376876598179904-5835-5837"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-5835" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8904376876598179904-5835-5837"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2236" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.2236" data-verso-hover="207">x</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2238" data-verso-hover="313">xdx</span> =&gt; <span class="var token" data-binding="var-_uniq.2238" data-verso-hover="313">xdx</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-13099563537333796925-5840-5857"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-5840" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13099563537333796925-5840-5857"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2234" data-verso-hover="313">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="207">x</span>) <span class="var token" data-binding="var-_uniq.2234" data-verso-hover="313">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.2241" data-verso-hover="207">x</span>:=<span class="var token" data-binding="var-_uniq.2234" data-verso-hover="313">xdx</span>.1), <span class="var token" data-binding="var-_uniq.2241" data-verso-hover="207">x</span>) <span class="var token" data-binding="var-_uniq.2234" data-verso-hover="313">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2243" data-verso-hover="313">xdx</span> =&gt; <span class="var token" data-binding="var-_uniq.2243" data-verso-hover="313">xdx</span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-5859-5868"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-5859">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-5859-5868"><span class="tactic-state">All goals completed! 🐙</span></span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-5870">theorem</span> <span class="const token" data-binding="const-fwdFDeriv'.comp_rule" data-verso-hover="321" id="fwdFDeriv______pi_rule">fwdFDeriv'.comp_rule</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.2509" data-verso-hover="36">Z</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3299" data-verso-hover="323">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3588" data-verso-hover="324">hg</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6007">fun</span> <span class="var token" data-binding="var-_uniq.3599" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.3599" data-verso-hover="207">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6039">fun</span> <span class="var token" data-binding="var-_uniq.3670" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">=&gt;</span>
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-6056" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.4009" data-verso-hover="325">ydy</span> <span class="unknown token" data-binding="">:=</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.3670" data-verso-hover="313">xdx</span>
      <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span> <span class="var token" data-binding="var-_uniq.4009" data-verso-hover="325">ydy</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-17813915994563186372-6114-6116"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-6114" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-17813915994563186372-6114-6116"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2238" data-verso-hover="314">inst✝⁶</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2243" data-verso-hover="209">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2391" data-verso-hover="316">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2396" data-verso-hover="291">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2507" data-verso-hover="317">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2509" data-verso-hover="36">Z</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2512" data-verso-hover="318">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2509" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2623" data-verso-hover="319">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2509" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span> → <span class="var token" data-binding="var-_uniq.2509" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3299" data-verso-hover="323">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3588" data-verso-hover="324">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span> (<span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="207">x</span>))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.19226" data-verso-hover="313">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.19227" data-verso-hover="325">ydy</span> := <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.19226" data-verso-hover="313">xdx</span>;
  <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span> <span class="var token" data-binding="var-_uniq.19227" data-verso-hover="325">ydy</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-5787256608529981129-6119-6136"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-6119" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5787256608529981129-6119-6136"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2238" data-verso-hover="314">inst✝⁶</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2243" data-verso-hover="209">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2391" data-verso-hover="316">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2396" data-verso-hover="291">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2507" data-verso-hover="317">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2509" data-verso-hover="36">Z</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2512" data-verso-hover="318">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2509" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2623" data-verso-hover="319">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2509" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span> → <span class="var token" data-binding="var-_uniq.2509" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3299" data-verso-hover="323">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3588" data-verso-hover="324">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.19224" data-verso-hover="313">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span> (<span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="207">x</span>)) <span class="var token" data-binding="var-_uniq.19224" data-verso-hover="313">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.19231" data-verso-hover="207">x</span>:=<span class="var token" data-binding="var-_uniq.19224" data-verso-hover="313">xdx</span>.1), <span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span> (<span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.19231" data-verso-hover="207">x</span>)) <span class="var token" data-binding="var-_uniq.19224" data-verso-hover="313">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.19232" data-verso-hover="313">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.19237" data-verso-hover="325">ydy</span> := (<span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.19232" data-verso-hover="313">xdx</span>.1, (∂ <span class="var token" data-binding="var-_uniq.2631" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.19232" data-verso-hover="313">xdx</span>.1) <span class="var token" data-binding="var-_uniq.19232" data-verso-hover="313">xdx</span>.2);
  (<span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span> <span class="var token" data-binding="var-_uniq.19237" data-verso-hover="325">ydy</span>.1, (∂ <span class="var token" data-binding="var-_uniq.2627" data-verso-hover="322">f</span> <span class="var token" data-binding="var-_uniq.19237" data-verso-hover="325">ydy</span>.1) <span class="var token" data-binding="var-_uniq.19237" data-verso-hover="325">ydy</span>.2)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-6138-6147"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-6138">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-6138-6147"><span class="tactic-state">All goals completed! 🐙</span></span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-6149">theorem</span> <span class="const token" data-binding="const-fwdFDeriv'.pi_rule" data-verso-hover="326" id="fwdFDeriv______pi_rule">fwdFDeriv'.pi_rule</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-SciLean.IndexType" data-verso-hover="38">IndexType</span> <span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span><span class="unknown token" data-binding="">]</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.20299" data-verso-hover="328">hf</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">∀</span> <span class="var token" data-binding="var-_uniq.19629" data-verso-hover="86">i</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="unknown token" data-binding="">·</span> <span class="var token" data-binding="var-_uniq.19629" data-verso-hover="86">i</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6278">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.20311" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.20313" data-verso-hover="86">i</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="var token" data-binding="var-_uniq.20311" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.20313" data-verso-hover="86">i</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6318">fun</span> <span class="var token" data-binding="var-_uniq.20756" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">=&gt;</span>
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-6335" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.20804" data-verso-hover="329">ydy</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6346">fun</span> <span class="var token" data-binding="var-_uniq.20761" data-verso-hover="86">i</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="unknown token" data-binding="">·</span> <span class="var token" data-binding="var-_uniq.20761" data-verso-hover="86">i</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.20756" data-verso-hover="313">xdx</span>
      <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6388">fun</span> <span class="var token" data-binding="var-_uniq.20811" data-verso-hover="86">i</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.20804" data-verso-hover="329">ydy</span> <span class="var token" data-binding="var-_uniq.20811" data-verso-hover="86">i</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6408">fun</span> <span class="var token" data-binding="var-_uniq.20820" data-verso-hover="86">i</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.20804" data-verso-hover="329">ydy</span> <span class="var token" data-binding="var-_uniq.20820" data-verso-hover="86">i</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-14468320941097245390-6431-6433"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-6431" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-14468320941097245390-6431-6433"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19228" data-verso-hover="314">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19233" data-verso-hover="209">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19381" data-verso-hover="316">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19386" data-verso-hover="291">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19497" data-verso-hover="317">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20832" data-verso-hover="159">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.IndexType" data-verso-hover="38">IndexType</span> <span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span> → <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20299" data-verso-hover="328">hf</span></span><span class="colon">:</span><span class="type">∀ (<span class="var token" data-binding="var-_uniq.28983" data-verso-hover="86">i</span> : <span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span>), <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28984" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="var token" data-binding="var-_uniq.28984" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.28983" data-verso-hover="86">i</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28985" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.28986" data-verso-hover="86">i</span> =&gt; <span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="var token" data-binding="var-_uniq.28985" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.28986" data-verso-hover="86">i</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28987" data-verso-hover="313">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.28990" data-verso-hover="329">ydy</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28988" data-verso-hover="86">i</span> =&gt; <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28989" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="var token" data-binding="var-_uniq.28989" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.28988" data-verso-hover="86">i</span>) <span class="var token" data-binding="var-_uniq.28987" data-verso-hover="313">xdx</span>;
  (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28996" data-verso-hover="86">i</span> =&gt; (<span class="var token" data-binding="var-_uniq.28990" data-verso-hover="329">ydy</span> <span class="var token" data-binding="var-_uniq.28996" data-verso-hover="86">i</span>).1, <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28998" data-verso-hover="86">i</span> =&gt; (<span class="var token" data-binding="var-_uniq.28990" data-verso-hover="329">ydy</span> <span class="var token" data-binding="var-_uniq.28998" data-verso-hover="86">i</span>).2)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-9821390984139130200-6436-6453"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-6436" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-9821390984139130200-6436-6453"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19228" data-verso-hover="314">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19233" data-verso-hover="209">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19381" data-verso-hover="316">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19386" data-verso-hover="291">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19497" data-verso-hover="317">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20832" data-verso-hover="159">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.IndexType" data-verso-hover="38">IndexType</span> <span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span> → <span class="var token" data-binding="var-_uniq.2393" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20299" data-verso-hover="328">hf</span></span><span class="colon">:</span><span class="type">∀ (<span class="var token" data-binding="var-_uniq.28983" data-verso-hover="86">i</span> : <span class="var token" data-binding="var-_uniq.19616" data-verso-hover="36">I</span>), <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2235" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28984" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="var token" data-binding="var-_uniq.28984" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.28983" data-verso-hover="86">i</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28983" data-verso-hover="313">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28992" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.28993" data-verso-hover="86">i</span> =&gt; <span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="var token" data-binding="var-_uniq.28992" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.28993" data-verso-hover="86">i</span>) <span class="var token" data-binding="var-_uniq.28983" data-verso-hover="313">xdx</span>.1, (∂ (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28996" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.28997" data-verso-hover="86">i</span> =&gt; <span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="var token" data-binding="var-_uniq.28996" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.28997" data-verso-hover="86">i</span>) <span class="var token" data-binding="var-_uniq.28983" data-verso-hover="313">xdx</span>.1) <span class="var token" data-binding="var-_uniq.28983" data-verso-hover="313">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28998" data-verso-hover="313">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.29007" data-verso-hover="329">ydy</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.28999" data-verso-hover="86">i</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.29005" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="var token" data-binding="var-_uniq.29005" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.28999" data-verso-hover="86">i</span>) <span class="var token" data-binding="var-_uniq.28998" data-verso-hover="313">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.29006" data-verso-hover="207">x</span>:=<span class="var token" data-binding="var-_uniq.28998" data-verso-hover="313">xdx</span>.1), <span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="var token" data-binding="var-_uniq.29006" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.28999" data-verso-hover="86">i</span>) <span class="var token" data-binding="var-_uniq.28998" data-verso-hover="313">xdx</span>.2);
  (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.29013" data-verso-hover="86">i</span> =&gt; (<span class="var token" data-binding="var-_uniq.29007" data-verso-hover="329">ydy</span> <span class="var token" data-binding="var-_uniq.29013" data-verso-hover="86">i</span>).1, <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.29015" data-verso-hover="86">i</span> =&gt; (<span class="var token" data-binding="var-_uniq.29007" data-verso-hover="329">ydy</span> <span class="var token" data-binding="var-_uniq.29015" data-verso-hover="86">i</span>).2)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-6455-6481"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-6455" data-verso-hover="204">simp</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-SciLean.fderiv.pi_rule" data-verso-hover="330">fderiv.pi_rule</span> <span class="var token" data-binding="var-_uniq.19625" data-verso-hover="327">f</span> <span class="var token" data-binding="var-_uniq.20299" data-verso-hover="328">hf</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-6455-6481"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Lambda-Theorems--Exercises">
                2.3.2.1. Exercises</h3>
              <ol start="1">
                <li>
                  <p>
                    Write down the constant lambda theorems of <code class="hl lean inline" data-lean-context="examples"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></code></p>
                  </li>
                </ol>
              <details class="solution"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-6611">theorem</span> <span class="const token" data-binding="const-fwdFDeriv'.const_rule" data-verso-hover="331" id="fwdFDeriv______const_rule">fwdFDeriv'.const_rule</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.392" data-verso-hover="297">y</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
  <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6667">fun</span> <span class="var token" data-binding="var-_uniq.403" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.392" data-verso-hover="297">y</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">=</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-6689">fun</span> <span class="unknown token" data-binding="">_</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.392" data-verso-hover="297">y</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="297">0</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-11744645440197106502-6708-6710"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-6708" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-11744645440197106502-6708-6710"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.392" data-verso-hover="297">y</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2964" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.392" data-verso-hover="297">y</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2965" data-verso-hover="313">x</span> =&gt; (<span class="var token" data-binding="var-_uniq.392" data-verso-hover="297">y</span>, 0)</span></span></span></span></span> <span class="tactic"><label for="tactic-state-9266269924465792951-6711-6728"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-6711" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-9266269924465792951-6711-6728"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.392" data-verso-hover="297">y</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2963" data-verso-hover="313">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2969" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.392" data-verso-hover="297">y</span>) <span class="var token" data-binding="var-_uniq.2963" data-verso-hover="313">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.2970" data-verso-hover="207">x</span>:=<span class="var token" data-binding="var-_uniq.2963" data-verso-hover="313">xdx</span>.1), <span class="var token" data-binding="var-_uniq.392" data-verso-hover="297">y</span>) <span class="var token" data-binding="var-_uniq.2963" data-verso-hover="313">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.2971" data-verso-hover="313">x</span> =&gt; (<span class="var token" data-binding="var-_uniq.392" data-verso-hover="297">y</span>, 0)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-6730-6739"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-6730">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-6730-6739"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></details><ol start="2">
                <li>
                  <p>
                    Write down the product and projection lambda theorems of <code class="hl lean inline" data-lean-context="examples"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></code>. Hint: The product rule should be formulated for <code>(fun x : X =&gt; (g x, f x))</code> where <code>g</code> and <code>f</code> are differentiable functions. The projection rule can be formulated for <code>(fun (xy : X×Y) =&gt; xy.1)</code></p>
                  </li>
                </ol>
              <details class="solution"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-7067">theorem</span> <span class="const token" data-binding="const-Prod.mk.arg_fstsnd.fwdFDeriv'_rule" data-verso-hover="332" id="Prod___fst___arg_self___fwdFDeriv____rule">Prod.mk.arg_fstsnd.fwdFDeriv'_rule</span>
   <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.17281" data-verso-hover="36">Z</span><span class="unknown token" data-binding="">)</span>
   <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1066" data-verso-hover="324">hg</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1355" data-verso-hover="323">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
   <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-7215">fun</span> <span class="var token" data-binding="var-_uniq.1366" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.1366" data-verso-hover="207">x</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span> <span class="var token" data-binding="var-_uniq.1366" data-verso-hover="207">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
   <span class="unknown token" data-binding="">=</span>
   <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-7248">fun</span> <span class="var token" data-binding="var-_uniq.1566" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">=&gt;</span>
     <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-7264" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.1903" data-verso-hover="325">ydy</span> <span class="unknown token" data-binding="">:=</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.1566" data-verso-hover="313">xdx</span>
     <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-7299" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.2240" data-verso-hover="334">zdz</span> <span class="unknown token" data-binding="">:=</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span> <span class="var token" data-binding="var-_uniq.1566" data-verso-hover="313">xdx</span>
     <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1903" data-verso-hover="325">ydy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="334">zdz</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1903" data-verso-hover="325">ydy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.2240" data-verso-hover="334">zdz</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-6834696618360222233-7367-7369"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-7367" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6834696618360222233-7367-7369"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁶</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17281" data-verso-hover="36">Z</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.279" data-verso-hover="318">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17281" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.390" data-verso-hover="319">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17281" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.17281" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1066" data-verso-hover="324">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1355" data-verso-hover="323">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="207">x</span> =&gt; (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="207">x</span>))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="313">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.17013" data-verso-hover="325">ydy</span> := <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="313">xdx</span>;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.17014" data-verso-hover="334">zdz</span> := <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="313">xdx</span>;
  ((<span class="var token" data-binding="var-_uniq.17013" data-verso-hover="325">ydy</span>.1, <span class="var token" data-binding="var-_uniq.17014" data-verso-hover="334">zdz</span>.1), <span class="var token" data-binding="var-_uniq.17013" data-verso-hover="325">ydy</span>.2, <span class="var token" data-binding="var-_uniq.17014" data-verso-hover="334">zdz</span>.2)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-11818754202862375718-7372-7389"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-7372" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-11818754202862375718-7372-7389"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁶</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17281" data-verso-hover="36">Z</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.279" data-verso-hover="318">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17281" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.390" data-verso-hover="319">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17281" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.17281" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1066" data-verso-hover="324">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1355" data-verso-hover="323">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.17006" data-verso-hover="313">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="207">x</span> =&gt; (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="207">x</span>)) <span class="var token" data-binding="var-_uniq.17006" data-verso-hover="313">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.17017" data-verso-hover="207">x</span>:=<span class="var token" data-binding="var-_uniq.17006" data-verso-hover="313">xdx</span>.1), (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.17017" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span> <span class="var token" data-binding="var-_uniq.17017" data-verso-hover="207">x</span>)) <span class="var token" data-binding="var-_uniq.17006" data-verso-hover="313">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.17022" data-verso-hover="313">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.17027" data-verso-hover="325">ydy</span> := (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.17022" data-verso-hover="313">xdx</span>.1, (∂ <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.17022" data-verso-hover="313">xdx</span>.1) <span class="var token" data-binding="var-_uniq.17022" data-verso-hover="313">xdx</span>.2);
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.17032" data-verso-hover="334">zdz</span> := (<span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span> <span class="var token" data-binding="var-_uniq.17022" data-verso-hover="313">xdx</span>.1, (∂ <span class="var token" data-binding="var-_uniq.398" data-verso-hover="333">f</span> <span class="var token" data-binding="var-_uniq.17022" data-verso-hover="313">xdx</span>.1) <span class="var token" data-binding="var-_uniq.17022" data-verso-hover="313">xdx</span>.2);
  ((<span class="var token" data-binding="var-_uniq.17027" data-verso-hover="325">ydy</span>.1, <span class="var token" data-binding="var-_uniq.17032" data-verso-hover="334">zdz</span>.1), <span class="var token" data-binding="var-_uniq.17027" data-verso-hover="325">ydy</span>.2, <span class="var token" data-binding="var-_uniq.17032" data-verso-hover="334">zdz</span>.2)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-7391-7400"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-7391">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-7391-7400"><span class="tactic-state">All goals completed! 🐙</span></span>

<span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-7415">theorem</span> <span class="const token" data-binding="const-Prod.fst.arg_self.fwdFDeriv'_rule" data-verso-hover="335" id="Prod___fst___arg_self___fwdFDeriv____rule">Prod.fst.arg_self.fwdFDeriv'_rule</span> <span class="unknown token" data-binding="">:</span>
    <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-7477">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.17408" data-verso-hover="336">xy</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.17408" data-verso-hover="336">xy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-7512">fun</span> <span class="var token" data-binding="var-_uniq.17619" data-verso-hover="337">xydxy</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.17619" data-verso-hover="337">xydxy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.17619" data-verso-hover="337">xydxy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-1030580612607009046-7550-7552"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-7550" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1030580612607009046-7550-7552"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17010" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17015" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17163" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17168" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17279" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.20617" data-verso-hover="336">xy</span> =&gt; <span class="var token" data-binding="var-_uniq.20617" data-verso-hover="336">xy</span>.1)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.20618" data-verso-hover="337">xydxy</span> =&gt; (<span class="var token" data-binding="var-_uniq.20618" data-verso-hover="337">xydxy</span>.1.1, <span class="var token" data-binding="var-_uniq.20618" data-verso-hover="337">xydxy</span>.2.1)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-515175824674524284-7555-7572"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-7555" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-515175824674524284-7555-7572"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17010" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17015" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17163" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17168" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17279" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.20615" data-verso-hover="337">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="336">xy</span> =&gt; <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="336">xy</span>.1) <span class="var token" data-binding="var-_uniq.20615" data-verso-hover="337">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.20622" data-verso-hover="336">xy</span>:=<span class="var token" data-binding="var-_uniq.20615" data-verso-hover="337">xdx</span>.1), <span class="var token" data-binding="var-_uniq.20622" data-verso-hover="336">xy</span>.1) <span class="var token" data-binding="var-_uniq.20615" data-verso-hover="337">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.20623" data-verso-hover="337">xydxy</span> =&gt; (<span class="var token" data-binding="var-_uniq.20623" data-verso-hover="337">xydxy</span>.1.1, <span class="var token" data-binding="var-_uniq.20623" data-verso-hover="337">xydxy</span>.2.1)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-7574-7583"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-7574">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-7574-7583"><span class="tactic-state">All goals completed! 🐙</span></span>

<span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-7598">theorem</span> <span class="const token" data-binding="const-Prod.snd.arg_self.fwdFDeriv'_rule" data-verso-hover="338" id="Prod___fst___arg_self___fwdFDeriv____rule">Prod.snd.arg_self.fwdFDeriv'_rule</span>
    <span class="unknown token" data-binding="">:</span>
  <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-7662">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.21017" data-verso-hover="336">xy</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.21017" data-verso-hover="336">xy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">=</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-7693">fun</span> <span class="var token" data-binding="var-_uniq.21228" data-verso-hover="337">xydxy</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.21228" data-verso-hover="337">xydxy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.21228" data-verso-hover="337">xydxy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-10775257319771512340-7731-7733"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-7731" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-10775257319771512340-7731-7733"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20619" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20624" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20772" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20777" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20888" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.24223" data-verso-hover="336">xy</span> =&gt; <span class="var token" data-binding="var-_uniq.24223" data-verso-hover="336">xy</span>.2)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.24224" data-verso-hover="337">xydxy</span> =&gt; (<span class="var token" data-binding="var-_uniq.24224" data-verso-hover="337">xydxy</span>.1.2, <span class="var token" data-binding="var-_uniq.24224" data-verso-hover="337">xydxy</span>.2.2)</span></span></span></span></span> <span class="tactic"><label for="tactic-state-8087330979432863675-7734-7751"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-7734" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8087330979432863675-7734-7751"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20619" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20624" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20772" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17012" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20777" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.20888" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.17007" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.17165" data-verso-hover="36">Y</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.24221" data-verso-hover="337">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.24227" data-verso-hover="336">xy</span> =&gt; <span class="var token" data-binding="var-_uniq.24227" data-verso-hover="336">xy</span>.2) <span class="var token" data-binding="var-_uniq.24221" data-verso-hover="337">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.24228" data-verso-hover="336">xy</span>:=<span class="var token" data-binding="var-_uniq.24221" data-verso-hover="337">xdx</span>.1), <span class="var token" data-binding="var-_uniq.24228" data-verso-hover="336">xy</span>.2) <span class="var token" data-binding="var-_uniq.24221" data-verso-hover="337">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.24229" data-verso-hover="337">xydxy</span> =&gt; (<span class="var token" data-binding="var-_uniq.24229" data-verso-hover="337">xydxy</span>.1.2, <span class="var token" data-binding="var-_uniq.24229" data-verso-hover="337">xydxy</span>.2.2)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-7753-7762"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-7753">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-7753-7762"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></details><ol start="3">
                <li>
                  <p>
                    Write down the apply lambda theorems of <code class="hl lean inline" data-lean-context="examples"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></code>.
  Hint: Writhe the rule for the function <code>fun (f : I → X) =&gt; f i</code> where <code>I</code> has instance of <code>[IndexType I]</code>.</p>
                  </li>
                </ol>
              <details class="solution"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-7991">theorem</span> <span class="const token" data-binding="const-fwdFDeriv'.apply_rule" data-verso-hover="339" id="fwdFDeriv______apply_rule">fwdFDeriv'.apply_rule</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">I</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-SciLean.IndexType" data-verso-hover="38">IndexType</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">I</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">I</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-8067">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.411" data-verso-hover="340">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">I</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.411" data-verso-hover="340">f</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-8103">fun</span> <span class="var token" data-binding="var-_uniq.866" data-verso-hover="341">fdf</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.866" data-verso-hover="341">fdf</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.866" data-verso-hover="341">fdf</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-13911607482839103150-8136-8138"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-8136" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13911607482839103150-8136-8138"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">I</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.935" data-verso-hover="159">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.IndexType" data-verso-hover="38">IndexType</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">I</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">I</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3451" data-verso-hover="340">f</span> =&gt; <span class="var token" data-binding="var-_uniq.3451" data-verso-hover="340">f</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3453" data-verso-hover="341">fdf</span> =&gt; (<span class="var token" data-binding="var-_uniq.3453" data-verso-hover="341">fdf</span>.1 <span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span>, <span class="var token" data-binding="var-_uniq.3453" data-verso-hover="341">fdf</span>.2 <span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span>)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-10915736483202269531-8141-8158"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-8141" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-10915736483202269531-8141-8158"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">I</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.935" data-verso-hover="159">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.IndexType" data-verso-hover="38">IndexType</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">I</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">I</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3449" data-verso-hover="341">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3455" data-verso-hover="340">f</span> =&gt; <span class="var token" data-binding="var-_uniq.3455" data-verso-hover="340">f</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span>) <span class="var token" data-binding="var-_uniq.3449" data-verso-hover="341">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.3457" data-verso-hover="340">f</span>:=<span class="var token" data-binding="var-_uniq.3449" data-verso-hover="341">xdx</span>.1), <span class="var token" data-binding="var-_uniq.3457" data-verso-hover="340">f</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span>) <span class="var token" data-binding="var-_uniq.3449" data-verso-hover="341">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3461" data-verso-hover="341">fdf</span> =&gt; (<span class="var token" data-binding="var-_uniq.3461" data-verso-hover="341">fdf</span>.1 <span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span>, <span class="var token" data-binding="var-_uniq.3461" data-verso-hover="341">fdf</span>.2 <span class="var token" data-binding="var-_uniq.398" data-verso-hover="86">i</span>)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-8160-8169"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-8160">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-8160-8169"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></details><ol start="4">
                <li>
                  <p>
                    Write down the let lambda theorems of <code class="hl lean inline" data-lean-context="examples"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></code>.
  Pay attention the the use of let bindings on the right hand side. Careful use of let bindings is important for the efficiency of the resulting code. Also you do not want to differentiate <code>f</code> w.r.t. to <code>x</code> and <code>y</code> separetely but rather differentiate it w.r.t. <code>x</code> and <code>y</code> simultatinously.</p>
                  </li>
                </ol>
              <details class="solution"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-8575">theorem</span> <span class="const token" data-binding="const-fwdFDeriv'.let_rule" data-verso-hover="342" id="fwdFDeriv______let_rule">fwdFDeriv'.let_rule</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2546" data-verso-hover="344">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">↿</span><span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span>  <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2943" data-verso-hover="324">hg</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-8721">fun</span> <span class="var token" data-binding="var-_uniq.2955" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-8730" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.2958" data-verso-hover="297">y</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.2955" data-verso-hover="207">x</span><span class="unknown token" data-binding="">;</span> <span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span> <span class="var token" data-binding="var-_uniq.2955" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.2958" data-verso-hover="297">y</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-8761">fun</span> <span class="var token" data-binding="var-_uniq.3031" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">=&gt;</span>
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-8778" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.3370" data-verso-hover="325">ydy</span> <span class="unknown token" data-binding="">:=</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.3031" data-verso-hover="313">xdx</span>
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-8814" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.3401" data-verso-hover="337">xydxy</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3031" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.3370" data-verso-hover="325">ydy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3031" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.3370" data-verso-hover="325">ydy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
      <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-8877">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3935" data-verso-hover="207">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.3936" data-verso-hover="297">y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span> <span class="var token" data-binding="var-_uniq.3935" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.3936" data-verso-hover="297">y</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.3401" data-verso-hover="337">xydxy</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-13699609364043814626-8906-8908"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-8906" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13699609364043814626-8906-8908"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁶</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.279" data-verso-hover="318">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.390" data-verso-hover="319">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> → <span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2546" data-verso-hover="344">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">↿</span><span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2943" data-verso-hover="324">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.21471" data-verso-hover="207">x</span> =&gt;
    <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.21472" data-verso-hover="297">y</span> := <span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.21471" data-verso-hover="207">x</span>;
    <span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span> <span class="var token" data-binding="var-_uniq.21471" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.21472" data-verso-hover="297">y</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> =
  </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.21473" data-verso-hover="313">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.21474" data-verso-hover="325">ydy</span> := <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.21473" data-verso-hover="313">xdx</span>;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.21487" data-verso-hover="337">xydxy</span> := ((<span class="var token" data-binding="var-_uniq.21473" data-verso-hover="313">xdx</span>.1, <span class="var token" data-binding="var-_uniq.21474" data-verso-hover="325">ydy</span>.1), <span class="var token" data-binding="var-_uniq.21473" data-verso-hover="313">xdx</span>.2, <span class="var token" data-binding="var-_uniq.21474" data-verso-hover="325">ydy</span>.2);
  <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span>
    (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.21489" data-verso-hover="336">x</span> =&gt;
      <span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.21489" data-verso-hover="336">x</span> <span class="keyword token" data-binding="">with</span>
      | (<span class="var token" data-binding="var-_uniq.21497" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.21498" data-verso-hover="297">y</span>) =&gt; <span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span> <span class="var token" data-binding="var-_uniq.21492" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.21493" data-verso-hover="297">y</span>)
    <span class="var token" data-binding="var-_uniq.21487" data-verso-hover="337">xydxy</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-7945430643214616034-8911-8928"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-8911" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7945430643214616034-8911-8928"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁶</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.279" data-verso-hover="318">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.390" data-verso-hover="319">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> → <span class="var token" data-binding="var-_uniq.276" data-verso-hover="36">Z</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2546" data-verso-hover="344">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">↿</span><span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2943" data-verso-hover="324">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.21470" data-verso-hover="313">xdx</span> =&gt;
    ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.21477" data-verso-hover="207">x</span> =&gt;
          <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.21478" data-verso-hover="297">y</span> := <span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.21477" data-verso-hover="207">x</span>;
          <span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span> <span class="var token" data-binding="var-_uniq.21477" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.21478" data-verso-hover="297">y</span>)
        <span class="var token" data-binding="var-_uniq.21470" data-verso-hover="313">xdx</span>.1,
      (∂ (<span class="var token" data-binding="var-_uniq.21479" data-verso-hover="207">x</span>:=<span class="var token" data-binding="var-_uniq.21470" data-verso-hover="313">xdx</span>.1),
          <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.21480" data-verso-hover="297">y</span> := <span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.21479" data-verso-hover="207">x</span>;
          <span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span> <span class="var token" data-binding="var-_uniq.21479" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.21480" data-verso-hover="297">y</span>)
        <span class="var token" data-binding="var-_uniq.21470" data-verso-hover="313">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> =
  </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.21481" data-verso-hover="313">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.21486" data-verso-hover="325">ydy</span> := (<span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.21481" data-verso-hover="313">xdx</span>.1, (∂ <span class="var token" data-binding="var-_uniq.2550" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.21481" data-verso-hover="313">xdx</span>.1) <span class="var token" data-binding="var-_uniq.21481" data-verso-hover="313">xdx</span>.2);
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.21499" data-verso-hover="337">xydxy</span> := ((<span class="var token" data-binding="var-_uniq.21481" data-verso-hover="313">xdx</span>.1, <span class="var token" data-binding="var-_uniq.21486" data-verso-hover="325">ydy</span>.1), <span class="var token" data-binding="var-_uniq.21481" data-verso-hover="313">xdx</span>.2, <span class="var token" data-binding="var-_uniq.21486" data-verso-hover="325">ydy</span>.2);
  ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.21505" data-verso-hover="336">x</span> =&gt;
        <span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.21505" data-verso-hover="336">x</span> <span class="keyword token" data-binding="">with</span>
        | (<span class="var token" data-binding="var-_uniq.21513" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.21514" data-verso-hover="297">y</span>) =&gt; <span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span> <span class="var token" data-binding="var-_uniq.21508" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.21509" data-verso-hover="297">y</span>)
      <span class="var token" data-binding="var-_uniq.21499" data-verso-hover="337">xydxy</span>.1,
    (∂ (<span class="var token" data-binding="var-_uniq.21520" data-verso-hover="336">x</span>:=<span class="var token" data-binding="var-_uniq.21499" data-verso-hover="337">xydxy</span>.1),
        <span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.21520" data-verso-hover="336">x</span> <span class="keyword token" data-binding="">with</span>
        | (<span class="var token" data-binding="var-_uniq.21528" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.21529" data-verso-hover="297">y</span>) =&gt; <span class="var token" data-binding="var-_uniq.396" data-verso-hover="343">f</span> <span class="var token" data-binding="var-_uniq.21523" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.21524" data-verso-hover="297">y</span>)
      <span class="var token" data-binding="var-_uniq.21499" data-verso-hover="337">xydxy</span>.2)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-8930-8939"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-8930">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-8930-8939"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></details></section>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Function-Theorems">
              2.3.3. Function Theorems</h2>
            <p>
              Once we postulate all the lambda theorems for a new function transformation we have to also postulate theorems for functions like addition, multiplication etc.</p>
            <p>
              Let's start with a function theorem for negation is it is a function of a single argument</p>
            <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-9243">theorem</span> <span class="const token" data-binding="const-Neg.neg.arg_a0.fwdFDeriv'_rule" data-verso-hover="345" id="Neg___neg___arg_a0___fwdFDeriv____rule">Neg.neg.arg_a0.fwdFDeriv'_rule</span> <span class="unknown token" data-binding="">:</span>
    <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-9302">fun</span> <span class="var token" data-binding="var-_uniq.401" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.401" data-verso-hover="207">x</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-9330">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.700" data-verso-hover="207">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.701" data-verso-hover="207">dx</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span>
      <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">-</span><span class="var token" data-binding="var-_uniq.700" data-verso-hover="207">x</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">-</span><span class="var token" data-binding="var-_uniq.701" data-verso-hover="207">dx</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-12685059288753177369-9363-9365"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-9363" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12685059288753177369-9363-9365"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4124" data-verso-hover="207">x</span> =&gt; <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.4124" data-verso-hover="207">x</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4132" data-verso-hover="313">x</span> =&gt;
  <span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.4132" data-verso-hover="313">x</span> <span class="keyword token" data-binding="">with</span>
  | (<span class="var token" data-binding="var-_uniq.4150" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.4151" data-verso-hover="207">dx</span>) =&gt; (<span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.4135" data-verso-hover="207">x</span>, <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.4136" data-verso-hover="207">dx</span>)</span></span></span></span></span> <span class="tactic"><label for="tactic-state-2856007267829419780-9366-9383"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-9366" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2856007267829419780-9366-9383"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4122" data-verso-hover="313">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4128" data-verso-hover="207">x</span> =&gt; <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.4128" data-verso-hover="207">x</span>) <span class="var token" data-binding="var-_uniq.4122" data-verso-hover="313">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.4135" data-verso-hover="207">x</span>:=<span class="var token" data-binding="var-_uniq.4122" data-verso-hover="313">xdx</span>.1), <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.4135" data-verso-hover="207">x</span>) <span class="var token" data-binding="var-_uniq.4122" data-verso-hover="313">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4140" data-verso-hover="313">x</span> =&gt;
  <span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.4140" data-verso-hover="313">x</span> <span class="keyword token" data-binding="">with</span>
  | (<span class="var token" data-binding="var-_uniq.4158" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.4159" data-verso-hover="207">dx</span>) =&gt; (<span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.4143" data-verso-hover="207">x</span>, <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.4144" data-verso-hover="207">dx</span>)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-9385-9394"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-9385">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-9385-9394"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              For a function of two or more arguments we just uncurry the function sufficiently and furmulate the theorem as for a function of single argument. For example the transformation rule for addition is</p>
            <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-9619">theorem</span> <span class="const token" data-binding="const-HAdd.hAdd.arg_a0a1.fwdFDeriv'_rule" data-verso-hover="346" id="HAdd___hAdd___arg_a0a1___fwdFDeriv____rule">HAdd.hAdd.arg_a0a1.fwdFDeriv'_rule</span> <span class="unknown token" data-binding="">:</span>
    <span class="unknown token" data-binding="">(</span><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-9682">fun</span> <span class="var token" data-binding="var-_uniq.403" data-verso-hover="313">xy</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.403" data-verso-hover="313">xy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.403" data-verso-hover="313">xy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-9722">fun</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2068" data-verso-hover="207">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.2069" data-verso-hover="207">y</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2070" data-verso-hover="207">dx</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.2071" data-verso-hover="207">dy</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span>
      <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2068" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.2069" data-verso-hover="207">y</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.2070" data-verso-hover="207">dx</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.2071" data-verso-hover="207">dy</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-16490725779078174306-9771-9773"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-9771" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16490725779078174306-9771-9773"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.11432" data-verso-hover="313">xy</span> =&gt; <span class="var token" data-binding="var-_uniq.11432" data-verso-hover="313">xy</span>.1<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.11432" data-verso-hover="313">xy</span>.2)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.11446" data-verso-hover="347">x</span> =&gt;
  <span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.11446" data-verso-hover="347">x</span> <span class="keyword token" data-binding="">with</span>
  | ((<span class="var token" data-binding="var-_uniq.11472" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.11473" data-verso-hover="207">y</span>), <span class="var token" data-binding="var-_uniq.11474" data-verso-hover="207">dx</span>, <span class="var token" data-binding="var-_uniq.11475" data-verso-hover="207">dy</span>) =&gt; (<span class="var token" data-binding="var-_uniq.11449" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.11450" data-verso-hover="207">y</span>, <span class="var token" data-binding="var-_uniq.11451" data-verso-hover="207">dx</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.11452" data-verso-hover="207">dy</span>)</span></span></span></span></span> <span class="tactic"><label for="tactic-state-8519632049228129228-9774-9791"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-9774" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8519632049228129228-9774-9791"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.11430" data-verso-hover="347">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.11436" data-verso-hover="313">xy</span> =&gt; <span class="var token" data-binding="var-_uniq.11436" data-verso-hover="313">xy</span>.1<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.11436" data-verso-hover="313">xy</span>.2) <span class="var token" data-binding="var-_uniq.11430" data-verso-hover="347">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.11449" data-verso-hover="313">xy</span>:=<span class="var token" data-binding="var-_uniq.11430" data-verso-hover="347">xdx</span>.1), (<span class="var token" data-binding="var-_uniq.11449" data-verso-hover="313">xy</span>.1<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.11449" data-verso-hover="313">xy</span>.2)) <span class="var token" data-binding="var-_uniq.11430" data-verso-hover="347">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.11457" data-verso-hover="347">x</span> =&gt;
  <span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.11457" data-verso-hover="347">x</span> <span class="keyword token" data-binding="">with</span>
  | ((<span class="var token" data-binding="var-_uniq.11483" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.11484" data-verso-hover="207">y</span>), <span class="var token" data-binding="var-_uniq.11485" data-verso-hover="207">dx</span>, <span class="var token" data-binding="var-_uniq.11486" data-verso-hover="207">dy</span>) =&gt; (<span class="var token" data-binding="var-_uniq.11460" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.11461" data-verso-hover="207">y</span>, <span class="var token" data-binding="var-_uniq.11462" data-verso-hover="207">dx</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.11463" data-verso-hover="207">dy</span>)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-9793-9802"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-9793">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-9793-9802"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              Let's define function in three arguments</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-9858">def</span> <span class="const token" data-binding="const-fun1" data-verso-hover="348" id="fun1">fun1</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">x</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="349">y</span> <span class="var token" data-binding="var-_uniq.396" data-verso-hover="349">z</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-SciLean.Scalar.exp" data-verso-hover="98">exp</span> <span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">x</span> <span class="unknown token" data-binding="">*</span> <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.396" data-verso-hover="349">z</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="349">y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.396" data-verso-hover="349">z</span>
<span class="unknown token" data-binding=""></span></code><p>
              We do not have to state the transformation rule in all of its arguments at the same time.</p>
            <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-10021">theorem</span> <span class="const token" data-binding="const-fun1.arg_xz.fwdFDeriv'_rule" data-verso-hover="350" id="fun1___arg_xz___fwdFDeriv____rule">fun1.arg_xz.fwdFDeriv'_rule</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-10085">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.405" data-verso-hover="351">xz</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="#fun1"><span class="const token" data-binding="const-fun1" data-verso-hover="348">fun1</span></a> <span class="var token" data-binding="var-_uniq.405" data-verso-hover="351">xz</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span> <span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span> <span class="var token" data-binding="var-_uniq.405" data-verso-hover="351">xz</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-10132">fun</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1131" data-verso-hover="349">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.1132" data-verso-hover="349">z</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1133" data-verso-hover="349">dx</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.1134" data-verso-hover="349">dz</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span>
      <span class="unknown token" data-binding="">(</span><a href="#fun1"><span class="const token" data-binding="const-fun1" data-verso-hover="348">fun1</span></a> <span class="var token" data-binding="var-_uniq.1131" data-verso-hover="349">x</span> <span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span> <span class="var token" data-binding="var-_uniq.1132" data-verso-hover="349">z</span><span class="unknown token" data-binding="">,</span>
       <span class="const token" data-binding="const-SciLean.Scalar.exp" data-verso-hover="98">exp</span> <span class="var token" data-binding="var-_uniq.1131" data-verso-hover="349">x</span> <span class="unknown token" data-binding="">*</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1134" data-verso-hover="349">dz</span> <span class="unknown token" data-binding="">*</span> <span class="const token" data-binding="const-SciLean.Scalar.cos" data-verso-hover="197">cos</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1132" data-verso-hover="349">z</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
       <span class="unknown token" data-binding="">+</span>
       <span class="var token" data-binding="var-_uniq.1133" data-verso-hover="349">dx</span> <span class="unknown token" data-binding="">*</span> <span class="const token" data-binding="const-SciLean.Scalar.exp" data-verso-hover="98">exp</span> <span class="var token" data-binding="var-_uniq.1131" data-verso-hover="349">x</span> <span class="unknown token" data-binding="">*</span> <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1132" data-verso-hover="349">z</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.1134" data-verso-hover="349">dz</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-5514622245610849108-10258-10260"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-10258" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5514622245610849108-10258-10260"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.26327" data-verso-hover="351">xz</span> =&gt; <a href="#fun1"><span class="const token" data-binding="const-fun1" data-verso-hover="348">fun1</span></a> <span class="var token" data-binding="var-_uniq.26327" data-verso-hover="351">xz</span>.1 <span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span> <span class="var token" data-binding="var-_uniq.26327" data-verso-hover="351">xz</span>.2)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.26329" data-verso-hover="352">x</span> =&gt;
  <span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.26329" data-verso-hover="352">x</span> <span class="keyword token" data-binding="">with</span>
  | ((<span class="var token" data-binding="var-_uniq.26423" data-verso-hover="349">x</span>, <span class="var token" data-binding="var-_uniq.26424" data-verso-hover="349">z</span>), <span class="var token" data-binding="var-_uniq.26425" data-verso-hover="349">dx</span>, <span class="var token" data-binding="var-_uniq.26426" data-verso-hover="349">dz</span>) =&gt; (<a href="#fun1"><span class="const token" data-binding="const-fun1" data-verso-hover="348">fun1</span></a> <span class="var token" data-binding="var-_uniq.26332" data-verso-hover="349">x</span> <span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span> <span class="var token" data-binding="var-_uniq.26333" data-verso-hover="349">z</span>, <span class="const token" data-binding="const-SciLean.Scalar.exp" data-verso-hover="98">exp</span> <span class="var token" data-binding="var-_uniq.26332" data-verso-hover="349">x</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>(<span class="var token" data-binding="var-_uniq.26335" data-verso-hover="349">dz</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.cos" data-verso-hover="197">cos</span> (<span class="var token" data-binding="var-_uniq.26333" data-verso-hover="349">z</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span>))<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.26334" data-verso-hover="349">dx</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.exp" data-verso-hover="98">exp</span> <span class="var token" data-binding="var-_uniq.26332" data-verso-hover="349">x</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="var token" data-binding="var-_uniq.26333" data-verso-hover="349">z</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span>)<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.26335" data-verso-hover="349">dz</span>)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-2910906486804786855-10263-10285"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-10263" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <a href="#fun1"><span class="const token" data-binding="const-fun1" data-verso-hover="348">fun1</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2910906486804786855-10263-10285"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.26325" data-verso-hover="352">xdx</span> =&gt;
    ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.26331" data-verso-hover="351">xz</span> =&gt; <span class="const token" data-binding="const-SciLean.Scalar.exp" data-verso-hover="98">exp</span> <span class="var token" data-binding="var-_uniq.26331" data-verso-hover="351">xz</span>.1<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="var token" data-binding="var-_uniq.26331" data-verso-hover="351">xz</span>.2<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span>)<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.26331" data-verso-hover="351">xz</span>.2) <span class="var token" data-binding="var-_uniq.26325" data-verso-hover="352">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.26374" data-verso-hover="351">xz</span>:=<span class="var token" data-binding="var-_uniq.26325" data-verso-hover="352">xdx</span>.1), (<span class="const token" data-binding="const-SciLean.Scalar.exp" data-verso-hover="98">exp</span> <span class="var token" data-binding="var-_uniq.26374" data-verso-hover="351">xz</span>.1<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="var token" data-binding="var-_uniq.26374" data-verso-hover="351">xz</span>.2<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span>)<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.26374" data-verso-hover="351">xz</span>.2)) <span class="var token" data-binding="var-_uniq.26325" data-verso-hover="352">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> =
  </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.26402" data-verso-hover="352">x</span> =&gt;
  <span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.26402" data-verso-hover="352">x</span> <span class="keyword token" data-binding="">with</span>
  | ((<span class="var token" data-binding="var-_uniq.26506" data-verso-hover="349">x</span>, <span class="var token" data-binding="var-_uniq.26507" data-verso-hover="349">z</span>), <span class="var token" data-binding="var-_uniq.26508" data-verso-hover="349">dx</span>, <span class="var token" data-binding="var-_uniq.26509" data-verso-hover="349">dz</span>) =&gt; (<span class="const token" data-binding="const-SciLean.Scalar.exp" data-verso-hover="98">exp</span> <span class="var token" data-binding="var-_uniq.26405" data-verso-hover="349">x</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="var token" data-binding="var-_uniq.26406" data-verso-hover="349">z</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span>)<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.26406" data-verso-hover="349">z</span>, <span class="const token" data-binding="const-SciLean.Scalar.exp" data-verso-hover="98">exp</span> <span class="var token" data-binding="var-_uniq.26405" data-verso-hover="349">x</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>(<span class="var token" data-binding="var-_uniq.26408" data-verso-hover="349">dz</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.cos" data-verso-hover="197">cos</span> (<span class="var token" data-binding="var-_uniq.26406" data-verso-hover="349">z</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span>))<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.26407" data-verso-hover="349">dx</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.exp" data-verso-hover="98">exp</span> <span class="var token" data-binding="var-_uniq.26405" data-verso-hover="349">x</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="var token" data-binding="var-_uniq.26406" data-verso-hover="349">z</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.392" data-verso-hover="349">y</span>)<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.26408" data-verso-hover="349">dz</span>)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-10287-10296"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-10287">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-10287-10296"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              Writing rules for user defined functions like <code class="hl lean inline" data-lean-context="examples"><a href="#fun1"><span class="const token" data-binding="const-fun1" data-verso-hover="348">fun1</span></a></code> is tedious and because <code class="hl lean inline" data-lean-context="examples"><a href="#fun1"><span class="const token" data-binding="const-fun1" data-verso-hover="348">fun1</span></a></code> is defined in terms of known function the right hands side of this rule should be automatically generated anyway. We will discuss this how to do this a bit later. Here we just wanted to demonstrate that you can indeed formulate the transformation rule only for a subset of the input arguments. The important rule is that the order of the arguments should be maintained e.g. the left hand side should <strong>not</strong> be <code>fwdFDeriv' R (fun (zx : R×R) =&gt; fun1 zx.2 y zx.1)</code>.</p>
            <p>
              In some cases the rule can get a bit tricky and there might be additional requirements on the arguments. The canonical example is division, <code>x / y</code>, which can be differentiated only if we divide by non zero <code>y</code>. In this case, the theorem can't be stated as a function in <code>((x,y),(dx,dy))</code> anymore. We have to fix particular value and require that the <code>y</code> is non zero.</p>
            <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-11249">theorem</span> <span class="const token" data-binding="const-HDiv.hDiv.arg_a0a1.fwdFDeriv'_rule_simple" data-verso-hover="353" id="HDiv___hDiv___arg_a0a1___fwdFDeriv____rule_simple">HDiv.hDiv.arg_a0a1.fwdFDeriv'_rule_simple</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">×</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.613" data-verso-hover="354">h</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span> <span class="unknown token" data-binding="">≠</span> <span class="typed token" data-binding="" data-verso-hover="349">0</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="unknown token" data-binding="">(</span><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-11370">fun</span> <span class="var token" data-binding="var-_uniq.626" data-verso-hover="351">xy</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.626" data-verso-hover="351">xy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span> <span class="unknown token" data-binding="">/</span> <span class="var token" data-binding="var-_uniq.626" data-verso-hover="351">xy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-11416" data-verso-hover="81">let</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1453" data-verso-hover="349">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.1454" data-verso-hover="349">y</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1455" data-verso-hover="349">dx</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.1456" data-verso-hover="349">dy</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1453" data-verso-hover="349">x</span><span class="unknown token" data-binding="">/</span><span class="var token" data-binding="var-_uniq.1454" data-verso-hover="349">y</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1455" data-verso-hover="349">dx</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.1454" data-verso-hover="349">y</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.1453" data-verso-hover="349">x</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.1456" data-verso-hover="349">dy</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">/</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1454" data-verso-hover="349">y</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="355">2</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-10252373490472352623-11480-11482"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-11480" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-10252373490472352623-11480-11482"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span></span><span class="colon">:</span><span class="type">(<span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span>)<span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.613" data-verso-hover="354">h</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span>.1.2<span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.23352" data-verso-hover="351">xy</span> =&gt; <span class="var token" data-binding="var-_uniq.23352" data-verso-hover="351">xy</span>.1<span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.23352" data-verso-hover="351">xy</span>.2) <span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> =
  </span><span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span>, <span class="var token" data-binding="var-_uniq.613" data-verso-hover="354">h</span> <span class="keyword token" data-binding="">with</span>
  | ((<span class="var token" data-binding="var-_uniq.23437" data-verso-hover="349">x</span>, <span class="var token" data-binding="var-_uniq.23438" data-verso-hover="349">y</span>), <span class="var token" data-binding="var-_uniq.23439" data-verso-hover="349">dx</span>, <span class="var token" data-binding="var-_uniq.23440" data-verso-hover="349">dy</span>), <span class="var token" data-binding="var-_uniq.23441" data-verso-hover="356">h</span> =&gt; (<span class="var token" data-binding="var-_uniq.23370" data-verso-hover="349">x</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.23371" data-verso-hover="349">y</span>, (<span class="var token" data-binding="var-_uniq.23372" data-verso-hover="349">dx</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.23371" data-verso-hover="349">y</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.23370" data-verso-hover="349">x</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.23373" data-verso-hover="349">dy</span>)<span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.23371" data-verso-hover="349">y</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-5406828365528322125-11485-11502"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-11485" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5406828365528322125-11485-11502"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span></span><span class="colon">:</span><span class="type">(<span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span>)<span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.613" data-verso-hover="354">h</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span>.1.2<span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.23356" data-verso-hover="351">xy</span> =&gt; <span class="var token" data-binding="var-_uniq.23356" data-verso-hover="351">xy</span>.1<span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.23356" data-verso-hover="351">xy</span>.2) <span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.23369" data-verso-hover="351">xy</span>:=<span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span>.1), <span class="var token" data-binding="var-_uniq.23369" data-verso-hover="351">xy</span>.1<span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.23369" data-verso-hover="351">xy</span>.2) <span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span>.2)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> =
  </span><span class="keyword token" data-binding="">match</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="352">xydxy</span>, <span class="var token" data-binding="var-_uniq.613" data-verso-hover="354">h</span> <span class="keyword token" data-binding="">with</span>
  | ((<span class="var token" data-binding="var-_uniq.23448" data-verso-hover="349">x</span>, <span class="var token" data-binding="var-_uniq.23449" data-verso-hover="349">y</span>), <span class="var token" data-binding="var-_uniq.23450" data-verso-hover="349">dx</span>, <span class="var token" data-binding="var-_uniq.23451" data-verso-hover="349">dy</span>), <span class="var token" data-binding="var-_uniq.23452" data-verso-hover="356">h</span> =&gt; (<span class="var token" data-binding="var-_uniq.23381" data-verso-hover="349">x</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.23382" data-verso-hover="349">y</span>, (<span class="var token" data-binding="var-_uniq.23383" data-verso-hover="349">dx</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.23382" data-verso-hover="349">y</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.23381" data-verso-hover="349">x</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.23384" data-verso-hover="349">dy</span>)<span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.23382" data-verso-hover="349">y</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2)</span></span></span></span></span>
  <span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-11505">fun_trans</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-token.disch-11516">disch</span><span class="unknown token" data-binding="">:=</span><span class="tactic"><label for="tactic-state-7-11523-11530"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.apply-11523" data-verso-hover="357">apply</span> <span class="var token" data-binding="var-_uniq.613" data-verso-hover="354">h</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-11523-11530"><span class="tactic-state">All goals completed! 🐙</span></span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
              Note that the argument to the theorem is <code>(xydxy : (R×R)×(R×R))</code> instead of <code>(x y dx dy : R)</code>. Not writing the product pattern explicitely as <code>((x,y),(dx,dy))</code> on the left hand side of the rule makes it easier for <code>fun_trans</code> to apply this transformation rule.</p>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--User-Defined-Functions">
              2.3.4. User Defined Functions</h2>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Free-Variable-Theorems">
              2.3.5. Free Variable Theorems</h2>
            <p>
              Often we can write down a function transformation rule for a whole class of functions at once. The canonical example of this is that the derivative of liner function is the function itself. For <code class="hl lean inline" data-lean-context="examples"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></code> this is whould be</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-12094" data-verso-hover="162">open</span> <span class="unknown token" data-binding="">SciLean</span>
<span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-12120">theorem</span> <span class="const token" data-binding="const-fwdFDeriv'.linear_rule" data-verso-hover="358" id="fwdFDeriv______linear_rule">fwdFDeriv'.linear_rule</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2192" data-verso-hover="359">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-12233">fun</span> <span class="var token" data-binding="var-_uniq.2273" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.2273" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.2273" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-755433847418768350-12266-12268"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-12266" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-755433847418768350-12266-12268"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2192" data-verso-hover="359">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4360" data-verso-hover="313">xdx</span> =&gt; (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.4360" data-verso-hover="313">xdx</span>.1, <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.4360" data-verso-hover="313">xdx</span>.2)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-5782328957051297113-12271-12288"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-12271" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5782328957051297113-12271-12288"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2192" data-verso-hover="359">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4359" data-verso-hover="313">xdx</span> =&gt; (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.4359" data-verso-hover="313">xdx</span>.1, (∂ <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.4359" data-verso-hover="313">xdx</span>.1) <span class="var token" data-binding="var-_uniq.4359" data-verso-hover="313">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4364" data-verso-hover="313">xdx</span> =&gt; (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.4364" data-verso-hover="313">xdx</span>.1, <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.4364" data-verso-hover="313">xdx</span>.2)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-12290-12299"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-12290">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-12290-12299"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              The characteristic feature of these theorems is that the left hand side of the rule is about a single free variable function <code>f</code> and the theorem has some nontrivial conditions on the function <code>f</code>.</p>
            <p>
              These theorems are potentially dangerous as the left hand side of the theorem can match an arbitrary function. The tactic <code>fun_trans</code> would be incredibly slow if it tried applying these theorems at every step. Therefore "free variable theorems" are applied only in cases when the function that is being transformed can't be written as non-trivial composition of two functions.</p>
            <section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Free-Variable-Theorems--Exercises">
                2.3.5.1. Exercises</h3>
              <ol start="1">
                <li>
                  <p>
                    Write down free variable theorem for differentiating affine function.</p>
                  </li>
                </ol>
              <details class="solution"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-13014">theorem</span> <span class="const token" data-binding="const-fwdFDeriv'.affine_rule" data-verso-hover="361" id="fwdFDeriv______affine_rule">fwdFDeriv'.affine_rule</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-13138">fun</span> <span class="var token" data-binding="var-_uniq.1324" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.1324" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.1324" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="typed token" data-binding="" data-verso-hover="207">0</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-15816296482679133372-13177-13179"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-13177" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-15816296482679133372-13177-13179"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="313">xdx</span> =&gt; (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="313">xdx</span>.1, <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="313">xdx</span>.2<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-17568063899278041006-13182-13199"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-13182" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-17568063899278041006-13182-13199"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36975" data-verso-hover="313">xdx</span> =&gt; (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36975" data-verso-hover="313">xdx</span>.1, (∂ <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36975" data-verso-hover="313">xdx</span>.1) <span class="var token" data-binding="var-_uniq.36975" data-verso-hover="313">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36980" data-verso-hover="313">xdx</span> =&gt; (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36980" data-verso-hover="313">xdx</span>.1, <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36980" data-verso-hover="313">xdx</span>.2<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-6484664736050187406-13201-13214"><span class="keyword token" data-binding="kw-occ-tacticFunext___-13201" data-verso-hover="366">funext</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span><span class="unknown token" data-binding="">)</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6484664736050187406-13201-13214"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-94" checked="checked"><span for="--verso-unique-94" class="goal-name">h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).1, (∂ <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).1) (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).2)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span>(<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).1, <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).2<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0)</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-662228282917621914-13217-13246"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticLet_-13217" data-verso-hover="367">let</span> <span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-13227">fun</span> <span class="var token" data-binding="var-_uniq.2552" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.2552" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="typed token" data-binding="" data-verso-hover="207">0</span><span class="unknown token" data-binding="">)</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-662228282917621914-13217-13246"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-95" checked="checked"><span for="--verso-unique-95" class="goal-name">h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).1, (∂ <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).1) (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).2)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span>(<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).1, <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).2<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0)</span></span></span></span></span></span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticHave_-13249" data-verso-hover="202">have</span> <span class="var token" data-binding="var-_uniq.5368" data-verso-hover="368">hf''</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-15816296482679133372-13290-13292"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-13290" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-15816296482679133372-13290-13292"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="313">xdx</span> =&gt; (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="313">xdx</span>.1, <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="313">xdx</span>.2<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0)</span></span></span></span></span>
    <span class="tactic"><label for="tactic-state-13666187976683582247-13297-13333"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-13297" data-verso-hover="204">simp</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">config</span><span class="unknown token" data-binding="">:=</span><span class="unknown token" data-binding="">{</span><span class="const token" data-binding="const-Lean.Meta.Simp.Config.zetaDelta" data-verso-hover="369">zetaDelta</span><span class="unknown token" data-binding="">:=</span><span class="const token" data-binding="const-Bool.true" data-verso-hover="370">true</span><span class="unknown token" data-binding="">}</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13666187976683582247-13297-13333"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36987" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36987" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span></span></span>
    <span class="tactic"><label for="tactic-state-11666783549857089023-13338-13349"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.constructor-13338" data-verso-hover="371">constructor</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-11666783549857089023-13338-13349"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-98" checked="checked"><span for="--verso-unique-98" class="goal-name">linear</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-IsLinearMap" data-verso-hover="372">IsLinearMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-99"><span for="--verso-unique-99" class="goal-name">cont</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-autoParam" data-verso-hover="150">autoParam</span> (<span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0) <span class="const token" data-binding="const-_auto._@.SciLean.Analysis.Normed.IsContinuousLinearMap._hyg.68" data-verso-hover="151">_auto✝</span></span></span></span></span></span></span>
    <span class="tactic"><label for="tactic-state-8826542832012573419-13354-13356"><span class="unknown token" data-binding="">·</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8826542832012573419-13354-13356"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-100" checked="checked"><span for="--verso-unique-100" class="goal-name">linear</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-IsLinearMap" data-verso-hover="372">IsLinearMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span></span></span></span> <span class="tactic"><label for="tactic-state-7-13357-13367"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.apply-13357" data-verso-hover="357">apply</span> <span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-13357-13367"><span class="tactic-state">All goals completed! 🐙</span></span>
    <span class="tactic"><label for="tactic-state-16794537011701019355-13372-13374"><span class="unknown token" data-binding="">·</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16794537011701019355-13372-13374"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-101" checked="checked"><span for="--verso-unique-101" class="goal-name">cont</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-autoParam" data-verso-hover="150">autoParam</span> (<span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0) <span class="const token" data-binding="const-_auto._@.SciLean.Analysis.Normed.IsContinuousLinearMap._hyg.68" data-verso-hover="151">_auto✝</span></span></span></span></span></span></span> <span class="tactic"><label for="tactic-state-8980427995667212143-13375-13391"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-13375" data-verso-hover="188">unfold</span> <span class="const token" data-binding="const-autoParam" data-verso-hover="150">autoParam</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8980427995667212143-13375-13391"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-102" checked="checked"><span for="--verso-unique-102" class="goal-name">cont</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-13393-13401"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunProp.funPropTacStx-13393" data-verso-hover="255">fun_prop</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-13393-13401"><span class="tactic-state">All goals completed! 🐙</span></span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticHave_-13404" data-verso-hover="202">have</span> <span class="var token" data-binding="var-_uniq.11599" data-verso-hover="373">h</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="unknown token" data-binding="">=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-13417">fun</span> <span class="var token" data-binding="var-_uniq.9663" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.9663" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="typed token" data-binding="" data-verso-hover="207">0</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-15816296482679133372-13439-13441"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-13439" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-15816296482679133372-13439-13441"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="313">xdx</span> =&gt; (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="313">xdx</span>.1, <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="313">xdx</span>.2<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0)</span></span></span></span></span>
    <span class="tactic"><label for="tactic-state-7-13446-13478"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-13446" data-verso-hover="204">simp</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">config</span><span class="unknown token" data-binding="">:=</span><span class="unknown token" data-binding="">{</span><span class="const token" data-binding="const-Lean.Meta.Simp.Config.zetaDelta" data-verso-hover="369">zetaDelta</span><span class="unknown token" data-binding="">:=</span><span class="const token" data-binding="const-Bool.true" data-verso-hover="370">true</span><span class="unknown token" data-binding="">}</span><span class="unknown token" data-binding="">)</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-13446-13478"><span class="tactic-state">All goals completed! 🐙</span></span>
  <span class="tactic"><label for="tactic-state-8417913678748428252-13481-13486"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.rwSeq-13481" data-verso-hover="374">rw</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.11599" data-verso-hover="373">h</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8417913678748428252-13481-13486"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-104" checked="checked"><span for="--verso-unique-104" class="goal-name">h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5368" data-verso-hover="368">hf''</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.11599" data-verso-hover="373">h</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36980" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.36980" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0) (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).1, (∂ (<span class="var token" data-binding="var-_uniq.36997" data-verso-hover="207">x</span>:=(<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).1), (<span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.36997" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0)) (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).2)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> =
  </span>((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.37016" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.37016" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0) (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).1, (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.37039" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.37039" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0) (<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>, <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span>).2<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span>(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.37050" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.37050" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0) 0)</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-7240961911379010954-13489-13498"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-13489">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7240961911379010954-13489-13498"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-105" checked="checked"><span for="--verso-unique-105" class="goal-name">h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.163" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.274" data-verso-hover="317">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.823" data-verso-hover="362">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-IsAffineMap" data-verso-hover="363">IsAffineMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1243" data-verso-hover="364">hf'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Continuous" data-verso-hover="365">Continuous</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.160" data-verso-hover="36">Y</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5368" data-verso-hover="368">hf''</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.IsContinuousLinearMap" data-verso-hover="360">IsContinuousLinearMap</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.11599" data-verso-hover="373">h</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span> =&gt; <span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(∂ (<span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span>:=<span class="var token" data-binding="var-_uniq.2495" data-verso-hover="207">x</span>), (<span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.36976" data-verso-hover="207">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.394" data-verso-hover="286">f</span> 0)) <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.2496" data-verso-hover="207">dx</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.3638" data-verso-hover="286">g</span> 0</span></span></span></span></span></span> -- this does not seem to work :(
  <span class="tactic"><label for="tactic-state-7-13534-13545"><span class="keyword token" data-binding="kw-occ-SciLean.tacticSorry_proof-13534" data-verso-hover="375">sorry_proof</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-13534-13545"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></details></section>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Morphism-Theorems">
              2.3.6. Morphism Theorems</h2>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--Compositional-vs-Simple-Form">
              2.3.7. Compositional vs Simple Form</h2>
            <p>
              There is also an alternative way of fomulating function theorems in so called "compositional form". The idea is that we introduce and auxiliary type <code>W</code> and parametrize every of the function with this type. The "compositional form" of negation theorem</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-13947" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.393" data-verso-hover="376">W</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="376">W</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="376">W</span><span class="unknown token" data-binding="">]</span>

<span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-14015">theorem</span> <span class="const token" data-binding="const-Neg.neg.arg_a0.fwdFDeriv'_rule_compositional" data-verso-hover="377" id="Neg___neg___arg_a0___fwdFDeriv____rule_compositional">Neg.neg.arg_a0.fwdFDeriv'_rule_compositional</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1812" data-verso-hover="323">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-14132">fun</span> <span class="var token" data-binding="var-_uniq.1823" data-verso-hover="379">w</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.1823" data-verso-hover="379">w</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-14162">fun</span> <span class="var token" data-binding="var-_uniq.2070" data-verso-hover="380">wdw</span> <span class="unknown token" data-binding="">=&gt;</span>
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-14179" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.2383" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">:=</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.2070" data-verso-hover="380">wdw</span>
      <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">-</span><span class="var token" data-binding="var-_uniq.2383" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">-</span><span class="var token" data-binding="var-_uniq.2383" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-16237587835229326166-14235-14237"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-14235" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16237587835229326166-14235-14237"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.545" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.550" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.698" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.936" data-verso-hover="381">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1080" data-verso-hover="382">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1812" data-verso-hover="323">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.11644" data-verso-hover="379">w</span> =&gt; <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.11644" data-verso-hover="379">w</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.11651" data-verso-hover="380">wdw</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.11652" data-verso-hover="313">xdx</span> := <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.11651" data-verso-hover="380">wdw</span>;
  (<span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.11652" data-verso-hover="313">xdx</span>.1, <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.11652" data-verso-hover="313">xdx</span>.2)</span></span></span></span></span> <span class="tactic"><label for="tactic-state-17036839771316603175-14238-14255"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-14238" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-17036839771316603175-14238-14255"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.545" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.550" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.698" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.936" data-verso-hover="381">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1080" data-verso-hover="382">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1812" data-verso-hover="323">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.11642" data-verso-hover="380">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.11648" data-verso-hover="379">w</span> =&gt; <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.11648" data-verso-hover="379">w</span>) <span class="var token" data-binding="var-_uniq.11642" data-verso-hover="380">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.11655" data-verso-hover="379">w</span>:=<span class="var token" data-binding="var-_uniq.11642" data-verso-hover="380">xdx</span>.1), <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.11655" data-verso-hover="379">w</span>) <span class="var token" data-binding="var-_uniq.11642" data-verso-hover="380">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.11659" data-verso-hover="380">wdw</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.11664" data-verso-hover="313">xdx</span> := (<span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.11659" data-verso-hover="380">wdw</span>.1, (∂ <span class="var token" data-binding="var-_uniq.1084" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.11659" data-verso-hover="380">wdw</span>.1) <span class="var token" data-binding="var-_uniq.11659" data-verso-hover="380">wdw</span>.2);
  (<span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.11664" data-verso-hover="313">xdx</span>.1, <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.11664" data-verso-hover="313">xdx</span>.2)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-14257-14266"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-14257">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-14257-14266"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              The original form of formulating "function theorems" is called "simple form" or "uncurried form" as for function of multiple arguments has to be uncurried.</p>
            <p>
              In simple cases, it does not really matter which form you use but in more complicated scenarios like dealing with higher order functions the "compositional form" is the only way of formulating the function transformation rules. Also certain function transformations seem to support only "compositional form". At the end of this chapter give an example of such function transformation called <code>vectorize</code>.</p>
            <p>
              The general idea behing the "compositional form" is that we parametrize every argument of the function with some auxiliary type <code>W</code> and then we state the function transformation rule in terms of the argument <code>(w : W)</code>.</p>
            <p>
              The theorem for addition in "simple form"
This form is also called "uncurried form" as the left hand side contains uncurried version for addition <code>fun (x : X×X) =&gt; x.1 + x.2</code>.</p>
            <p>
              The "compositional form" of this theorem is</p>
            <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-15298">theorem</span> <span class="const token" data-binding="const-HAdd.hAdd.arg_a0a1.fwdFDeriv'_rule_compositional" data-verso-hover="383" id="HAdd___hAdd___arg_a0a1___fwdFDeriv____rule_compositional">HAdd.hAdd.arg_a0a1.fwdFDeriv'_rule_compositional</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1276" data-verso-hover="323">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1293" data-verso-hover="324">hg</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="unknown token" data-binding="">(</span><a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-15451">fun</span> <span class="var token" data-binding="var-_uniq.1304" data-verso-hover="379">w</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.1304" data-verso-hover="379">w</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span> <span class="var token" data-binding="var-_uniq.1304" data-verso-hover="379">w</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-15485">fun</span> <span class="var token" data-binding="var-_uniq.2751" data-verso-hover="380">xdx</span> <span class="unknown token" data-binding="">=&gt;</span>
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-15502" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.3064" data-verso-hover="313">ydy</span> <span class="unknown token" data-binding="">:=</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.2751" data-verso-hover="380">xdx</span>
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-15538" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.3375" data-verso-hover="313">zdz</span> <span class="unknown token" data-binding="">:=</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span> <span class="var token" data-binding="var-_uniq.2751" data-verso-hover="380">xdx</span>
      <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3064" data-verso-hover="313">ydy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.3375" data-verso-hover="313">zdz</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.3064" data-verso-hover="313">ydy</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.3375" data-verso-hover="313">zdz</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-16923444035929154466-15608-15610"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-15608" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16923444035929154466-15608-15610"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.396" data-verso-hover="381">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.540" data-verso-hover="382">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1276" data-verso-hover="323">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1293" data-verso-hover="324">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.19784" data-verso-hover="379">w</span> =&gt; <span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.19784" data-verso-hover="379">w</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span> <span class="var token" data-binding="var-_uniq.19784" data-verso-hover="379">w</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.19797" data-verso-hover="380">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.19798" data-verso-hover="313">ydy</span> := <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.19797" data-verso-hover="380">xdx</span>;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.19799" data-verso-hover="313">zdz</span> := <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span> <span class="var token" data-binding="var-_uniq.19797" data-verso-hover="380">xdx</span>;
  (<span class="var token" data-binding="var-_uniq.19798" data-verso-hover="313">ydy</span>.1<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.19799" data-verso-hover="313">zdz</span>.1, <span class="var token" data-binding="var-_uniq.19798" data-verso-hover="313">ydy</span>.2<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.19799" data-verso-hover="313">zdz</span>.2)</span></span></span></span></span> <span class="tactic"><label for="tactic-state-15382390268711675709-15611-15628"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-15611" data-verso-hover="188">unfold</span> <a href="#fwdFDeriv___"><span class="const token" data-binding="const-fwdFDeriv'" data-verso-hover="312">fwdFDeriv'</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-15382390268711675709-15611-15628"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.396" data-verso-hover="381">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.540" data-verso-hover="382">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="36">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1276" data-verso-hover="323">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1293" data-verso-hover="324">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.19782" data-verso-hover="380">xdx</span> =&gt; ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.19788" data-verso-hover="379">w</span> =&gt; <span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.19788" data-verso-hover="379">w</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span> <span class="var token" data-binding="var-_uniq.19788" data-verso-hover="379">w</span>) <span class="var token" data-binding="var-_uniq.19782" data-verso-hover="380">xdx</span>.1, (∂ (<span class="var token" data-binding="var-_uniq.19801" data-verso-hover="379">w</span>:=<span class="var token" data-binding="var-_uniq.19782" data-verso-hover="380">xdx</span>.1), (<span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.19801" data-verso-hover="379">w</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span> <span class="var token" data-binding="var-_uniq.19801" data-verso-hover="379">w</span>)) <span class="var token" data-binding="var-_uniq.19782" data-verso-hover="380">xdx</span>.2))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.19808" data-verso-hover="380">xdx</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.19813" data-verso-hover="313">ydy</span> := (<span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.19808" data-verso-hover="380">xdx</span>.1, (∂ <span class="var token" data-binding="var-_uniq.544" data-verso-hover="378">f</span> <span class="var token" data-binding="var-_uniq.19808" data-verso-hover="380">xdx</span>.1) <span class="var token" data-binding="var-_uniq.19808" data-verso-hover="380">xdx</span>.2);
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.19818" data-verso-hover="313">zdz</span> := (<span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span> <span class="var token" data-binding="var-_uniq.19808" data-verso-hover="380">xdx</span>.1, (∂ <span class="var token" data-binding="var-_uniq.548" data-verso-hover="378">g</span> <span class="var token" data-binding="var-_uniq.19808" data-verso-hover="380">xdx</span>.1) <span class="var token" data-binding="var-_uniq.19808" data-verso-hover="380">xdx</span>.2);
  (<span class="var token" data-binding="var-_uniq.19813" data-verso-hover="313">ydy</span>.1<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.19818" data-verso-hover="313">zdz</span>.1, <span class="var token" data-binding="var-_uniq.19813" data-verso-hover="313">ydy</span>.2<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.19818" data-verso-hover="313">zdz</span>.2)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-15630-15639"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-15630">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-15630-15639"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--High-Order-Functions">
              2.3.8. High Order Functions</h2>
            <p>
              Higher order functions are functions that accept function as an input. For example <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">@</span><span class="const token" data-binding="const-SciLean.DataArrayN.mapMono" data-verso-hover="89">DataArrayN.mapMono</span></code> is a function that accepts an array and a function that is applied to every element of that array. It can happen that the function depends on a parameter we are differentiating with respect to. For example</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ s, DataArrayN.mapMono (fun x =&gt; s * x + s) ⊞[1.0, 2.0, 3.0] : Float → Float^[3]</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-16077">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="47">s</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">2.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">3.0</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-SciLean.DataArrayN.mapMono" data-verso-hover="89">mapMono</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-16127">fun</span> <span class="var token" data-binding="var-_uniq.724" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.546" data-verso-hover="47">s</span> <span class="unknown token" data-binding="">*</span> <span class="var token" data-binding="var-_uniq.724" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.546" data-verso-hover="47">s</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
              In this section we will show how to write differentiation rules for higher order functions.</p>
            <p>
              Let's consider possibly the simplest high order function which is function application</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-16340">def</span> <span class="const token" data-binding="const-HighOrderFunctions.apply" data-verso-hover="384" id="HighOrderFunctions___apply">apply</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.544" data-verso-hover="385">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.544" data-verso-hover="385">f</span> <span class="var token" data-binding="var-_uniq.546" data-verso-hover="207">x</span>
<span class="unknown token" data-binding=""></span></code><p>
              We want to state that this function is differentiable in <code>f</code> and <code>x</code>. There is an issue, the function <code>f</code> can be arbitrary and differentiability in <code>x</code> is saying that <code>f</code> is differentiable. Therefore we somehow need to constrain the function <code>f</code>. The easiest way of doing this is to state differentiability of <code class="hl lean inline" data-lean-context="examples"><a href="#HighOrderFunctions___apply"><span class="const token" data-binding="const-HighOrderFunctions.apply" data-verso-hover="384">apply</span></a></code> in compositional form. The idea is that once we have a concrete example the function <code>f</code> and argument <code>x</code> will be parametrizes by some number <code>w</code>. For example</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun w =&gt; apply (fun x =&gt; w * x + w) (1 + w) : R → R</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-16874">#check</span></span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-16881">fun</span> <span class="var token" data-binding="var-_uniq.542" data-verso-hover="349">w</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="#HighOrderFunctions___apply"><span class="const token" data-binding="const-HighOrderFunctions.apply" data-verso-hover="384">apply</span></a> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-16901">fun</span> <span class="var token" data-binding="var-_uniq.545" data-verso-hover="349">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.542" data-verso-hover="349">w</span> <span class="unknown token" data-binding="">*</span> <span class="var token" data-binding="var-_uniq.545" data-verso-hover="349">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.542" data-verso-hover="349">w</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="349">1</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.542" data-verso-hover="349">w</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
              Now it is sufficient to require that <code>x </code> is differentiable as function in <code>w</code> and <code>f</code> is differentiable in <code>x</code> and <code>w</code>. This is exactly expressed in the following theorem</p>
            <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_prop</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-17129">theorem</span> <span class="const token" data-binding="const-HighOrderFunctions.apply.arg_fx.Differentiable_rule" data-verso-hover="386" id="HighOrderFunctions___apply___arg_fx___Differentiable_rule">apply.arg_fx.Differentiable_rule</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2781" data-verso-hover="344">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">↿</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2990" data-verso-hover="388">hx</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-17293">fun</span> <span class="var token" data-binding="var-_uniq.3006" data-verso-hover="379">w</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="#HighOrderFunctions___apply"><span class="const token" data-binding="const-HighOrderFunctions.apply" data-verso-hover="384">apply</span></a> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span> <span class="var token" data-binding="var-_uniq.3006" data-verso-hover="379">w</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.3006" data-verso-hover="379">w</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-17251768161071712928-17324-17326"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-17324" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-17251768161071712928-17324-17326"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type u_1</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.396" data-verso-hover="381">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.540" data-verso-hover="382">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2781" data-verso-hover="344">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">↿</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2990" data-verso-hover="388">hx</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3668" data-verso-hover="379">w</span> =&gt; <a href="#HighOrderFunctions___apply"><span class="const token" data-binding="const-HighOrderFunctions.apply" data-verso-hover="384">apply</span></a> (<span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span> <span class="var token" data-binding="var-_uniq.3668" data-verso-hover="379">w</span>) (<span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.3668" data-verso-hover="379">w</span>)</span></span></span></span></span> <span class="tactic"><label for="tactic-state-10789764674168420297-17327-17339"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-17327" data-verso-hover="188">unfold</span> <a href="#HighOrderFunctions___apply"><span class="const token" data-binding="const-HighOrderFunctions.apply" data-verso-hover="384">apply</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-10789764674168420297-17327-17339"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type u_1</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.396" data-verso-hover="381">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.540" data-verso-hover="382">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2781" data-verso-hover="344">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">↿</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2990" data-verso-hover="388">hx</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.3667" data-verso-hover="379">w</span> =&gt; <span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span> <span class="var token" data-binding="var-_uniq.3667" data-verso-hover="379">w</span> (<span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.3667" data-verso-hover="379">w</span>)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-17341-17349"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunProp.funPropTacStx-17341" data-verso-hover="255">fun_prop</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-17341-17349"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              Therefore, the general idea is that if a function has a function argument <code>f : X → Y</code> we need to parametrize it by some axiliary type <code>W</code>, <code>f : W → X → Y</code>, and require that such function is differentiable in <code>x</code> and <code>w</code> similatiously, <code>hf : Differentiable R (↿f)</code>.</p>
            <p>
              When writing theorem for differentiation we do something similar. We compute the derivative <code>fwdFDeriv R (↿f)</code></p>
            <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-17762">theorem</span> <span class="const token" data-binding="const-HighOrderFunctions.apply.arg_fx.fwdFDeriv_rule" data-verso-hover="389" id="HighOrderFunctions___apply___arg_fx___fwdFDeriv_rule">apply.arg_fx.fwdFDeriv_rule</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2781" data-verso-hover="344">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">↿</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2990" data-verso-hover="388">hx</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="const token" data-binding="const-SciLean.fwdFDeriv" data-verso-hover="299">fwdFDeriv</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-17916">fun</span> <span class="var token" data-binding="var-_uniq.3005" data-verso-hover="379">w</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="#HighOrderFunctions___apply"><span class="const token" data-binding="const-HighOrderFunctions.apply" data-verso-hover="384">apply</span></a> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span> <span class="var token" data-binding="var-_uniq.3005" data-verso-hover="379">w</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.3005" data-verso-hover="379">w</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-17954">fun</span> <span class="var token" data-binding="var-_uniq.3104" data-verso-hover="379">w</span> <span class="var token" data-binding="var-_uniq.3107" data-verso-hover="379">dw</span> <span class="unknown token" data-binding="">=&gt;</span>
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-17972" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.3433" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-SciLean.fwdFDeriv" data-verso-hover="299">fwdFDeriv</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.3104" data-verso-hover="379">w</span> <span class="var token" data-binding="var-_uniq.3107" data-verso-hover="379">dw</span>
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-18008" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.3696" data-verso-hover="390">f'</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-18018">fun</span> <span class="var token" data-binding="var-_uniq.3439" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">=&gt;</span>
        <span class="const token" data-binding="const-SciLean.fwdFDeriv" data-verso-hover="299">fwdFDeriv</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">↿</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3104" data-verso-hover="379">w</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.3439" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3107" data-verso-hover="379">dw</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.3439" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span>
      <a href="#HighOrderFunctions___apply"><span class="const token" data-binding="const-HighOrderFunctions.apply" data-verso-hover="384">apply</span></a> <span class="var token" data-binding="var-_uniq.3696" data-verso-hover="390">f'</span> <span class="var token" data-binding="var-_uniq.3433" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-13118276983571336492-18106-18108"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-18106" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13118276983571336492-18106-18108"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.158" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type u_1</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.396" data-verso-hover="381">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.540" data-verso-hover="382">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2781" data-verso-hover="344">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">↿</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.393" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.7" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2990" data-verso-hover="388">hx</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∂&gt; <span class="var token" data-binding="var-_uniq.17054" data-verso-hover="379">w</span>, <a href="#HighOrderFunctions___apply"><span class="const token" data-binding="const-HighOrderFunctions.apply" data-verso-hover="384">apply</span></a> (<span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span> <span class="var token" data-binding="var-_uniq.17054" data-verso-hover="379">w</span>) (<span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.17054" data-verso-hover="379">w</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.17068" data-verso-hover="379">w</span> <span class="var token" data-binding="var-_uniq.17072" data-verso-hover="379">dw</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.17086" data-verso-hover="313">xdx</span> := ∂&gt; <span class="var token" data-binding="var-_uniq.2785" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.17068" data-verso-hover="379">w</span> <span class="var token" data-binding="var-_uniq.17072" data-verso-hover="379">dw</span>;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.17120" data-verso-hover="390">f'</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.17088" data-verso-hover="313">xdx</span> =&gt; ∂&gt; (<span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">↿</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="387">f</span>) (<span class="var token" data-binding="var-_uniq.17068" data-verso-hover="379">w</span>, <span class="var token" data-binding="var-_uniq.17088" data-verso-hover="313">xdx</span>.1) (<span class="var token" data-binding="var-_uniq.17072" data-verso-hover="379">dw</span>, <span class="var token" data-binding="var-_uniq.17088" data-verso-hover="313">xdx</span>.2);
  <a href="#HighOrderFunctions___apply"><span class="const token" data-binding="const-HighOrderFunctions.apply" data-verso-hover="384">apply</span></a> <span class="var token" data-binding="var-_uniq.17120" data-verso-hover="390">f'</span> <span class="var token" data-binding="var-_uniq.17086" data-verso-hover="313">xdx</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-7-18111-18155"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-18111">fun_trans</span><span class="unknown token" data-binding="">[</span><a href="#HighOrderFunctions___apply"><span class="const token" data-binding="const-HighOrderFunctions.apply" data-verso-hover="384">apply</span></a><span class="unknown token" data-binding="">,</span><span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">Function.HasUncurry.uncurry</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-18111-18155"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Function-Transformation--High-Order-Functions--Exercises">
                2.3.8.1. Exercises</h3>
              <ol start="1">
                <li>
                  <p>
                    Define function <code>applyTwice f x = f (f x)</code> and state its differentiability and derivative rule</p>
                  </li>
                </ol>
              <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-18321">def</span> <span class="const token" data-binding="const-HighOrderFunctions.applyTwice" data-verso-hover="391" id="HighOrderFunctions___applyTwice">applyTwice</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.544" data-verso-hover="385">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.546" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.544" data-verso-hover="385">f</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.544" data-verso-hover="385">f</span> <span class="var token" data-binding="var-_uniq.546" data-verso-hover="207">x</span><span class="unknown token" data-binding="">)</span>

<span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_prop</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-18382">theorem</span> <span class="const token" data-binding="const-HighOrderFunctions.applyTwice.arg_fx.Differentiable_rule" data-verso-hover="392" id="HighOrderFunctions___applyTwice">applyTwice.arg_fx.Differentiable_rule</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1122" data-verso-hover="387">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3357" data-verso-hover="344">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">↿</span><span class="var token" data-binding="var-_uniq.1122" data-verso-hover="387">f</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3361" data-verso-hover="378">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3566" data-verso-hover="388">hx</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.3361" data-verso-hover="378">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-18551">fun</span> <span class="var token" data-binding="var-_uniq.3582" data-verso-hover="379">w</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="#HighOrderFunctions___applyTwice"><span class="const token" data-binding="const-HighOrderFunctions.applyTwice" data-verso-hover="391">applyTwice</span></a> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1122" data-verso-hover="387">f</span> <span class="var token" data-binding="var-_uniq.3582" data-verso-hover="379">w</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3361" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.3582" data-verso-hover="379">w</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-10638800865993026832-18587-18589"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-18587" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-10638800865993026832-18587-18589"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.581" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.586" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.734" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type u_1</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.972" data-verso-hover="381">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1116" data-verso-hover="382">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1122" data-verso-hover="387">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3357" data-verso-hover="344">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">↿</span><span class="var token" data-binding="var-_uniq.1122" data-verso-hover="387">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3361" data-verso-hover="378">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3566" data-verso-hover="388">hx</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.3361" data-verso-hover="378">x</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="379">w</span> =&gt; <a href="#HighOrderFunctions___applyTwice"><span class="const token" data-binding="const-HighOrderFunctions.applyTwice" data-verso-hover="391">applyTwice</span></a> (<span class="var token" data-binding="var-_uniq.1122" data-verso-hover="387">f</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="379">w</span>) (<span class="var token" data-binding="var-_uniq.3361" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="379">w</span>)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-5804754872468614730-18592-18609"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-18592" data-verso-hover="188">unfold</span> <a href="#HighOrderFunctions___applyTwice"><span class="const token" data-binding="const-HighOrderFunctions.applyTwice" data-verso-hover="391">applyTwice</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5804754872468614730-18592-18609"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.581" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.586" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.734" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type u_1</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.972" data-verso-hover="381">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1116" data-verso-hover="382">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1122" data-verso-hover="387">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3357" data-verso-hover="344">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">↿</span><span class="var token" data-binding="var-_uniq.1122" data-verso-hover="387">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3361" data-verso-hover="378">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3566" data-verso-hover="388">hx</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.3361" data-verso-hover="378">x</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.4367" data-verso-hover="379">w</span> =&gt; <span class="var token" data-binding="var-_uniq.1122" data-verso-hover="387">f</span> <span class="var token" data-binding="var-_uniq.4367" data-verso-hover="379">w</span> (<span class="var token" data-binding="var-_uniq.1122" data-verso-hover="387">f</span> <span class="var token" data-binding="var-_uniq.4367" data-verso-hover="379">w</span> (<span class="var token" data-binding="var-_uniq.3361" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.4367" data-verso-hover="379">w</span>))</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-7-18612-18620"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunProp.funPropTacStx-18612" data-verso-hover="255">fun_prop</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-18612-18620"><span class="tactic-state">All goals completed! 🐙</span></span>

<span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-18635">theorem</span> <span class="const token" data-binding="const-HighOrderFunctions.applyTwice.arg_fx.fwdFDeriv_rule" data-verso-hover="393" id="HighOrderFunctions___applyTwice">applyTwice.arg_fx.fwdFDeriv_rule</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4912" data-verso-hover="387">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.7147" data-verso-hover="344">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">↿</span><span class="var token" data-binding="var-_uniq.4912" data-verso-hover="387">f</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.7151" data-verso-hover="378">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.7356" data-verso-hover="388">hx</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7151" data-verso-hover="378">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="const token" data-binding="const-SciLean.fwdFDeriv" data-verso-hover="299">fwdFDeriv</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-18794">fun</span> <span class="var token" data-binding="var-_uniq.7371" data-verso-hover="379">w</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="#HighOrderFunctions___applyTwice"><span class="const token" data-binding="const-HighOrderFunctions.applyTwice" data-verso-hover="391">applyTwice</span></a> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4912" data-verso-hover="387">f</span> <span class="var token" data-binding="var-_uniq.7371" data-verso-hover="379">w</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.7151" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.7371" data-verso-hover="379">w</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-18837">fun</span> <span class="var token" data-binding="var-_uniq.7470" data-verso-hover="379">w</span> <span class="var token" data-binding="var-_uniq.7473" data-verso-hover="379">dw</span> <span class="unknown token" data-binding="">=&gt;</span>
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-18855" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.7799" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-SciLean.fwdFDeriv" data-verso-hover="299">fwdFDeriv</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7151" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.7470" data-verso-hover="379">w</span> <span class="var token" data-binding="var-_uniq.7473" data-verso-hover="379">dw</span>
      <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-18891" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.8064" data-verso-hover="390">f'</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-18901">fun</span> <span class="var token" data-binding="var-_uniq.7805" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span><span class="unknown token" data-binding="">×</span><span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">=&gt;</span>
        <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-SciLean.fwdFDeriv" data-verso-hover="299">fwdFDeriv</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="unknown token" data-binding="">↿</span><span class="var token" data-binding="var-_uniq.4912" data-verso-hover="387">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.7470" data-verso-hover="379">w</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.7805" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.7473" data-verso-hover="379">dw</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.7805" data-verso-hover="313">xdx</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">)</span>
      <a href="#HighOrderFunctions___applyTwice"><span class="const token" data-binding="const-HighOrderFunctions.applyTwice" data-verso-hover="391">applyTwice</span></a> <span class="var token" data-binding="var-_uniq.8064" data-verso-hover="390">f'</span> <span class="var token" data-binding="var-_uniq.7799" data-verso-hover="313">xdx</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-3397764759417674647-18994-18996"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-18994" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3397764759417674647-18994-18996"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4371" data-verso-hover="314">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-SciLean.RealScalar" data-verso-hover="315">RealScalar</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4376" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4524" data-verso-hover="316">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type u_1</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4762" data-verso-hover="381">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4906" data-verso-hover="382">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4912" data-verso-hover="387">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7147" data-verso-hover="344">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">↿</span><span class="var token" data-binding="var-_uniq.4912" data-verso-hover="387">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7151" data-verso-hover="378">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.969" data-verso-hover="129">W</span> → <span class="var token" data-binding="var-_uniq.583" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.7356" data-verso-hover="388">hx</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.578" data-verso-hover="36">R</span> <span class="var token" data-binding="var-_uniq.7151" data-verso-hover="378">x</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∂&gt; <span class="var token" data-binding="var-_uniq.24571" data-verso-hover="379">w</span>, <a href="#HighOrderFunctions___applyTwice"><span class="const token" data-binding="const-HighOrderFunctions.applyTwice" data-verso-hover="391">applyTwice</span></a> (<span class="var token" data-binding="var-_uniq.4912" data-verso-hover="387">f</span> <span class="var token" data-binding="var-_uniq.24571" data-verso-hover="379">w</span>) (<span class="var token" data-binding="var-_uniq.7151" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.24571" data-verso-hover="379">w</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.24585" data-verso-hover="379">w</span> <span class="var token" data-binding="var-_uniq.24589" data-verso-hover="379">dw</span> =&gt;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.24603" data-verso-hover="313">xdx</span> := ∂&gt; <span class="var token" data-binding="var-_uniq.7151" data-verso-hover="378">x</span> <span class="var token" data-binding="var-_uniq.24585" data-verso-hover="379">w</span> <span class="var token" data-binding="var-_uniq.24589" data-verso-hover="379">dw</span>;
  <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.24637" data-verso-hover="390">f'</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.24605" data-verso-hover="313">xdx</span> =&gt; ∂&gt; (<span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">↿</span><span class="var token" data-binding="var-_uniq.4912" data-verso-hover="387">f</span>) (<span class="var token" data-binding="var-_uniq.24585" data-verso-hover="379">w</span>, <span class="var token" data-binding="var-_uniq.24605" data-verso-hover="313">xdx</span>.1) (<span class="var token" data-binding="var-_uniq.24589" data-verso-hover="379">dw</span>, <span class="var token" data-binding="var-_uniq.24605" data-verso-hover="313">xdx</span>.2);
  <a href="#HighOrderFunctions___applyTwice"><span class="const token" data-binding="const-HighOrderFunctions.applyTwice" data-verso-hover="391">applyTwice</span></a> <span class="var token" data-binding="var-_uniq.24637" data-verso-hover="390">f'</span> <span class="var token" data-binding="var-_uniq.24603" data-verso-hover="313">xdx</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-7-18999-19048"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-18999">fun_trans</span><span class="unknown token" data-binding="">[</span><a href="#HighOrderFunctions___applyTwice"><span class="const token" data-binding="const-HighOrderFunctions.applyTwice" data-verso-hover="391">applyTwice</span></a><span class="unknown token" data-binding="">,</span><span class="const token" data-binding="const-Function.HasUncurry.uncurry" data-verso-hover="304">Function.HasUncurry.uncurry</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-18999-19048"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></details><p>
                We can't even state the simple version of this theorems</p>
              </section>
            </section>
          </section>
        </main></div>
    </body>
  </html>

