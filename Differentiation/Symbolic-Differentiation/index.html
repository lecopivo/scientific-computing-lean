<!DOCTYPE html>
<html>
  <head>
    <script>
      (function(){
  const {protocol:proto, host:hostName, pathname:path, search:srch, hash:hsh} = window.location;
  if (!(path.endsWith("/") || path.endsWith(".html"))) {
    window.location.replace(`${proto}//${hostName}${path}/${srch}${hsh}`);
  }
})()</script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Symbolic Differentiation</title><link rel="stylesheet" href="../../book.css">
    <script>
      
function saveCheckboxesInit() {
  for (checkbox of document.querySelectorAll('#toc input[type="checkbox"]')) {
    const value = localStorage.getItem(checkbox.id);

    // Treat the ToC toggle specially, because it should always default to
    // closed on mobile-width screens but respect user preference on desktop-width.
    if (checkbox.id === "toggle-toc" && window.matchMedia("(max-width: 700px)").matches) {
        checkbox.checked = false;
    } else if (value === "true") {
        checkbox.checked = true;
    } else if (value === "false") {
        checkbox.checked = false;
    } // if not found, do nothing

    checkbox.addEventListener("change", persistCheckbox);
  }
}

function persistCheckbox() {
  const value = this.checked; // in a handler, 'this' is the element with the handler on it
  const id = this.id;
  localStorage.setItem(this.id, value ? "true" : "false");
}

window.addEventListener("DOMContentLoaded", saveCheckboxesInit);
</script>
    <script>
      const __versoSiteRoot = "./../../"</script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <script src="../../static/katex/katex.min.js"></script>
    <script src="../../static/math.js"></script>
    <script src="../../static/print.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../-verso-js/popper.js"></script>
    <script src="../../-verso-js/tippy.js"></script>
    <link rel="stylesheet" href="../../static/colors.css">
    <link rel="stylesheet" href="../../static/theme.css">
    <link rel="stylesheet" href="../../static/print.css">
    <link rel="stylesheet" href="../../static/fonts/source-serif/source-serif-text.css">
    <link rel="stylesheet" href="../../static/fonts/source-code-pro/source-code-pro.css">
    <link rel="stylesheet" href="../../static/katex/katex.min.css">
    <link rel="stylesheet" href="../../-verso-css/tippy-border.css">
    <style>

.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
}

.hl.lean .keyword {
  font-weight : bold;
}

.hl.lean .var {
  font-style: italic;
  position: relative;
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}

.hl.lean a:hover {
  text-decoration: currentcolor underline solid;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 300;
  font-size: inherit;
}

.hl.lean .hover-info.messages {
  max-height: 10rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5rem 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5rem;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1rem;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0rem;
}

/*
@media (hover: hover) {
  .hl.lean .has-info:hover > .hover-container > .hover-info:not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .has-info:hover > .hover-container > .hover-info,
  .hl.lean .token:hover > .hover-container > .hover-info:not(.has-info *):not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .token:hover > .hover-container > .hover-info:not(.has-info *) {
    display: inline-block;
    position: absolute;
    top: 1rem;
    font-weight: normal;
    font-style: normal;
    width: min-content;
  }
}
*/

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
  white-space: pre-wrap;
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover, .hl.lean .token.typed:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: 0.1rem;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error {
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error pre {
    color: red;
}

.hl.lean .has-info.warning {
  text-decoration-color: #efd871;
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color: #efd871;
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: #efd871;
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #efd871;
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.info {
  text-decoration-color: blue;
}

@media (hover: hover) {
  .hl.lean .has-info.info:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.info {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.info {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: sans-serif;
  white-space: normal;
  max-width: 40rem;
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: monospace;
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  left: 2rem;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1rem;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
  z-index: 200;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: block;
}

/*
@media (hover: hover) {
  .hl.lean .tactic:hover > .tactic-toggle:not(:checked) ~ .tactic-state {
    display: block;
    position: absolute;
    left: 0;
    transform: translate(0.25rem, 0);
    z-index: 250;
  }
}
*/

.hl.lean .tactic > label {
  position: relative;
  transition: all 0.5s;
}

@media (hover: hover) {
  .hl.lean .tactic > label:hover {
    border-bottom: 1px dotted #bbbbbb;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  border-radius: 1rem;
  height: 0.25rem;
  vertical-align: middle;
  width: 0.6rem;
  margin-left: 0.1rem;
  margin-right: 0.1rem;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5rem;
}

.hl.lean .tactic-state summary {
  margin-left: -0.5rem;
}

.hl.lean .tactic-state details {
  padding-left: 0.5rem;
}

.hl.lean .case-label {
  display: block;
  position: relative;
}

.hl.lean .case-label input[type="checkbox"] {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .case-label:has(input[type="checkbox"])::before {
  width: 1rem;
  height: 1rem;
  display: inline-block;
  background-color: black;
  content: ' ';
  transition: ease 0.2s;
  margin-right: 0.7rem;
  clip-path: polygon(100% 0, 0 0, 50% 100%);
  width: 0.6rem;
  height: 0.6rem;
}

.hl.lean .case-label:has(input[type="checkbox"]:not(:checked))::before {
  transform: rotate(-90deg);
}

.hl.lean .case-label:has(input[type="checkbox"]) {

}

.hl.lean .case-label:has(input[type="checkbox"]:checked) {

}


.hl.lean .tactic-state .labeled-case > :not(:first-child) {
  max-height: 0px;
  display: block;
  overflow: hidden;
  transition: max-height 0.1s ease-in;
  margin-left: 0.5rem;
  margin-top: 0.1rem;
}

.hl.lean .labeled-case:has(.case-label input[type="checkbox"]:checked) > :not(:first-child) {
  max-height: 100%;
}


.hl.lean .tactic-state .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .tactic-state .goal-name {
  font-style: italic;
  font-family: monospace;
}

.hl.lean .tactic-state .hypotheses {
  display: table;
}

.hl.lean .tactic-state .hypothesis {
  display: table-row;
}

.hl.lean .tactic-state .hypothesis > * {
  display: table-cell;
}


.hl.lean .tactic-state .hypotheses .colon {
  text-align: center;
  min-width: 1rem;
}

.hl.lean .tactic-state .hypotheses .name {
  text-align: right;
}

.hl.lean .tactic-state .hypotheses .name,
.hl.lean .tactic-state .hypotheses .type,
.hl.lean .tactic-state .conclusion .type {
  font-family: monospace;
}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #efd871;
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}



.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

</style><style>
.namedocs {
  position: relative;
  border: solid 2px #99b3c0;
  background-color: #99b3c0;
  padding-left: 1px;
  padding-right: 1px;
  padding-bottom: 1px;
  padding-top: 1.5rem;
  margin-bottom: 1rem;
}

.namedocs .text {
  background-color: white;
  padding: 1.5rem;
  margin-top: 0.5rem;
}

.namedocs .text > pre {
  overflow-x: auto;
}

.namedocs .signature {
  font-family: var(--verso-code-font-family);
  font-size: larger;
  margin-top: 0 !important;
  margin-left: 1.5rem !important;
  margin-right: 1.5rem;
}

.namedocs .label {
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
  position: absolute;
  right: 0.5rem;
  top: 0.5rem;
}

/* Sticking content into the right margin is not good on narrow screens,
   so move the label to the left to make space for the permalink widget. */

@media screen and (max-width: 700px) {
  .namedocs:has(.permalink-widget.block) .label {
    right: 1.5rem;
  }
}

.namedocs h1 {
  font-size: inherit;
  font-weight: bold;
}

.namedocs > .text .constructor {
  padding-left: 0.5rem;
  padding-top: 0;
  padding-right: 0;
  padding-bottom: 0;
  margin-top: 0.5rem;
  margin-bottom: 1.5rem;
}

.namedocs > .text .constructor::before {
  content: '| ';
  display: block;
  font-family: var(--verso-code-font-family);
  font-weight: bold;
  float: left;
  width: 0.5rem;
  white-space: pre;
}

.namedocs > .text .constructor .name-and-type {
  padding-left: 0.5rem;
  float: left;
  margin-top: 0;
}
.namedocs > .text .constructor .docs {
  clear: both;
  padding-left: 1rem;
}


.namedocs .methods td, .namedocs .fields td {
  vertical-align: top;
}
.namedocs .inheritance {
  vertical-align: top;
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
}
.namedocs .inheritance ol {
  display: inline-block;
  margin: 0;
  padding: 0;
}
.namedocs .inheritance ol li {
  list-style-type: none;
  display: inline-block;
}
.namedocs .inheritance ol li::after {
  content: " > "
}
.namedocs .inheritance ol li:last-child::after {
  content: "";
}

.namedocs .extends {
  display: inline;
  margin: 0;
  padding: 0;
}

.namedocs .extends li {
  list-style-type: none;
  display: inline-block;
}

.namedocs .extends li label {
  padding-right: 1rem;
}

.namedocs .subdocs .name-and-type {
  font-size: 1rem;
  margin-left: 0;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs .subdocs .docs {
  margin-left: 1.5rem;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs:has(input[data-parent-idx]) [data-inherited-from] {
  transition-property: opacity, display;
  transition-duration: 0.4s;
  transition-behavior: allow-discrete;
  @starting-style { opacity: 0 !important; }
}
.namedocs:has(input[data-parent-idx="0"]) [data-inherited-from="0"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="0"]:checked) [data-inherited-from="0"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="0"]:checked):has(.inheritance[data-inherited-from="0"]:hover) [data-inherited-from]:not([data-inherited-from="0"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="1"]) [data-inherited-from="1"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="1"]:checked) [data-inherited-from="1"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="1"]:checked):has(.inheritance[data-inherited-from="1"]:hover) [data-inherited-from]:not([data-inherited-from="1"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="2"]) [data-inherited-from="2"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="2"]:checked) [data-inherited-from="2"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="2"]:checked):has(.inheritance[data-inherited-from="2"]:hover) [data-inherited-from]:not([data-inherited-from="2"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="3"]) [data-inherited-from="3"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="3"]:checked) [data-inherited-from="3"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="3"]:checked):has(.inheritance[data-inherited-from="3"]:hover) [data-inherited-from]:not([data-inherited-from="3"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="4"]) [data-inherited-from="4"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="4"]:checked) [data-inherited-from="4"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="4"]:checked):has(.inheritance[data-inherited-from="4"]:hover) [data-inherited-from]:not([data-inherited-from="4"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="5"]) [data-inherited-from="5"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="5"]:checked) [data-inherited-from="5"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="5"]:checked):has(.inheritance[data-inherited-from="5"]:hover) [data-inherited-from]:not([data-inherited-from="5"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="6"]) [data-inherited-from="6"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="6"]:checked) [data-inherited-from="6"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="6"]:checked):has(.inheritance[data-inherited-from="6"]:hover) [data-inherited-from]:not([data-inherited-from="6"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="7"]) [data-inherited-from="7"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="7"]:checked) [data-inherited-from="7"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="7"]:checked):has(.inheritance[data-inherited-from="7"]:hover) [data-inherited-from]:not([data-inherited-from="7"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="8"]) [data-inherited-from="8"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="8"]:checked) [data-inherited-from="8"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="8"]:checked):has(.inheritance[data-inherited-from="8"]:hover) [data-inherited-from]:not([data-inherited-from="8"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="9"]) [data-inherited-from="9"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="9"]:checked) [data-inherited-from="9"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="9"]:checked):has(.inheritance[data-inherited-from="9"]:hover) [data-inherited-from]:not([data-inherited-from="9"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="10"]) [data-inherited-from="10"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="10"]:checked) [data-inherited-from="10"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="10"]:checked):has(.inheritance[data-inherited-from="10"]:hover) [data-inherited-from]:not([data-inherited-from="10"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="11"]) [data-inherited-from="11"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="11"]:checked) [data-inherited-from="11"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="11"]:checked):has(.inheritance[data-inherited-from="11"]:hover) [data-inherited-from]:not([data-inherited-from="11"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="12"]) [data-inherited-from="12"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="12"]:checked) [data-inherited-from="12"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="12"]:checked):has(.inheritance[data-inherited-from="12"]:hover) [data-inherited-from]:not([data-inherited-from="12"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="13"]) [data-inherited-from="13"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="13"]:checked) [data-inherited-from="13"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="13"]:checked):has(.inheritance[data-inherited-from="13"]:hover) [data-inherited-from]:not([data-inherited-from="13"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="14"]) [data-inherited-from="14"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="14"]:checked) [data-inherited-from="14"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="14"]:checked):has(.inheritance[data-inherited-from="14"]:hover) [data-inherited-from]:not([data-inherited-from="14"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="15"]) [data-inherited-from="15"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="15"]:checked) [data-inherited-from="15"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="15"]:checked):has(.inheritance[data-inherited-from="15"]:hover) [data-inherited-from]:not([data-inherited-from="15"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="16"]) [data-inherited-from="16"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="16"]:checked) [data-inherited-from="16"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="16"]:checked):has(.inheritance[data-inherited-from="16"]:hover) [data-inherited-from]:not([data-inherited-from="16"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="17"]) [data-inherited-from="17"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="17"]:checked) [data-inherited-from="17"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="17"]:checked):has(.inheritance[data-inherited-from="17"]:hover) [data-inherited-from]:not([data-inherited-from="17"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="18"]) [data-inherited-from="18"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="18"]:checked) [data-inherited-from="18"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="18"]:checked):has(.inheritance[data-inherited-from="18"]:hover) [data-inherited-from]:not([data-inherited-from="18"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="19"]) [data-inherited-from="19"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="19"]:checked) [data-inherited-from="19"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="19"]:checked):has(.inheritance[data-inherited-from="19"]:hover) [data-inherited-from]:not([data-inherited-from="19"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="20"]) [data-inherited-from="20"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="20"]:checked) [data-inherited-from="20"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="20"]:checked):has(.inheritance[data-inherited-from="20"]:hover) [data-inherited-from]:not([data-inherited-from="20"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="21"]) [data-inherited-from="21"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="21"]:checked) [data-inherited-from="21"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="21"]:checked):has(.inheritance[data-inherited-from="21"]:hover) [data-inherited-from]:not([data-inherited-from="21"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="22"]) [data-inherited-from="22"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="22"]:checked) [data-inherited-from="22"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="22"]:checked):has(.inheritance[data-inherited-from="22"]:hover) [data-inherited-from]:not([data-inherited-from="22"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="23"]) [data-inherited-from="23"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="23"]:checked) [data-inherited-from="23"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="23"]:checked):has(.inheritance[data-inherited-from="23"]:hover) [data-inherited-from]:not([data-inherited-from="23"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="24"]) [data-inherited-from="24"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="24"]:checked) [data-inherited-from="24"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="24"]:checked):has(.inheritance[data-inherited-from="24"]:hover) [data-inherited-from]:not([data-inherited-from="24"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="25"]) [data-inherited-from="25"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="25"]:checked) [data-inherited-from="25"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="25"]:checked):has(.inheritance[data-inherited-from="25"]:hover) [data-inherited-from]:not([data-inherited-from="25"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="26"]) [data-inherited-from="26"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="26"]:checked) [data-inherited-from="26"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="26"]:checked):has(.inheritance[data-inherited-from="26"]:hover) [data-inherited-from]:not([data-inherited-from="26"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="27"]) [data-inherited-from="27"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="27"]:checked) [data-inherited-from="27"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="27"]:checked):has(.inheritance[data-inherited-from="27"]:hover) [data-inherited-from]:not([data-inherited-from="27"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="28"]) [data-inherited-from="28"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="28"]:checked) [data-inherited-from="28"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="28"]:checked):has(.inheritance[data-inherited-from="28"]:hover) [data-inherited-from]:not([data-inherited-from="28"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="29"]) [data-inherited-from="29"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="29"]:checked) [data-inherited-from="29"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="29"]:checked):has(.inheritance[data-inherited-from="29"]:hover) [data-inherited-from]:not([data-inherited-from="29"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="30"]) [data-inherited-from="30"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="30"]:checked) [data-inherited-from="30"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="30"]:checked):has(.inheritance[data-inherited-from="30"]:hover) [data-inherited-from]:not([data-inherited-from="30"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="31"]) [data-inherited-from="31"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="31"]:checked) [data-inherited-from="31"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="31"]:checked):has(.inheritance[data-inherited-from="31"]:hover) [data-inherited-from]:not([data-inherited-from="31"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="32"]) [data-inherited-from="32"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="32"]:checked) [data-inherited-from="32"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="32"]:checked):has(.inheritance[data-inherited-from="32"]:hover) [data-inherited-from]:not([data-inherited-from="32"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="33"]) [data-inherited-from="33"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="33"]:checked) [data-inherited-from="33"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="33"]:checked):has(.inheritance[data-inherited-from="33"]:hover) [data-inherited-from]:not([data-inherited-from="33"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="34"]) [data-inherited-from="34"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="34"]:checked) [data-inherited-from="34"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="34"]:checked):has(.inheritance[data-inherited-from="34"]:hover) [data-inherited-from]:not([data-inherited-from="34"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="35"]) [data-inherited-from="35"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="35"]:checked) [data-inherited-from="35"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="35"]:checked):has(.inheritance[data-inherited-from="35"]:hover) [data-inherited-from]:not([data-inherited-from="35"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="36"]) [data-inherited-from="36"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="36"]:checked) [data-inherited-from="36"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="36"]:checked):has(.inheritance[data-inherited-from="36"]:hover) [data-inherited-from]:not([data-inherited-from="36"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="37"]) [data-inherited-from="37"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="37"]:checked) [data-inherited-from="37"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="37"]:checked):has(.inheritance[data-inherited-from="37"]:hover) [data-inherited-from]:not([data-inherited-from="37"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="38"]) [data-inherited-from="38"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="38"]:checked) [data-inherited-from="38"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="38"]:checked):has(.inheritance[data-inherited-from="38"]:hover) [data-inherited-from]:not([data-inherited-from="38"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="39"]) [data-inherited-from="39"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="39"]:checked) [data-inherited-from="39"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="39"]:checked):has(.inheritance[data-inherited-from="39"]:hover) [data-inherited-from]:not([data-inherited-from="39"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="40"]) [data-inherited-from="40"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="40"]:checked) [data-inherited-from="40"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="40"]:checked):has(.inheritance[data-inherited-from="40"]:hover) [data-inherited-from]:not([data-inherited-from="40"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="41"]) [data-inherited-from="41"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="41"]:checked) [data-inherited-from="41"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="41"]:checked):has(.inheritance[data-inherited-from="41"]:hover) [data-inherited-from]:not([data-inherited-from="41"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="42"]) [data-inherited-from="42"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="42"]:checked) [data-inherited-from="42"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="42"]:checked):has(.inheritance[data-inherited-from="42"]:hover) [data-inherited-from]:not([data-inherited-from="42"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="43"]) [data-inherited-from="43"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="43"]:checked) [data-inherited-from="43"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="43"]:checked):has(.inheritance[data-inherited-from="43"]:hover) [data-inherited-from]:not([data-inherited-from="43"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="44"]) [data-inherited-from="44"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="44"]:checked) [data-inherited-from="44"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="44"]:checked):has(.inheritance[data-inherited-from="44"]:hover) [data-inherited-from]:not([data-inherited-from="44"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="45"]) [data-inherited-from="45"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="45"]:checked) [data-inherited-from="45"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="45"]:checked):has(.inheritance[data-inherited-from="45"]:hover) [data-inherited-from]:not([data-inherited-from="45"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="46"]) [data-inherited-from="46"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="46"]:checked) [data-inherited-from="46"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="46"]:checked):has(.inheritance[data-inherited-from="46"]:hover) [data-inherited-from]:not([data-inherited-from="46"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="47"]) [data-inherited-from="47"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="47"]:checked) [data-inherited-from="47"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="47"]:checked):has(.inheritance[data-inherited-from="47"]:hover) [data-inherited-from]:not([data-inherited-from="47"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="48"]) [data-inherited-from="48"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="48"]:checked) [data-inherited-from="48"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="48"]:checked):has(.inheritance[data-inherited-from="48"]:hover) [data-inherited-from]:not([data-inherited-from="48"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="49"]) [data-inherited-from="49"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="49"]:checked) [data-inherited-from="49"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="49"]:checked):has(.inheritance[data-inherited-from="49"]:hover) [data-inherited-from]:not([data-inherited-from="49"]) {
  opacity: 0.5;
}
</style><style>.solution {
  padding: 1.5em;
  border: 1px solid #98B2C0;
  border-radius: 0.5em;
  margin-bottom: 0.75em;
  margin-top: 0.75em;
  clear: both; /* Don't overlap margin notes with solutions */
}
.solution p:last-child {margin-bottom:0;}
.solution .description::before {
  content: "";
}
.solution[open] .description {
  margin-bottom: 1em;
}
.solution .description {
  font-style: italic;
  font-family: var(--verso-structure-font-family);
}
.solution .hl.lean.block {
  overflow-x: auto;
}
</style><style>
div.TODO {
  border: 5px solid red;
  position: relative;
}
div.TODO::before {
  content: "TODO";
  position: absolute;
  top: 0;
  right: 0;
  color: red;
  font-size: large;
  font-weight: bold;
  transform: rotate(-90deg) translate(-2em);
}
</style><style>.foldable {
  padding: 1.5em;
  border: 1px solid #98B2C0;
  border-radius: 0.5em;
  margin-bottom: 0.75em;
  margin-top: 0.75em;
  clear: both; /* Don't overlap margin notes with foldables */
}
.foldable p:last-child {margin-bottom:0;}
.foldable .description::before {
  content: "";
}
.foldable[open] .description {
  margin-bottom: 1em;
}
.foldable .description {
  font-style: italic;
  font-family: var(--verso-structure-font-family);
}
.foldable .hl.lean.block {
  overflow-x: auto;
}
</style><script>
      
window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    let siteRoot = typeof __versoSiteRoot !== 'undefined' ? __versoSiteRoot : "/";
    fetch(siteRoot + "-verso-docs.json").then((resp) => resp.json()).then((versoDocData) => {

      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        theme: "lean",
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        ignoreAttributes: true,
        onShow(inst) {
          if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          content.className = "hl lean";
          content.style.display = "block";
          content.style.maxHeight = "300px";
          content.style.overflowY = "auto";
          content.style.overflowX = "hidden";
          const hoverId = tgt.dataset.versoHover;
          const hoverInfo = tgt.querySelector(".hover-info");
          if (hoverId) { // Docstrings from the table
            // TODO stop doing an implicit conversion from string to number here
            let data = versoDocData[hoverId];
            if (data) {
              const info = document.createElement("span");
              info.className = "hover-info";
              info.style.display = "block";
              info.innerHTML = data;
              content.appendChild(info);
              /* Render docstrings - TODO server-side */
              if ('undefined' !== typeof marked) {
                  for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                      const str = d.innerText;
                      const html = marked.parse(str);
                      const rendered = document.createElement("div");
                      rendered.classList.add("docstring");
                      rendered.innerHTML = html;
                      d.parentNode.replaceChild(rendered, d);
                  }
              }
            } else {
              content.innerHTML = "Failed to load doc ID: " + hoverId;
            }
          } else if (hoverInfo) { // The inline info, still used for compiler messages
            content.appendChild(hoverInfo.cloneNode(true));
          }
          return content;
        }
      };

      const addTippy = (selector, props) => {
        tippy(selector, Object.assign({}, defaultTippyProps, props));
      };
      addTippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token', {theme: 'lean'});
      addTippy('.hl.lean .has-info.warning', {theme: 'warning message'});
      addTippy('.hl.lean .has-info.info', {theme: 'info message'});
      addTippy('.hl.lean .has-info.error', {theme: 'error message'});

      tippy('.hl.lean .tactic', {
        allowHtml: true,
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        maxWidth: "none",
        onShow(inst) {
          const toggle = inst.reference.querySelector("input.tactic-toggle");
          if (toggle && toggle.checked) {
            return false;
          }
          if (blockedByTippy(inst.reference)) { return false; }
        },
        theme: "tactic",
        placement: 'bottom-start',
        content (tgt) {
          const content = document.createElement("span");
          const state = tgt.querySelector(".tactic-state").cloneNode(true);
          state.style.display = "block";
          content.appendChild(state);
          content.style.display = "block";
          content.className = "hl lean popup";
          return content;
        }
      });
  });
}
</script>
    </head>
  <body>
    <label for="toggle-toc" id="toggle-toc-click"><span class="line line1"></span><span class="line line2"></span><span class="line line3"></span></label><div class="with-toc">
      <div class="toc-backdrop" onclick="document.getElementById('toggle-toc-click')?.click()"></div>
      <nav id="toc">
        <input type="checkbox" id="toggle-toc" checked="checked"><div class="first">
          <a href="../../" id="logo"><img src="../../static/lean_logo.svg"></a><nav id="local-buttons">
            <a class="local-button active" href="../#Scientific-Computing-in-Lean--Differentiation" rel="prev" title="2. Differentiation"><span class="arrow">←</span><span class="where">Prev</span></a><a class="local-button active" href="../#Scientific-Computing-in-Lean--Differentiation" title="2. Differentiation"><span class="arrow">↑</span><span class="where">Up</span></a><a class="local-button active" href="../Automatic-Differentiation/#Scientific-Computing-in-Lean--Differentiation--Automatic-Differentiation" rel="next" title="2.2. Automatic Differentiation"><span class="where">Next</span><span class="arrow">→</span></a></nav>
          <div class="split-tocs">
            <div class="split-toc book">
              <div class="title">
                <label for="--verso-manual-toc-----bookRoot" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-----bookRoot"></label><span class=""><a href="../../">Scientific Computing in Lean</a></span></div>
              <table><tr class="numbered"><td class="num">1.</td><td><a href="../../Working-with-Arrays/#Scientific-Computing-in-Lean--Working-with-Arrays">Working with Arrays</a></td></tr><tr class="current numbered"><td class="num">2.</td><td><a href="../#Scientific-Computing-in-Lean--Differentiation">Differentiation</a></td></tr><tr class="numbered"><td class="num">3.</td><td><a href="../../Miscellaneous/#Scientific-Computing-in-Lean--Miscellaneous">Miscellaneous</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-Scientific-Computing-in-Lean--Differentiation" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-Scientific-Computing-in-Lean--Differentiation"></label><span class="number">2.</span> <span class=""><a href="../#Scientific-Computing-in-Lean--Differentiation">Differentiation</a></span></div>
              <table><tr class="current numbered"><td class="num">2.1.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation">Symbolic Differentiation</a></td></tr><tr class="numbered"><td class="num">2.2.</td><td><a href="../Automatic-Differentiation/#Scientific-Computing-in-Lean--Differentiation--Automatic-Differentiation">Automatic Differentiation</a></td></tr><tr class="numbered"><td class="num">2.3.</td><td><a href="../Function-Transformation/#Scientific-Computing-in-Lean--Differentiation--Function-Transformation">Function Transformation</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation" checked="checked"></label><span class="number">2.1.</span> <span class="current"><a href="#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation">Symbolic Differentiation</a></span></div>
              <table><tr class="numbered"><td class="num">2.1.1.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Notation">Notation</a></td></tr><tr class="numbered"><td class="num">2.1.2.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Examples">Examples</a></td></tr><tr class="numbered"><td class="num">2.1.3.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Gradient">Gradient</a></td></tr><tr class="numbered"><td class="num">2.1.4.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Derivative-Rules">Derivative Rules</a></td></tr><tr class="numbered"><td class="num">2.1.5.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Differentiating-Division___-Log___-Sqrt___-_________">Differentiating Division, Log, Sqrt, ...</a></td></tr><tr class="numbered"><td class="num">2.1.6.</td><td><a href="#Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Abstract-Vector-Spaces">Abstract Vector Spaces</a></td></tr></table></div>
            </div>
          </div>
        <div class="last"></div>
        </nav>
      <main><section>
          <h1>
            2.1. Symbolic Differentiation</h1>
          <p>
            Differentiation is at the heart of many problems in scientific computing, from optimizing functions to solving differential equations. Computing derivatives is a mechanical process but very error prone when done manually. In this chapter, we will explore how we can compute derivatives of expressions and programs automatically.</p>
          <p>
            Let's recall what derivative is, for a function <code>f : ℝ → ℝ</code> we define it derivative as</p>
          <p>
            $$f'(x) = \lim_{h → 0} \frac{f(x+h) - f(x)}{h}
$$</p>
          <p>
            The mathematical library <strong>Mathlib</strong> defines derivative <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fderiv" data-verso-hover="176">fderiv</span></code> for a general function <code>f : X → Y</code> from some vector spaces <code>X</code> and <code>Y</code>. The derivative of <code>f</code> at point <code>x : X</code> in direction <code>dx : X</code> is</p>
          <p>
            $$\texttt{fderiv ℝ f x dx} = \lim_{h → 0} \frac{f(x+h\cdot dx) - f(x)}{h}
$$</p>
          <p>
            <strong>SciLean</strong> provides tactic <code>fun_trans</code> which can compute derivatives. The name <code>fun_trans</code> stands for 'function transformation' and differentiations is just one example of function transformation. We will talk about general function transformations later in the book.</p>
          <p>
            One of the simplest examples of a derivative is the derivative of \(x^n\) which is equal to \(n x^{n-1}\). Let's compute it using <code>fun_trans</code> tactic</p>
          <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">↑n * x ^ (n - 1) : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-1679">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-fderiv" data-verso-hover="176">fderiv</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-1699">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="177">x</span><span class="unknown token" data-binding="">^</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">x</span> <span class="typed token" data-binding="" data-verso-hover="177">1</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-SciLean.term_Rewrite_byAssuming__-1686">rewrite_by</span> <span class="tactic"><label for="tactic-state-5099966264874043355-1737-1746"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransConvStx-1737">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5099966264874043355-1737-1746"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Nat" data-verso-hover="5">ℕ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">x</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span></span><span class="conclusion"><span class="prefix">| </span><span class="type">↑<span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">x</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>(<span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span>1)</span></span></span></span></span>
<span class="unknown token" data-binding=""></span></code><div class="information">
            <pre>↑n * x ^ (n - 1) : ℝ
</pre></div>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Notation">
              2.1.1. Notation</h2>
            <p>
              Writing <code>fderiv ℝ (fun x =&gt; f x)</code> is somewhat tedious so <strong>SciLean</strong> makes our life easier by introducing a nice notation <code>∂ x, f x</code> for differentiating <code>(f x)</code> w.r.t. <code>x</code>.</p>
            <p>
              Before we explore this notation further we have to mention that  <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fderiv" data-verso-hover="176">fderiv</span></code> can also compute complex derivatives with <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">@</span><span class="const token" data-binding="const-fderiv" data-verso-hover="176">fderiv</span> <span class="unknown token" data-binding="">ℂ</span></code> instead of <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">@</span><span class="const token" data-binding="const-fderiv" data-verso-hover="176">fderiv</span> <span class="unknown token" data-binding="">ℝ</span></code>. However, most of the time we work exclusively with real derivative so we can inform Lean that the default choce of the scalar field are real numbers using the following command</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-SciLean.NotationOverField.commandSet_default_scalar_-2712">set_default_scalar</span> <span class="unknown token" data-binding="">ℝ</span>
<span class="unknown token" data-binding=""></span></code><p>
              Now Lean knows that we want real derivative when we write <code>∂ x, f x</code>.</p>
            <p>
              Using this notation we can compute again the above derivative</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; ↑n * x ^ (n - 1) : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-2900">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="177">x</span><span class="unknown token" data-binding="">^</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-SciLean.term_Rewrite_byAssuming__-2907">rewrite_by</span> <span class="tactic"><label for="tactic-state-15710677508656739152-2939-2948"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransConvStx-2939">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-15710677508656739152-2939-2948"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Nat" data-verso-hover="5">ℕ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.8" data-verso-hover="181">u₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.12" data-verso-hover="181">du₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span></span><span class="conclusion"><span class="prefix">| </span><span class="type"><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.12822" data-verso-hover="177">x</span> =&gt; ↑<span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.12822" data-verso-hover="177">x</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>(<span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span>1)</span></span></span></span></span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>fun x =&gt; ↑n * x ^ (n - 1) : ℝ → ℝ
</pre></div>
            <p>
              Because we did not specify the point where we want to compute the derivative we obtained a function in <code>x</code>. We can specify the point where we want to compute the derivative with <code>∂ (x:=x₀), ...</code></p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">↑n * x₀ ^ (n - 1) : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-3246">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.17" data-verso-hover="177">x</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">x₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.17" data-verso-hover="177">x</span><span class="unknown token" data-binding="">^</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-SciLean.term_Rewrite_byAssuming__-3253">rewrite_by</span> <span class="tactic"><label for="tactic-state-4660170561413162055-3285-3294"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransConvStx-3285">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-4660170561413162055-3285-3294"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Nat" data-verso-hover="5">ℕ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.8" data-verso-hover="181">u₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.12" data-verso-hover="181">du₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span></span><span class="conclusion"><span class="prefix">| </span><span class="type">↑<span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">x₀</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>(<span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span>1)</span></span></span></span></span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>↑n * x₀ ^ (n - 1) : ℝ
</pre></div>
            <p>
              Writing <code>rewrite_by fun_trans</code> every time we want to diferentiate an expression gets a bit tedious. We can add an exclamation mark after <code>∂</code> to indicate that we want to run <code>fun_trans</code> tactic to compute the derivative.</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; ↑n * x ^ (n - 1) : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-3602">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="177">x</span><span class="unknown token" data-binding="">^</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">n</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>fun x =&gt; ↑n * x ^ (n - 1) : ℝ → ℝ
</pre></div>
            <p>
              We can differentiate w.r.t to a vector valued variable <code>(x : ℝ×ℝ)</code></p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; fun dx =&gt;L[ℝ] 2 * ⟪dx, x⟫ : ℝ × ℝ → ℝ × ℝ →L[ℝ] ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-3804">#check</span></span> <span class="unknown token" data-binding="">∂!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.20" data-verso-hover="181">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">×</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">‖</span><span class="var token" data-binding="var-_uniq.20" data-verso-hover="181">x</span><span class="unknown token" data-binding="">‖₂²</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>fun x =&gt; fun dx =&gt;L[ℝ] 2 * ⟪dx, x⟫ : ℝ × ℝ → ℝ × ℝ →L[ℝ] ℝ
</pre></div>
            <p>
              For derivatives w.r.t. a vector valued variable we have to also specify the direction in which we differentiate. Therefore in the above we obtained derivative as a function of the position <code>x</code> and direction <code>dx</code>. Furthermore, the notation <code>fun dx =&gt;L[ℝ] ...</code> indicates that the function is linear function in <code>dx</code> and similarly <code>X →L[ℝ] Y</code> stands for the space of ℝ-linear functions from <code>X</code> to <code>Y</code>.</p>
            <p>
              If we want to specify the position and the direction in which we want to compute the derivatives we use the notation <code>∂ (x:=x₀;dx₀), f x</code></p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">2 * ⟪du₀, u₀⟫ : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-4539">#check</span></span> <span class="unknown token" data-binding="">∂!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.27" data-verso-hover="181">u</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="181">u₀</span><span class="unknown token" data-binding="">;</span><span class="var token" data-binding="var-_uniq.12" data-verso-hover="181">du₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">‖</span><span class="var token" data-binding="var-_uniq.27" data-verso-hover="181">u</span><span class="unknown token" data-binding="">‖₂²</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>2 * ⟪du₀, u₀⟫ : ℝ
</pre></div>
            <p>
              To summarize all the different variants. For function of a scalar valued argument</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ f : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-4808">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.521" data-verso-hover="182">f</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ x, f x : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-4821">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.534" data-verso-hover="177">x</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.521" data-verso-hover="182">f</span> <span class="var token" data-binding="var-_uniq.534" data-verso-hover="177">x</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (x:=x₀), f x : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-4839">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1042" data-verso-hover="177">x</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.509" data-verso-hover="177">x₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.521" data-verso-hover="182">f</span> <span class="var token" data-binding="var-_uniq.1042" data-verso-hover="177">x</span>
<span class="unknown token" data-binding=""></span></code><p>
              For function of a vector valued argument</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ f : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-4919">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.1222" data-verso-hover="182">f</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ u, g u : ℝ × ℝ → ℝ × ℝ →L[ℝ] ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-4932">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.534" data-verso-hover="181">u</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.1228" data-verso-hover="183">g</span> <span class="var token" data-binding="var-_uniq.534" data-verso-hover="181">u</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (u:=u₀), g u : ℝ × ℝ →L[ℝ] ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-4950">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1233" data-verso-hover="181">u</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.1214" data-verso-hover="181">u₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.1228" data-verso-hover="183">g</span> <span class="var token" data-binding="var-_uniq.1233" data-verso-hover="181">u</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">(∂ (u:=u₀), g u) du₀ : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-4976">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1946" data-verso-hover="181">u</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.1214" data-verso-hover="181">u₀</span><span class="unknown token" data-binding="">;</span><span class="var token" data-binding="var-_uniq.1218" data-verso-hover="181">du₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.1228" data-verso-hover="183">g</span> <span class="var token" data-binding="var-_uniq.1946" data-verso-hover="181">u</span>
<span class="unknown token" data-binding=""></span></code><p>
              There is nothing stopping us from applying derivative multiple times to compute higher order derivatives</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; 2 : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-5143">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂!</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.8727" data-verso-hover="177">x</span><span class="unknown token" data-binding="">:</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.8727" data-verso-hover="177">x</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>fun x =&gt; 2 : ℝ → ℝ
</pre></div>
            <section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Notation--Exercises">
                2.1.1.1. Exercises</h3>
              <ol start="1">
                <li>
                  <p>
                    Express first derivative of <code>f : ℝ → ℝ → ℝ</code> in the first and the second argument. Also express derivative in both arguments at the same time.</p>
                  </li>
                </ol>
              <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-5436" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1612" data-verso-hover="184">f</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1614" data-verso-hover="177">x₀</span> <span class="var token" data-binding="var-_uniq.1616" data-verso-hover="177">y₀</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span>

-- first argument
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (x:=x₀), f x y₀ : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-5508">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.69" data-verso-hover="177">x</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.1614" data-verso-hover="177">x₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1612" data-verso-hover="184">f</span> <span class="var token" data-binding="var-_uniq.69" data-verso-hover="177">x</span> <span class="var token" data-binding="var-_uniq.1616" data-verso-hover="177">y₀</span><span class="unknown token" data-binding="">)</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (x:=x₀), f x y₀ : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-5541">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1612" data-verso-hover="184">f</span> <span class="unknown token" data-binding="">·</span> <span class="var token" data-binding="var-_uniq.1616" data-verso-hover="177">y₀</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.1614" data-verso-hover="177">x₀</span>

-- second agument
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (y:=y₀), f x₀ y : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-5588">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1104" data-verso-hover="177">y</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.1616" data-verso-hover="177">y₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1612" data-verso-hover="184">f</span> <span class="var token" data-binding="var-_uniq.1614" data-verso-hover="177">x₀</span> <span class="var token" data-binding="var-_uniq.1104" data-verso-hover="177">y</span><span class="unknown token" data-binding="">)</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (x:=y₀), f x₀ x : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-5621">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1612" data-verso-hover="184">f</span> <span class="var token" data-binding="var-_uniq.1614" data-verso-hover="177">x₀</span> <span class="unknown token" data-binding="">·</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.1616" data-verso-hover="177">y₀</span>

-- both arguments
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (x:=(x₀, y₀)),
  match x with
  | (x, y) =&gt; f x y : ℝ × ℝ →L[ℝ] ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-5668">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2168" data-verso-hover="177">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.2169" data-verso-hover="177">y</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">:=</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1614" data-verso-hover="177">x₀</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.1616" data-verso-hover="177">y₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.1612" data-verso-hover="184">f</span> <span class="var token" data-binding="var-_uniq.2168" data-verso-hover="177">x</span> <span class="var token" data-binding="var-_uniq.2169" data-verso-hover="177">y</span>
<span class="unknown token" data-binding=""></span></code></details><ol start="2">
                <li>
                  <p>
                    For <code>(g : ℝ×ℝ → ℝ)</code>, express derivative of <code>g (x,y)</code> in <code>x</code>.</p>
                  </li>
                </ol>
              <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-5821" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1072" data-verso-hover="183">g</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">×</span><span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1074" data-verso-hover="177">x₀</span> <span class="var token" data-binding="var-_uniq.1076" data-verso-hover="177">y₀</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">(∂ (xy:=(x₀, y₀)), g xy) (1, 0) : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-5872">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.93" data-verso-hover="181">xy</span><span class="unknown token" data-binding="">:=</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1074" data-verso-hover="177">x₀</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.1076" data-verso-hover="177">y₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">;</span><span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="177">1</span><span class="unknown token" data-binding="">,</span><span class="typed token" data-binding="" data-verso-hover="177">0</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.1072" data-verso-hover="183">g</span> <span class="var token" data-binding="var-_uniq.93" data-verso-hover="181">xy</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">(∂ g (x₀, y₀)) (1, 0) : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-5913">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.1072" data-verso-hover="183">g</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1074" data-verso-hover="177">x₀</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.1076" data-verso-hover="177">y₀</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="177">1</span><span class="unknown token" data-binding="">,</span><span class="typed token" data-binding="" data-verso-hover="177">0</span><span class="unknown token" data-binding="">)</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (x:=x₀), g (x, y₀) : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-5944">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2067" data-verso-hover="177">x</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.1074" data-verso-hover="177">x₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.1072" data-verso-hover="183">g</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2067" data-verso-hover="177">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.1076" data-verso-hover="177">y₀</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code></details><ol start="3">
                <li>
                  <p>
                    Express second derivatives of <code>f : ℝ → ℝ → ℝ</code> in the first and the second argument.</p>
                  </li>
                </ol>
              <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-6115" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1344" data-verso-hover="184">f</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1346" data-verso-hover="177">x₀</span> <span class="var token" data-binding="var-_uniq.1348" data-verso-hover="177">y₀</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (x':=x₀), ∂ (x'':=x'), f x'' y₀ : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-6168">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.109" data-verso-hover="177">x'</span><span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.1346" data-verso-hover="177">x₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.610" data-verso-hover="177">x''</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.109" data-verso-hover="177">x'</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1344" data-verso-hover="184">f</span> <span class="var token" data-binding="var-_uniq.610" data-verso-hover="177">x''</span> <span class="var token" data-binding="var-_uniq.1348" data-verso-hover="177">y₀</span><span class="unknown token" data-binding="">)</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (∂ x, f x y₀) x₀ : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-6220">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1344" data-verso-hover="184">f</span> <span class="unknown token" data-binding="">·</span> <span class="var token" data-binding="var-_uniq.1348" data-verso-hover="177">y₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.1346" data-verso-hover="177">x₀</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (y':=y₀), ∂ (y'':=y'), f x₀ y'' : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-6255">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1353" data-verso-hover="177">y'</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.1348" data-verso-hover="177">y₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1854" data-verso-hover="177">y''</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.1353" data-verso-hover="177">y'</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1344" data-verso-hover="184">f</span> <span class="var token" data-binding="var-_uniq.1346" data-verso-hover="177">x₀</span> <span class="var token" data-binding="var-_uniq.1854" data-verso-hover="177">y''</span><span class="unknown token" data-binding="">)</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (∂ x, f x₀ x) y₀ : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-6306">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1344" data-verso-hover="184">f</span> <span class="var token" data-binding="var-_uniq.1346" data-verso-hover="177">x₀</span> <span class="unknown token" data-binding="">·</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.1348" data-verso-hover="177">y₀</span>
<span class="unknown token" data-binding=""></span></code></details><ol start="4">
                <li>
                  <p>
                    Let \(L(t,x)\) be a function of time and space and <code>y(t)</code> a function of time. Express \( \frac{d}{dt} L(t, y(t)) \) and \( \frac{\partial}{\partial t} L(t, y(t)) \) in Lean. What is the difference between these two expressions?</p>
                  </li>
                </ol>
              <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-6630" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.122" data-verso-hover="184">L</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="182">y</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.128" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span>

-- d/dt L
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (t':=t), L t' (y t') : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-6704">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="177">t'</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.128" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.122" data-verso-hover="184">L</span> <span class="var token" data-binding="var-_uniq.133" data-verso-hover="177">t'</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="182">y</span> <span class="var token" data-binding="var-_uniq.133" data-verso-hover="177">t'</span><span class="unknown token" data-binding="">)</span>

-- ∂/∂t L
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ (t':=t), L t' (y t) : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-6751">#check</span></span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.682" data-verso-hover="177">t'</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.128" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.122" data-verso-hover="184">L</span> <span class="var token" data-binding="var-_uniq.682" data-verso-hover="177">t'</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="182">y</span> <span class="var token" data-binding="var-_uniq.128" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
                  Because SciLean's notation forces you to be a bit more explicit, there is no need to distinguish between \( \frac{d}{dt} \) and \( \frac{\partial}{\partial t} \). Lots of pain and suffering has been infliced on generations of physics students because of the ambiguity of partial derivative notation.</p>
                </details><ol start="4">
                <li>
                  <p>
                    Express one dimensional Euler-Lagrange equation in Lean</p>
                  </li>
                </ol>
              <p>
                $$\frac{d}{dt} \frac{\partial L}{\partial \dot x}(x(t),\dot x(t)) -  \frac{\partial L}{\partial x}(x(t), \dot x(t))
$$</p>
              <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-7326" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.70" data-verso-hover="184">L</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.74" data-verso-hover="182">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.76" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">let v := ∂ x;
∂ (t':=t), ∂ (v':=v t'), L (x t') v' - ∂ (x':=x t), L x' (v t) : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-7390">#check</span></span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-7399" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.638" data-verso-hover="182">v</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.74" data-verso-hover="182">x</span>
  <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.646" data-verso-hover="177">t'</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.76" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.684" data-verso-hover="177">v'</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.638" data-verso-hover="182">v</span> <span class="var token" data-binding="var-_uniq.646" data-verso-hover="177">t'</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.70" data-verso-hover="184">L</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.74" data-verso-hover="182">x</span> <span class="var token" data-binding="var-_uniq.646" data-verso-hover="177">t'</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.684" data-verso-hover="177">v'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">-</span> <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.705" data-verso-hover="177">x'</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.74" data-verso-hover="182">x</span> <span class="var token" data-binding="var-_uniq.76" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.70" data-verso-hover="184">L</span> <span class="var token" data-binding="var-_uniq.705" data-verso-hover="177">x'</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.638" data-verso-hover="182">v</span> <span class="var token" data-binding="var-_uniq.76" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code></details></section>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Examples">
              2.1.2. Examples</h2>
            <p>
              Let's put computing derivatives to some practical use. We will demonstrate how to use <strong>SciLean</strong> symbolic differentiations to solve few common tasks in scientific computing and physics.</p>
            <section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Examples--Newton___s-solver">
                2.1.2.1. Newton's solver</h3>
              <p>
                Solving non-linear equation \( f(x) = 0 \) is a very common problem in scientific computing. Often this can be done only approximately and a popular tool to do so is Newton's method. It is an interative process that starts with an initial guess \(x₀\) which is incrementally improved by the following rule</p>
              <p>
                $$x_{n+1} = x_n - \frac{f(x_n)}{f'(x_n)}
$$</p>
              <p>
                We can use Newton's method to compute sqruare root of \(y\) by choosing \( f(x) = x^2 - y\).</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-8385">def</span> <span class="const token" data-binding="const-mySqrt" data-verso-hover="185" id="mySqrt">mySqrt</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">steps</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="47">y</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-Id.run" data-verso-hover="6">Id.run</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-8440">do</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-8445">let</span> <span class="var token" data-binding="var-_uniq.113" data-verso-hover="88">f</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-8454">fun</span> <span class="var token" data-binding="var-_uniq.33" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.33" data-verso-hover="47">x</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="47">y</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-8473">let</span> <span class="keyword token" data-binding="kw-occ-null-8477">mut</span> <span class="var token" data-binding="var-_uniq.247" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">1.0</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-8492" data-verso-hover="9">for</span> <span class="unknown token" data-binding="">_</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-8496">in</span> <span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="2">0</span><span class="unknown token" data-binding="">:</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">steps</span><span class="unknown token" data-binding="">]</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-8492" data-verso-hover="9">do</span>
    <span class="var token" data-binding="var-_uniq.247" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.247" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.113" data-verso-hover="88">f</span> <span class="var token" data-binding="var-_uniq.247" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">/</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂!</span> <span class="var token" data-binding="var-_uniq.260" data-verso-hover="47">x'</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.247" data-verso-hover="47">x</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.113" data-verso-hover="88">f</span> <span class="var token" data-binding="var-_uniq.260" data-verso-hover="47">x'</span><span class="unknown token" data-binding="">)</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doReturn-8554" data-verso-hover="10">return</span> <span class="var token" data-binding="var-_uniq.247" data-verso-hover="47">x</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">1.414214</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-8564" data-verso-hover="11">#eval</span></span> <a href="#mySqrt"><span class="const token" data-binding="const-mySqrt" data-verso-hover="185">mySqrt</span></a> <span class="typed token" data-binding="" data-verso-hover="2">10</span> <span class="unknown token" data-binding="">2.0</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                <pre>1.414214
</pre></div>
              <p>
                You might feel a bit unconfortable here are we are differentiating a function defined on floating point numbers. If you think that can't be formally correct then you are right. We will discuss this issue in a later chapter "Working with Real Numbers".</p>
              <section>
                <h4 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Examples--Newton___s-solver--Exercises">
                  2.1.2.1.1. Exercises</h4>
                <ol start="1">
                  <li>
                    <p>
                      try to solve different equations, for example <code>exp x = y</code> to obtain <code>log</code>, <code>x*exp x = y</code> to obtain Lambert W function or some polynomial.</p>
                    </li>
                  <li>
                    <p>
                      measure relative,\(\left| \frac{f(x_n)}{x_n} \right| \), and absolute error \( \left| f(x_n) \right| \) and use them for stopping criteria.</p>
                    </li>
                  <li>
                    <p>
                      A difficult exercise is to define a general <code>newtonSolve</code> function that takes an arbitrary function <code>f : Float → Float</code> and uring elaboration synthesizes its derivative. Add multiple hints, 1. use <code>infer_var</code> trick, 2. state explicitly how the arguments should look like</p>
                    </li>
                  </ol>
                <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-SciLean.NotationOverField.commandSet_default_scalar_-9502">set_default_scalar</span> <span class="unknown token" data-binding="">Float</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-9527">def</span> <span class="const token" data-binding="const-newtonSolve" data-verso-hover="186" id="newtonSolve">newtonSolve</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.574" data-verso-hover="2">steps</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.576" data-verso-hover="47">x₀</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.580" data-verso-hover="88">f</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.584" data-verso-hover="88">f'</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">}</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1147" data-verso-hover="187">hf</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.584" data-verso-hover="88">f'</span> <span class="unknown token" data-binding="">=</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.580" data-verso-hover="88">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.binderTactic-9644">by</span>
        <span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-9658" data-verso-hover="188">unfold</span> <span class="unknown token" data-binding="">deriv</span><span class="unknown token" data-binding="">;</span> <span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-9672">fun_trans</span><span class="unknown token" data-binding="">;</span> <span class="keyword token" data-binding="kw-occ-SciLean.inferVar-9683">infer_var</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-Id.run" data-verso-hover="6">Id.run</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-9716">do</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-9721">let</span> <span class="keyword token" data-binding="kw-occ-null-9725">mut</span> <span class="var token" data-binding="var-_uniq.1301" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.576" data-verso-hover="47">x₀</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-9741" data-verso-hover="9">for</span> <span class="unknown token" data-binding="">_</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-9745">in</span> <span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="2">0</span><span class="unknown token" data-binding="">:</span><span class="var token" data-binding="var-_uniq.574" data-verso-hover="2">steps</span><span class="unknown token" data-binding="">]</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-9741" data-verso-hover="9">do</span>
    <span class="var token" data-binding="var-_uniq.1301" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.1301" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.580" data-verso-hover="88">f</span> <span class="var token" data-binding="var-_uniq.1301" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">/</span> <span class="var token" data-binding="var-_uniq.584" data-verso-hover="88">f'</span> <span class="var token" data-binding="var-_uniq.1301" data-verso-hover="47">x</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doReturn-9789" data-verso-hover="10">return</span> <span class="var token" data-binding="var-_uniq.1301" data-verso-hover="47">x</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">1.414214</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-9799" data-verso-hover="11">#eval</span></span> <a href="#newtonSolve"><span class="const token" data-binding="const-newtonSolve" data-verso-hover="186">newtonSolve</span></a> <span class="typed token" data-binding="" data-verso-hover="2">10</span> <span class="unknown token" data-binding="">1.0</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-9825">fun</span> <span class="var token" data-binding="var-_uniq.1600" data-verso-hover="47">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.1600" data-verso-hover="47">x</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span> <span class="unknown token" data-binding="">-</span> <span class="unknown token" data-binding="">2.0</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code></details></section>
              </section>
            <section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Examples--Kinematics">
                2.1.2.2. Kinematics</h3>
              <p>
                We can also use <strong>SciLean</strong>'s symbolic differentiation to prove some basic theorems from physics. For example we can state the second Newton's law</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-10073">def</span> <span class="const token" data-binding="const-NewtonSecondLaw" data-verso-hover="189" id="NewtonSecondLaw">NewtonSecondLaw</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="182">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="182">F</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Prop</span> <span class="unknown token" data-binding="">:=</span>
  <span class="unknown token" data-binding="">∀</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="177">t</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span> <span class="unknown token" data-binding="">*</span> <span class="const token" data-binding="const-deriv" data-verso-hover="190">deriv</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.6" data-verso-hover="182">x</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">=</span> <span class="var token" data-binding="var-_uniq.10" data-verso-hover="182">F</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="177">t</span>
<span class="unknown token" data-binding=""></span></code><p>
                saying that for a particle with mass <code>m</code> under the influence of force <code>F</code> has trajectory <code>x</code> if the mass times the acceleration <code>deriv (∂ x) t</code>, i.e. the second derivative of trajectory, is equal to the force <code>F t</code>.</p>
              <p>
                We can show that under constant force <code>f</code> a particle with mass <code>m</code> has trajectory <code>(fun t =&gt; 1/2 * f/m * t^2)</code></p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-10531">example</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.30" data-verso-hover="191">hm</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span> <span class="unknown token" data-binding="">≠</span> <span class="typed token" data-binding="" data-verso-hover="177">0</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <a href="#NewtonSecondLaw"><span class="const token" data-binding="const-NewtonSecondLaw" data-verso-hover="189">NewtonSecondLaw</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-10591">fun</span> <span class="var token" data-binding="var-_uniq.34" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span><span class="unknown token" data-binding="">/</span><span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="177">2</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">*</span> <span class="var token" data-binding="var-_uniq.34" data-verso-hover="177">t</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-10616">fun</span> <span class="unknown token" data-binding="">_</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-4053121027478887434-10635-10637"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-10635" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-4053121027478887434-10635-10637"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="191">hm</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><a href="#NewtonSecondLaw"><span class="const token" data-binding="const-NewtonSecondLaw" data-verso-hover="189">NewtonSecondLaw</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span> (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.38262" data-verso-hover="177">t</span> =&gt; <span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span>(2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span>)<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.38262" data-verso-hover="177">t</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2) <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.38305" data-verso-hover="177">x</span> =&gt; <span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span></span></span></span></span></span>

  <span class="tactic"><label for="tactic-state-5153935215786609259-10641-10663"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-10641" data-verso-hover="188">unfold</span> <a href="#NewtonSecondLaw"><span class="const token" data-binding="const-NewtonSecondLaw" data-verso-hover="189">NewtonSecondLaw</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5153935215786609259-10641-10663"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="191">hm</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∀ (<span class="var token" data-binding="var-_uniq.38261" data-verso-hover="177">t</span> : <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>), <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>∂ (∂ <span class="var token" data-binding="var-_uniq.38276" data-verso-hover="177">t</span>, <span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span>(2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span>)<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.38276" data-verso-hover="177">t</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2) <span class="var token" data-binding="var-_uniq.38261" data-verso-hover="177">t</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span>(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.38314" data-verso-hover="177">x</span> =&gt; <span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span>) <span class="var token" data-binding="var-_uniq.38261" data-verso-hover="177">t</span></span></span></span></span></span>
  -- compute derivatives
  <span class="tactic"><label for="tactic-state-5012302598373338112-10691-10708"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-10691">fun_trans</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-deriv" data-verso-hover="190">deriv</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5012302598373338112-10691-10708"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="191">hm</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>(<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span>(2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span>)<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>2)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span></span></span></span></span></span>
  -- finish algebraic simplifications
  <span class="tactic"><label for="tactic-state-8324301895202215699-10749-10759"><span class="keyword token" data-binding="kw-occ-Mathlib.Tactic.FieldSimp.fieldSimp-10749" data-verso-hover="193">field_simp</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8324301895202215699-10749-10759"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="191">hm</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>(<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>2)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">f</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>(2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span>)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-10761-10765"><span class="keyword token" data-binding="kw-occ-Mathlib.Tactic.RingNF.ring-10761" data-verso-hover="194">ring</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-10761-10765"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><section>
                <h4 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Examples--Kinematics--Exercises">
                  2.1.2.2.1. Exercises</h4>
                <ol start="1">
                  <li>
                    <p>
                      show that trajectory <code>x := fun t =&gt; (cos t, sin t)</code> satisfies differential equation <code>∂ x t = (- (x t).2, (x t).1)</code></p>
                    </li>
                  </ol>
                <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-11270" data-verso-hover="162">open</span> <span class="unknown token" data-binding="">SciLean</span> <span class="unknown token" data-binding="">Scalar</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-11290">def</span> <span class="const token" data-binding="const-ode" data-verso-hover="195" id="ode">ode</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="196">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">×</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <span class="unknown token" data-binding="">∀</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="177">t</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-deriv" data-verso-hover="190">deriv</span> <span class="var token" data-binding="var-_uniq.6" data-verso-hover="196">x</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">=</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">-</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="196">x</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="196">x</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">)</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-11367">example</span> <span class="unknown token" data-binding="">:</span> <a href="#ode"><span class="const token" data-binding="const-ode" data-verso-hover="195">ode</span></a> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-11382">fun</span> <span class="var token" data-binding="var-_uniq.615" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-SciLean.Scalar.cos" data-verso-hover="197">cos</span> <span class="var token" data-binding="var-_uniq.615" data-verso-hover="177">t</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> <span class="var token" data-binding="var-_uniq.615" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-12314638791996939200-11410-11412"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-11410" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12314638791996939200-11410-11412"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><a href="#ode"><span class="const token" data-binding="const-ode" data-verso-hover="195">ode</span></a> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.8887" data-verso-hover="177">t</span> =&gt; (<span class="const token" data-binding="const-SciLean.Scalar.cos" data-verso-hover="197">cos</span> <span class="var token" data-binding="var-_uniq.8887" data-verso-hover="177">t</span>, <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> <span class="var token" data-binding="var-_uniq.8887" data-verso-hover="177">t</span>)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-5572183055339655205-11415-11431"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-11415" data-verso-hover="188">unfold</span> <a href="#ode"><span class="const token" data-binding="const-ode" data-verso-hover="195">ode</span></a> <span class="const token" data-binding="const-deriv" data-verso-hover="190">deriv</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5572183055339655205-11415-11431"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∀ (<span class="var token" data-binding="var-_uniq.8887" data-verso-hover="177">t</span> : <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>), (∂ (<span class="var token" data-binding="var-_uniq.8888" data-verso-hover="177">t</span>:=<span class="var token" data-binding="var-_uniq.8887" data-verso-hover="177">t</span>), (<span class="const token" data-binding="const-SciLean.Scalar.cos" data-verso-hover="197">cos</span> <span class="var token" data-binding="var-_uniq.8888" data-verso-hover="177">t</span>, <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> <span class="var token" data-binding="var-_uniq.8888" data-verso-hover="177">t</span>)) 1<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span>(<span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span>((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.8916" data-verso-hover="177">t</span> =&gt; (<span class="const token" data-binding="const-SciLean.Scalar.cos" data-verso-hover="197">cos</span> <span class="var token" data-binding="var-_uniq.8916" data-verso-hover="177">t</span>, <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> <span class="var token" data-binding="var-_uniq.8916" data-verso-hover="177">t</span>)) <span class="var token" data-binding="var-_uniq.8887" data-verso-hover="177">t</span>).2, ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.8929" data-verso-hover="177">t</span> =&gt; (<span class="const token" data-binding="const-SciLean.Scalar.cos" data-verso-hover="197">cos</span> <span class="var token" data-binding="var-_uniq.8929" data-verso-hover="177">t</span>, <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> <span class="var token" data-binding="var-_uniq.8929" data-verso-hover="177">t</span>)) <span class="var token" data-binding="var-_uniq.8887" data-verso-hover="177">t</span>).1)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-11433-11442"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-11433">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-11433-11442"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></details><ol start="2">
                  <li>
                    <p>
                      Show that trajectory \(x(t) = \sin(\omega t) \) corresponds to the force \(f(x) = - k x \) with \(\omega = \sqrt{(k/m)} \)</p>
                    </li>
                  </ol>
                <details class="foldable"><summary class="description">Hint</summary><p>
                    After differentiation you will have to show that \(m \sqrt{\frac{k}{m}}^2 = k\). Unfortunatelly Lean is not yet very powerful computer algebra system. So you can finish the proof with</p>
                  <pre>  ring_nf --  m * (sqrt (k / m) * (sqrt (k / m) ==&gt; m * sqrt (k * m⁻¹) ^ 2
  have h : m * sqrt (k * m⁻¹) ^ 2 = k := sorry_proof
  simp[h]
</pre><p>
                    where we call <code>ring_nf</code> to clean up the expression, then we just assume that <code> m * sqrt (k * m⁻¹) ^ 2</code> is equal to <code>k</code> and finally we can finish the proof by running simp</p>
                  </details><details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-12166" data-verso-hover="162">open</span> <span class="unknown token" data-binding="">SciLean</span> <span class="unknown token" data-binding="">Scalar</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-12187">example</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-12213" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.91" data-verso-hover="177">ω</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="unknown token" data-binding="">/</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="unknown token" data-binding="">)</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-12238" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.454" data-verso-hover="182">x</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-12247">fun</span> <span class="var token" data-binding="var-_uniq.96" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.91" data-verso-hover="177">ω</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.96" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span>
    <a href="#NewtonSecondLaw"><span class="const token" data-binding="const-NewtonSecondLaw" data-verso-hover="189">NewtonSecondLaw</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span> <span class="var token" data-binding="var-_uniq.454" data-verso-hover="182">x</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-12292">fun</span> <span class="var token" data-binding="var-_uniq.458" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.454" data-verso-hover="182">x</span> <span class="var token" data-binding="var-_uniq.458" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-1855810123593500858-12313-12315"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-12313" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1855810123593500858-12313-12315"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.35131" data-verso-hover="177">ω</span> := <span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span>);
<span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.35150" data-verso-hover="182">x</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.35133" data-verso-hover="177">t</span> =&gt; <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="var token" data-binding="var-_uniq.35131" data-verso-hover="177">ω</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.35133" data-verso-hover="177">t</span>);
<a href="#NewtonSecondLaw"><span class="const token" data-binding="const-NewtonSecondLaw" data-verso-hover="189">NewtonSecondLaw</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span> <span class="var token" data-binding="var-_uniq.35150" data-verso-hover="182">x</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.35152" data-verso-hover="177">t</span> =&gt; <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.35150" data-verso-hover="182">x</span> <span class="var token" data-binding="var-_uniq.35152" data-verso-hover="177">t</span></span></span></span></span></span>

  <span class="tactic"><label for="tactic-state-11614343967967134488-12319-12347"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-12319" data-verso-hover="188">unfold</span> <a href="#NewtonSecondLaw"><span class="const token" data-binding="const-NewtonSecondLaw" data-verso-hover="189">NewtonSecondLaw</span></a> <span class="const token" data-binding="const-deriv" data-verso-hover="190">deriv</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-11614343967967134488-12319-12347"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.35131" data-verso-hover="177">ω</span> := <span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span>);
<span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.35150" data-verso-hover="182">x</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.35133" data-verso-hover="177">t</span> =&gt; <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="var token" data-binding="var-_uniq.35131" data-verso-hover="177">ω</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.35133" data-verso-hover="177">t</span>);
∀ (<span class="var token" data-binding="var-_uniq.35151" data-verso-hover="177">t</span> : <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>), <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>(∂ (<span class="var token" data-binding="var-_uniq.35159" data-verso-hover="177">x_1</span>:=<span class="var token" data-binding="var-_uniq.35151" data-verso-hover="177">t</span>), (∂ <span class="var token" data-binding="var-_uniq.35150" data-verso-hover="182">x</span> <span class="var token" data-binding="var-_uniq.35159" data-verso-hover="177">x_1</span>) 1) 1<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span>(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.35161" data-verso-hover="177">t</span> =&gt; <span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.35150" data-verso-hover="182">x</span> <span class="var token" data-binding="var-_uniq.35161" data-verso-hover="177">t</span>) <span class="var token" data-binding="var-_uniq.35151" data-verso-hover="177">t</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-2039491727479113208-12350-12359"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-12350">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2039491727479113208-12350-12359"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∀ (<span class="var token" data-binding="var-_uniq.35111" data-verso-hover="177">t</span> : <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>), <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>(<span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span>)<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>(<span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span>)<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span>)<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.35111" data-verso-hover="177">t</span>)))<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span>)<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.35111" data-verso-hover="177">t</span>)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-157493305032289238-12362-12369"><span class="keyword token" data-binding="kw-occ-Mathlib.Tactic.RingNF.ringNF-12362" data-verso-hover="200">ring_nf</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-157493305032289238-12362-12369"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∀ (<span class="var token" data-binding="var-_uniq.35111" data-verso-hover="177">t</span> : <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>), <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-Inv.inv" data-verso-hover="201">⁻¹</span>)<span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-Inv.inv" data-verso-hover="201">⁻¹</span>)<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.35111" data-verso-hover="177">t</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-Inv.inv" data-verso-hover="201">⁻¹</span>)<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.35111" data-verso-hover="177">t</span>)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-8547806975873813796-12372-12425"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticHave_-12372" data-verso-hover="202">have</span> <span class="var token" data-binding="var-_uniq.32138" data-verso-hover="203">h</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span> <span class="unknown token" data-binding="">*</span> <span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span> <span class="unknown token" data-binding="">*</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="unknown token" data-binding="">⁻¹</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">^</span> <span class="typed token" data-binding="" data-verso-hover="2">2</span> <span class="unknown token" data-binding="">=</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-SciLean.termSorry_proof-12414" data-verso-hover="65">sorry_proof</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8547806975873813796-12372-12425"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32138" data-verso-hover="203">h</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-Inv.inv" data-verso-hover="201">⁻¹</span>)<span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∀ (<span class="var token" data-binding="var-_uniq.35111" data-verso-hover="177">t</span> : <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>), <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-Inv.inv" data-verso-hover="201">⁻¹</span>)<span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-Inv.inv" data-verso-hover="201">⁻¹</span>)<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.35111" data-verso-hover="177">t</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.4" data-verso-hover="177">k</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">m</span><span class="const token" data-binding="const-Inv.inv" data-verso-hover="201">⁻¹</span>)<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.35111" data-verso-hover="177">t</span>)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-7-12428-12435"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-12428" data-verso-hover="204">simp</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.32138" data-verso-hover="203">h</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-12428-12435"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></details><ol start="3">
                  <li>
                    <p>
                      Show that \(u(t,x) = sin(x-t)\) is a solution to the wave equation</p>
                    </li>
                  </ol>
                <p>
                  $$\frac{\partial^2 u}{\partial t^2} = \frac{\partial^2 u}{\partial x^2}
$$</p>
                <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-12633" data-verso-hover="162">open</span> <span class="unknown token" data-binding="">SciLean</span> <span class="unknown token" data-binding="">Scalar</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-12653">def</span> <span class="const token" data-binding="const-WaveEquation" data-verso-hover="205" id="WaveEquation">WaveEquation</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="184">u</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <span class="unknown token" data-binding="">∀</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="177">x</span> <span class="var token" data-binding="var-_uniq.17" data-verso-hover="177">t</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="184">u</span> <span class="unknown token" data-binding="">·</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.17" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="184">u</span> <span class="var token" data-binding="var-_uniq.17" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">·</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-12759">example</span> <span class="unknown token" data-binding="">:</span>
    <a href="#WaveEquation"><span class="const token" data-binding="const-WaveEquation" data-verso-hover="205">WaveEquation</span></a> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-12787">fun</span> <span class="var token" data-binding="var-_uniq.614" data-verso-hover="177">t</span> <span class="var token" data-binding="var-_uniq.617" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.617" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.614" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-13702308343662842609-12814-12816"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-12814" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13702308343662842609-12814-12816"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><a href="#WaveEquation"><span class="const token" data-binding="const-WaveEquation" data-verso-hover="205">WaveEquation</span></a> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.24064" data-verso-hover="177">t</span> <span class="var token" data-binding="var-_uniq.24066" data-verso-hover="177">x</span> =&gt; <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="var token" data-binding="var-_uniq.24066" data-verso-hover="177">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.24064" data-verso-hover="177">t</span>)</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-5896117019573496928-12819-12844"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-12819" data-verso-hover="188">unfold</span> <a href="#WaveEquation"><span class="const token" data-binding="const-WaveEquation" data-verso-hover="205">WaveEquation</span></a> <span class="const token" data-binding="const-deriv" data-verso-hover="190">deriv</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5896117019573496928-12819-12844"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∀ (<span class="var token" data-binding="var-_uniq.24062" data-verso-hover="177">x </span><span class="var token" data-binding="var-_uniq.24063" data-verso-hover="177">t</span> : <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>),
  (∂ (<span class="var token" data-binding="var-_uniq.24065" data-verso-hover="177">x_1</span>:=<span class="var token" data-binding="var-_uniq.24063" data-verso-hover="177">t</span>), (∂ (<span class="var token" data-binding="var-_uniq.24069" data-verso-hover="177">x_2</span>:=<span class="var token" data-binding="var-_uniq.24065" data-verso-hover="177">x_1</span>), (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.24071" data-verso-hover="177">t</span> <span class="var token" data-binding="var-_uniq.24073" data-verso-hover="177">x</span> =&gt; <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="var token" data-binding="var-_uniq.24073" data-verso-hover="177">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.24071" data-verso-hover="177">t</span>)) <span class="var token" data-binding="var-_uniq.24069" data-verso-hover="177">x_2</span> <span class="var token" data-binding="var-_uniq.24062" data-verso-hover="177">x</span>) 1) 1<span class="const token" data-binding="const-Eq" data-verso-hover="69"> =
    </span>(∂ (<span class="var token" data-binding="var-_uniq.24095" data-verso-hover="177">x</span>:=<span class="var token" data-binding="var-_uniq.24062" data-verso-hover="177">x</span>), (∂ (<span class="var token" data-binding="var-_uniq.24097" data-verso-hover="177">x</span>:=<span class="var token" data-binding="var-_uniq.24095" data-verso-hover="177">x</span>), (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.24099" data-verso-hover="177">t</span> <span class="var token" data-binding="var-_uniq.24101" data-verso-hover="177">x</span> =&gt; <span class="const token" data-binding="const-SciLean.Scalar.sin" data-verso-hover="198">sin</span> (<span class="var token" data-binding="var-_uniq.24101" data-verso-hover="177">x</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.24099" data-verso-hover="177">t</span>)) <span class="var token" data-binding="var-_uniq.24063" data-verso-hover="177">t</span> <span class="var token" data-binding="var-_uniq.24097" data-verso-hover="177">x</span>) 1) 1</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-7-12847-12856"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-12847">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-12847-12856"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></details><ol start="4">
                  <li>
                    <p>
                      solution to heat equation</p>
                    </li>
                  </ol>
                </section>
              </section>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Gradient">
              2.1.3. Gradient</h2>
            <p>
              In many practical applications, we need to compute gradient instead of directional derivative. For a function \(f : \mathbb{R}^n \rightarrow \mathbb{R} \) the gradient of \(f\) is a vector of all its partial derivatives</p>
            <p>
              $$\nabla f = \left(\frac{\partial f}{\partial x_1}, \dots, \frac{\partial f}{\partial x_n} \right)
$$</p>
            <p>
              A more general way of defining gradient is through linear map transposition/adjoint. The derivative of a function <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.269" data-verso-hover="206">f</span></code> at point <code>x</code> is a linear map from <code>X</code> to <code>ℝ</code></p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">∂ f x : X →L[ℝ] ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-13749">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.193" data-verso-hover="206">f</span> <span class="var token" data-binding="var-_uniq.195" data-verso-hover="207">x</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>∂ f x : X →L[ℝ] ℝ
</pre></div>
            <p>
              To obtain gradient we take an adjoint and evaluate it at one. This is exactly how gradient is defined.</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-13938">example</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∇</span> <span class="var token" data-binding="var-_uniq.193" data-verso-hover="206">f</span> <span class="var token" data-binding="var-_uniq.195" data-verso-hover="207">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="const token" data-binding="const-adjoint" data-verso-hover="208">adjoint</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.193" data-verso-hover="206">f</span> <span class="var token" data-binding="var-_uniq.195" data-verso-hover="207">x</span><span class="unknown token" data-binding="">)</span> <span class="typed token" data-binding="" data-verso-hover="177">1</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-4459516225061774557-13987-13989"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-13987" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-4459516225061774557-13987-13989"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="129">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type u_1</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.6" data-verso-hover="209">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.25" data-verso-hover="211">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.189" data-verso-hover="213">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.193" data-verso-hover="206">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="129">X</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.195" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.201" data-verso-hover="183">g</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.203" data-verso-hover="207">x₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.205" data-verso-hover="207">y</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="129">X</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∇ <span class="var token" data-binding="var-_uniq.193" data-verso-hover="206">f</span> <span class="var token" data-binding="var-_uniq.195" data-verso-hover="207">x</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="const token" data-binding="const-adjoint" data-verso-hover="208">adjoint</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> (⇑(∂ <span class="var token" data-binding="var-_uniq.193" data-verso-hover="206">f</span> <span class="var token" data-binding="var-_uniq.195" data-verso-hover="207">x</span>)) 1</span></span></span></span></span> <span class="tactic"><label for="tactic-state-7-13990-13993"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticRfl-13990" data-verso-hover="215">rfl</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-13990-13993"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              Few examples of computing gradients</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">(1, 0) : ℝ × ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-14059">#check</span></span> <span class="unknown token" data-binding="">∇!</span> <span class="var token" data-binding="var-_uniq.253" data-verso-hover="181">x</span><span class="unknown token" data-binding="">:=</span><span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="181">0</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">×</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.253" data-verso-hover="181">x</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>(1, 0) : ℝ × ℝ
</pre></div>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">2 • x₀ : X</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-14171">#check</span></span> <span class="unknown token" data-binding="">∇!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.210" data-verso-hover="207">x</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.203" data-verso-hover="207">x₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">‖</span><span class="var token" data-binding="var-_uniq.210" data-verso-hover="207">x</span><span class="unknown token" data-binding="">‖₂²</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>2 • x₀ : X
</pre></div>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">y : X</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-14281">#check</span></span> <span class="unknown token" data-binding="">∇!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.210" data-verso-hover="207">x</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.203" data-verso-hover="207">x₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">⟪</span><span class="var token" data-binding="var-_uniq.210" data-verso-hover="207">x</span><span class="unknown token" data-binding="">,</span><span class="var token" data-binding="var-_uniq.205" data-verso-hover="207">y</span><span class="unknown token" data-binding="">⟫</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>y : X
</pre></div>
            <section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Gradient--Exercises">
                2.1.3.1. Exercises</h3>
              <ol start="1">
                <li>
                  <p>
                    Compute gradient of <code>x[0]</code>, <code>‖x‖₂²</code>, <code>⟪x,y⟫</code> for <code>x y : Float^[3]</code> and gradient of <code>A[0,1]</code>, <code>‖A‖₂²</code>, <code>⟪A,B⟫</code> for <code>A B : Float^[2,2]</code>. Also evaluate those results for some concrete values.</p>
                  </li>
                </ol>
              <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-SciLean.NotationOverField.commandSet_default_scalar_-14614">set_default_scalar</span> <span class="unknown token" data-binding="">Float</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">⊞[1.000000, 0.000000, 0.000000]</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-14640" data-verso-hover="11">#eval</span></span> <span class="unknown token" data-binding="">∇!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.923" data-verso-hover="91">x</span><span class="unknown token" data-binding="">:=</span><span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">2.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">3.0</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.923" data-verso-hover="91">x</span><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="45">0</span><span class="unknown token" data-binding="">]</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">⊞[2.000000, 4.000000, 6.000000]</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-14679" data-verso-hover="11">#eval</span></span> <span class="unknown token" data-binding="">∇!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4643" data-verso-hover="91">x</span><span class="unknown token" data-binding="">:=</span><span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">2.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">3.0</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">‖</span><span class="var token" data-binding="var-_uniq.4643" data-verso-hover="91">x</span><span class="unknown token" data-binding="">‖₂²</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">⊞[0.000000, 1.000000, 0.000000]</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-14726" data-verso-hover="11">#eval</span></span> <span class="unknown token" data-binding="">∇!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10147" data-verso-hover="91">x</span><span class="unknown token" data-binding="">:=</span><span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">2.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">3.0</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">⟪</span><span class="var token" data-binding="var-_uniq.10147" data-verso-hover="91">x</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">0.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">0.0</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">⟫</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-14787">def</span> <span class="const token" data-binding="const-matrix1" data-verso-hover="216" id="matrix1">matrix1</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">2.0</span><span class="unknown token" data-binding="">;</span><span class="unknown token" data-binding="">3.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">4.0</span><span class="unknown token" data-binding="">]</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">⊞[0.000000, 1.000000, 0.000000, 0.000000]</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-14824" data-verso-hover="11">#eval</span></span> <span class="unknown token" data-binding="">∇!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.20784" data-verso-hover="217">A</span><span class="unknown token" data-binding="">:=</span><a href="#matrix1"><span class="const token" data-binding="const-matrix1" data-verso-hover="216">matrix1</span></a><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.20784" data-verso-hover="217">A</span><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="48">0</span><span class="unknown token" data-binding="">,</span><span class="typed token" data-binding="" data-verso-hover="48">1</span><span class="unknown token" data-binding="">]</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">⊞[2.000000, 4.000000, 6.000000, 8.000000]</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-14856" data-verso-hover="11">#eval</span></span> <span class="unknown token" data-binding="">∇!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.23682" data-verso-hover="217">A</span><span class="unknown token" data-binding="">:=</span><a href="#matrix1"><span class="const token" data-binding="const-matrix1" data-verso-hover="216">matrix1</span></a><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">‖</span><span class="var token" data-binding="var-_uniq.23682" data-verso-hover="217">A</span><span class="unknown token" data-binding="">‖₂²</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">⊞[0.000000, 1.000000, 0.000000, 0.000000]</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-14894" data-verso-hover="11">#eval</span></span> <span class="unknown token" data-binding="">∇!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.27982" data-verso-hover="217">A</span><span class="unknown token" data-binding="">:=</span><a href="#matrix1"><span class="const token" data-binding="const-matrix1" data-verso-hover="216">matrix1</span></a><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">⟪</span><span class="var token" data-binding="var-_uniq.27982" data-verso-hover="217">A</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">⊞[</span><span class="unknown token" data-binding="">0.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">1.0</span><span class="unknown token" data-binding="">;</span><span class="unknown token" data-binding="">0.0</span><span class="unknown token" data-binding="">,</span><span class="unknown token" data-binding="">0.0</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">⟫</span>
<span class="unknown token" data-binding=""></span></code></details><ol start="2">
                <li>
                  <p>
                    Previously we computed \(\sqrt{y}\) using Newton's method. Similarly we can <code class="hl lean inline" data-lean-context="examples"><a href="#mySqrt"><span class="const token" data-binding="const-mySqrt" data-verso-hover="185">mySqrt</span></a></code> Compute <code>sqrt y</code> using gradient descent by minimizing objective function <code>f := fun x =&gt; (x^2 - y)^2</code></p>
                  </li>
                </ol>
              <ol start="3">
                <li>
                  <p>
                    Linear regression via gradient descent. Find matrix \( A \in \mathbb{R}^{2\times 2} \) that for given data \( x_i, y_i \in \mathbb{R}^2 \) minimizes</p>
                  </li>
                </ol>
              <p>
                $$A = \text{argmin}_B \sum_i \| B x_i - y_i \|^2
$$</p>
              <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-SciLean.NotationOverField.commandSet_default_scalar_-15469">set_default_scalar</span> <span class="unknown token" data-binding="">Float</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.partial-15495">partial</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-15503">def</span> <span class="const token" data-binding="const-linreg" data-verso-hover="218" id="linreg">linreg</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.984" data-verso-hover="2">n</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℕ</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1025" data-verso-hover="219">x</span> <span class="var token" data-binding="var-_uniq.1038" data-verso-hover="219">y</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">^[</span><span class="var token" data-binding="var-_uniq.984" data-verso-hover="2">n</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">,</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-Id.run" data-verso-hover="6">Id.run</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-15574">do</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-15579">let</span> <span class="var token" data-binding="var-_uniq.4038" data-verso-hover="220">loss</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-15591">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1106" data-verso-hover="217">A</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">,</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span>
    <span class="unknown token" data-binding="">∑</span> <span class="var token" data-binding="var-_uniq.1116" data-verso-hover="31">i</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">‖</span><span class="var token" data-binding="var-_uniq.1106" data-verso-hover="217">A</span> <span class="unknown token" data-binding="">*</span> <span class="var token" data-binding="var-_uniq.1025" data-verso-hover="219">x</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.1116" data-verso-hover="31">i</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.1038" data-verso-hover="219">y</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.1116" data-verso-hover="31">i</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">‖₂²</span>

  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-15657">let</span> <span class="var token" data-binding="var-_uniq.4048" data-verso-hover="47">rate</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">1e-1</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-15676">let</span> <span class="keyword token" data-binding="kw-occ-null-15680">mut</span> <span class="var token" data-binding="var-_uniq.4318" data-verso-hover="217">A</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span><span class="unknown token" data-binding="">^[</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">,</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span> <span class="typed token" data-binding="" data-verso-hover="217">0</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-15707">let</span> <span class="keyword token" data-binding="kw-occ-null-15711">mut</span> <span class="var token" data-binding="var-_uniq.4325" data-verso-hover="47">err</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">1.0</span>

  <span class="keyword token" data-binding="kw-occ-Lean.doElemWhile_Do_-15729">while</span> <span class="var token" data-binding="var-_uniq.4325" data-verso-hover="47">err</span> <span class="unknown token" data-binding="">&gt;</span> <span class="unknown token" data-binding="">1e-6</span> <span class="keyword token" data-binding="kw-occ-Lean.doElemWhile_Do_-15729">do</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-15753">let</span> <span class="var token" data-binding="var-_uniq.36373" data-verso-hover="217">ΔA</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4048" data-verso-hover="47">rate</span> <span class="unknown token" data-binding="">•</span> <span class="unknown token" data-binding="">∇</span> <span class="var token" data-binding="var-_uniq.4438" data-verso-hover="217">A'</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.4318" data-verso-hover="217">A</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.4038" data-verso-hover="220">loss</span> <span class="var token" data-binding="var-_uniq.4438" data-verso-hover="217">A'</span><span class="unknown token" data-binding="">)</span>
      <span class="keyword token" data-binding="kw-occ-SciLean.term_Rewrite_byAssuming__-15764">rewrite_by</span> <span class="tactic"><label for="tactic-state-7174114980389840582-15811-15821"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.Conv.simp-15811" data-verso-hover="221">simp</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.4038" data-verso-hover="220">loss</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7174114980389840582-15811-15821"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type ?u.782</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.783" data-verso-hover="209">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.802" data-verso-hover="211">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.966" data-verso-hover="213">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.193" data-verso-hover="206">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.195" data-verso-hover="207">x✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.201" data-verso-hover="183">g</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.203" data-verso-hover="207">x₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.205" data-verso-hover="207">y✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.984" data-verso-hover="2">n</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Nat" data-verso-hover="5">ℕ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1025" data-verso-hover="219">x</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2]^[<span class="var token" data-binding="var-_uniq.984" data-verso-hover="2">n</span>]</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1038" data-verso-hover="219">y</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2]^[<span class="var token" data-binding="var-_uniq.984" data-verso-hover="2">n</span>]</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4038" data-verso-hover="220">loss</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2, 2] → <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.37277" data-verso-hover="217">A</span> =&gt;  ∑ <span class="var token" data-binding="var-_uniq.37292" data-verso-hover="31">i</span>, ‖<span class="var token" data-binding="var-_uniq.37277" data-verso-hover="217">A</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.1025" data-verso-hover="219">x</span>[<span class="var token" data-binding="var-_uniq.37292" data-verso-hover="31">i</span>]<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.1038" data-verso-hover="219">y</span>[<span class="var token" data-binding="var-_uniq.37292" data-verso-hover="31">i</span>]‖₂²</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4048" data-verso-hover="47">rate</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> := 0.1</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4318" data-verso-hover="217">A✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2, 2] := 0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4325" data-verso-hover="47">err✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> := 1.0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4247" data-verso-hover="223">col✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Lean.Loop" data-verso-hover="224">Lean.Loop</span> := <span class="const token" data-binding="const-Lean.Loop.mk" data-verso-hover="225">Lean.Loop.mk</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4308" data-verso-hover="226">x✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Unit" data-verso-hover="227">Unit</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4311" data-verso-hover="228">r✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-MProd" data-verso-hover="229">MProd</span> (<span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2, 2]) <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4318" data-verso-hover="217">A</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2, 2] := <span class="var token" data-binding="var-_uniq.4311" data-verso-hover="228">r✝</span>.fst</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4325" data-verso-hover="47">err</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> := <span class="var token" data-binding="var-_uniq.4311" data-verso-hover="228">r✝</span>.snd</span></span></span><span class="conclusion"><span class="prefix">| </span><span class="type"><span class="var token" data-binding="var-_uniq.4048" data-verso-hover="47">rate</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span>∇ (<span class="var token" data-binding="var-_uniq.37304" data-verso-hover="217">A'</span>:=<span class="var token" data-binding="var-_uniq.4318" data-verso-hover="217">A</span>), ∑ <span class="var token" data-binding="var-_uniq.37319" data-verso-hover="31">i</span>, ‖<span class="const token" data-binding="const-SciLean.MatrixType.Base.gemv" data-verso-hover="231">MatrixType.gemv</span> 1 0 <span class="var token" data-binding="var-_uniq.37304" data-verso-hover="217">A'</span> <span class="var token" data-binding="var-_uniq.1025" data-verso-hover="219">x</span>[<span class="var token" data-binding="var-_uniq.37319" data-verso-hover="31">i</span>] 0<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.1038" data-verso-hover="219">y</span>[<span class="var token" data-binding="var-_uniq.37319" data-verso-hover="31">i</span>]‖₂²</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-4241851624922594781-15823-15831"><span class="keyword token" data-binding="kw-occ-SciLean.Tactic.lautodiffConvStx-15823">autodiff</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-4241851624922594781-15823-15831"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type ?u.782</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.783" data-verso-hover="209">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.802" data-verso-hover="211">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.966" data-verso-hover="213">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.193" data-verso-hover="206">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.195" data-verso-hover="207">x✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.201" data-verso-hover="183">g</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.203" data-verso-hover="207">x₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.205" data-verso-hover="207">y✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="222">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.984" data-verso-hover="2">n</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Nat" data-verso-hover="5">ℕ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1025" data-verso-hover="219">x</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2]^[<span class="var token" data-binding="var-_uniq.984" data-verso-hover="2">n</span>]</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1038" data-verso-hover="219">y</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2]^[<span class="var token" data-binding="var-_uniq.984" data-verso-hover="2">n</span>]</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4038" data-verso-hover="220">loss</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2, 2] → <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.37277" data-verso-hover="217">A</span> =&gt;  ∑ <span class="var token" data-binding="var-_uniq.37292" data-verso-hover="31">i</span>, ‖<span class="var token" data-binding="var-_uniq.37277" data-verso-hover="217">A</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.1025" data-verso-hover="219">x</span>[<span class="var token" data-binding="var-_uniq.37292" data-verso-hover="31">i</span>]<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.1038" data-verso-hover="219">y</span>[<span class="var token" data-binding="var-_uniq.37292" data-verso-hover="31">i</span>]‖₂²</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4048" data-verso-hover="47">rate</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> := 0.1</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4318" data-verso-hover="217">A✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2, 2] := 0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4325" data-verso-hover="47">err✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> := 1.0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4247" data-verso-hover="223">col✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Lean.Loop" data-verso-hover="224">Lean.Loop</span> := <span class="const token" data-binding="const-Lean.Loop.mk" data-verso-hover="225">Lean.Loop.mk</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4308" data-verso-hover="226">x✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Unit" data-verso-hover="227">Unit</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4311" data-verso-hover="228">r✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-MProd" data-verso-hover="229">MProd</span> (<span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2, 2]) <span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4318" data-verso-hover="217">A</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span>^[2, 2] := <span class="var token" data-binding="var-_uniq.4311" data-verso-hover="228">r✝</span>.fst</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4325" data-verso-hover="47">err</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Float" data-verso-hover="26">Float</span> := <span class="var token" data-binding="var-_uniq.4311" data-verso-hover="228">r✝</span>.snd</span></span></span><span class="conclusion"><span class="prefix">| </span><span class="type"><span class="var token" data-binding="var-_uniq.4048" data-verso-hover="47">rate</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> •</span> ∑ <span class="var token" data-binding="var-_uniq.37308" data-verso-hover="31">i</span>,
    <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.37335" data-verso-hover="232">zdf</span> := <span class="var token" data-binding="var-_uniq.1025" data-verso-hover="219">x</span>[<span class="var token" data-binding="var-_uniq.37308" data-verso-hover="31">i</span>];
    <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.37379" data-verso-hover="232">zdf_1</span> := <span class="const token" data-binding="const-SciLean.MatrixType.Base.gemv" data-verso-hover="231">MatrixType.gemv</span> 1 0 <span class="var token" data-binding="var-_uniq.4318" data-verso-hover="217">A</span> <span class="var token" data-binding="var-_uniq.37335" data-verso-hover="232">zdf</span> 0;
    <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.37394" data-verso-hover="232">ydg</span> := <span class="var token" data-binding="var-_uniq.1038" data-verso-hover="219">y</span>[<span class="var token" data-binding="var-_uniq.37308" data-verso-hover="31">i</span>];
    <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.37410" data-verso-hover="232">ydg</span> := <span class="var token" data-binding="var-_uniq.37379" data-verso-hover="232">zdf_1</span><span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.37394" data-verso-hover="232">ydg</span>;
    <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.37419" data-verso-hover="232">dy</span> := 2<span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span><span class="var token" data-binding="var-_uniq.37410" data-verso-hover="232">ydg</span>;
    <span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.37459" data-verso-hover="217">dy</span> := <span class="const token" data-binding="const-SciLean.MatrixType.Dense.outerprodAdd" data-verso-hover="233">MatrixType.outerprodAdd</span> 1 <span class="var token" data-binding="var-_uniq.37419" data-verso-hover="232">dy</span> <span class="var token" data-binding="var-_uniq.37335" data-verso-hover="232">zdf</span> 0;
    <span class="var token" data-binding="var-_uniq.37459" data-verso-hover="217">dy</span></span></span></span></span></span>
    <span class="var token" data-binding="var-_uniq.4325" data-verso-hover="47">err</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">‖</span><span class="var token" data-binding="var-_uniq.36373" data-verso-hover="217">ΔA</span><span class="unknown token" data-binding="">‖₂</span>
    <span class="var token" data-binding="var-_uniq.4318" data-verso-hover="217">A</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.4318" data-verso-hover="217">A</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.36373" data-verso-hover="217">ΔA</span>

  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doReturn-15876" data-verso-hover="10">return</span> <span class="var token" data-binding="var-_uniq.4318" data-verso-hover="217">A</span>
<span class="unknown token" data-binding=""></span></code></details><ol start="4">
                <li>
                  <p>
                    Write down Euler-Lagrange equation over abstract vector space <code>X</code> and show that for lagrangian <code>L x v := 1/2 * m * ‖v‖₂² - φ x</code> the Euler-Langran equation is <code>m * ∂ (∂ x) t = - ∇ φ x</code></p>
                  </li>
                </ol>
              <p>
                Either define the Lagrangian over <code>ℝ×ℝ</code>, <code>L : ℝ×ℝ → ℝ×ℝ → ℝ</code> or you can introduce abstract vector space <code>X</code> using this variable command</p>
              <pre>variable {X} [NormedAddCommGroup X] [AdjointSpace ℝ X] [CompleteSpace X]
</pre><p>
                The explanation of these typeclasses will be discussed in the last section "Abstract Vector Spaces".</p>
              <details class="foldable"><summary class="description">Solution</summary><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-SciLean.NotationOverField.commandSet_default_scalar_-16470">set_default_scalar</span> <span class="unknown token" data-binding="">ℝ</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.noncomputable-16494">noncomputable</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-16508">def</span> <span class="const token" data-binding="const-EulerLagrange" data-verso-hover="234" id="NewtonsLaw">EulerLagrange</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.977" data-verso-hover="235">L</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.981" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.983" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-16579" data-verso-hover="81">let</span> <span class="var token" data-binding="var-_uniq.2288" data-verso-hover="236">v</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.981" data-verso-hover="236">x</span>
  <span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2296" data-verso-hover="177">t'</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.983" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∇</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2378" data-verso-hover="207">v'</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.2288" data-verso-hover="236">v</span> <span class="var token" data-binding="var-_uniq.2296" data-verso-hover="177">t'</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.977" data-verso-hover="235">L</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.981" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.2296" data-verso-hover="177">t'</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.2378" data-verso-hover="207">v'</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">-</span>
  <span class="unknown token" data-binding="">∇</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3716" data-verso-hover="207">x'</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.981" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.983" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.977" data-verso-hover="235">L</span> <span class="var token" data-binding="var-_uniq.3716" data-verso-hover="207">x'</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2288" data-verso-hover="236">v</span> <span class="var token" data-binding="var-_uniq.983" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.noncomputable-16672">noncomputable</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-16686">def</span> <span class="const token" data-binding="const-NewtonsLaw" data-verso-hover="237" id="NewtonsLaw">NewtonsLaw</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4351" data-verso-hover="177">m</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4355" data-verso-hover="206">φ</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4359" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4361" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <span class="var token" data-binding="var-_uniq.4351" data-verso-hover="177">m</span> <span class="unknown token" data-binding="">•</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.4359" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.4361" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∇</span> <span class="var token" data-binding="var-_uniq.4355" data-verso-hover="206">φ</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4359" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.4361" data-verso-hover="177">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>

<span class="has-info warning"><span class="hover-container"><span class="hover-info messages"><code class="message warning">declaration uses 'sorry'</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-16799">example</span></span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.13609" data-verso-hover="238">hx</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-ContDiff" data-verso-hover="239">ContDiff</span> <span class="unknown token" data-binding="">ℝ</span> <span class="unknown token" data-binding="">⊤</span> <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.13630" data-verso-hover="240">hφ</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="unknown token" data-binding="">ℝ</span> <span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <a href="#NewtonsLaw"><span class="const token" data-binding="const-EulerLagrange" data-verso-hover="234">EulerLagrange</span></a> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-16925">fun</span> <span class="var token" data-binding="var-_uniq.13639" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.13642" data-verso-hover="207">v</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.12033" data-verso-hover="177">m</span><span class="unknown token" data-binding="">/</span><span class="typed token" data-binding="" data-verso-hover="177">2</span> <span class="unknown token" data-binding="">*</span> <span class="unknown token" data-binding="">‖</span><span class="var token" data-binding="var-_uniq.13642" data-verso-hover="207">v</span><span class="unknown token" data-binding="">‖₂²</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span> <span class="var token" data-binding="var-_uniq.13639" data-verso-hover="207">x</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.13531" data-verso-hover="177">t</span>
    <span class="unknown token" data-binding="">=</span>
    <a href="#NewtonsLaw"><span class="const token" data-binding="const-NewtonsLaw" data-verso-hover="237">NewtonsLaw</span></a> <span class="var token" data-binding="var-_uniq.12033" data-verso-hover="177">m</span> <span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span> <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.13531" data-verso-hover="177">t</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-910523676810972249-17000-17002"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-17000" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-910523676810972249-17000-17002"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type u_1</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.9050" data-verso-hover="209">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.9069" data-verso-hover="211">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.9233" data-verso-hover="213">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4337" data-verso-hover="206">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4339" data-verso-hover="207">x✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4345" data-verso-hover="183">g</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4347" data-verso-hover="207">x₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4349" data-verso-hover="207">y</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.14015" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> → <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13609" data-verso-hover="238">hx</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-ContDiff" data-verso-hover="239">ContDiff</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="const token" data-binding="const-Top.top" data-verso-hover="242">⊤</span> <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13630" data-verso-hover="240">hφ</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><a href="#NewtonsLaw"><span class="const token" data-binding="const-EulerLagrange" data-verso-hover="234">EulerLagrange</span></a> (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.89501" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.89503" data-verso-hover="207">v</span> =&gt; <span class="var token" data-binding="var-_uniq.14015" data-verso-hover="177">m</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span>2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>‖<span class="var token" data-binding="var-_uniq.89503" data-verso-hover="207">v</span>‖₂²<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span> <span class="var token" data-binding="var-_uniq.89501" data-verso-hover="207">x</span>) <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><a href="#NewtonsLaw"><span class="const token" data-binding="const-NewtonsLaw" data-verso-hover="237">NewtonsLaw</span></a> <span class="var token" data-binding="var-_uniq.14015" data-verso-hover="177">m</span> <span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span> <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-10850412037837798465-17005-17052"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-17005" data-verso-hover="188">unfold</span> <a href="#NewtonsLaw"><span class="const token" data-binding="const-EulerLagrange" data-verso-hover="234">EulerLagrange</span></a> <a href="#NewtonsLaw"><span class="const token" data-binding="const-NewtonsLaw" data-verso-hover="237">NewtonsLaw</span></a> <span class="const token" data-binding="const-deriv" data-verso-hover="190">deriv</span> <span class="const token" data-binding="const-SciLean.fgradient" data-verso-hover="243">fgradient</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-10850412037837798465-17005-17052"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type u_1</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.9050" data-verso-hover="209">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.9069" data-verso-hover="211">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.9233" data-verso-hover="213">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4337" data-verso-hover="206">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4339" data-verso-hover="207">x✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4345" data-verso-hover="183">g</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4347" data-verso-hover="207">x₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4349" data-verso-hover="207">y</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.14015" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> → <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13609" data-verso-hover="238">hx</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-ContDiff" data-verso-hover="239">ContDiff</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="const token" data-binding="const-Top.top" data-verso-hover="242">⊤</span> <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13630" data-verso-hover="240">hφ</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.89501" data-verso-hover="236">v</span> := <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.89500" data-verso-hover="177">x_1</span> =&gt; (∂ <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.89500" data-verso-hover="177">x_1</span>) 1;
  (∂ (<span class="var token" data-binding="var-_uniq.89515" data-verso-hover="177">t'</span>:=<span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span>), (&lt;∂ (<span class="var token" data-binding="var-_uniq.89529" data-verso-hover="207">v'</span>:=<span class="var token" data-binding="var-_uniq.89501" data-verso-hover="236">v</span> <span class="var token" data-binding="var-_uniq.89515" data-verso-hover="177">t'</span>), (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.89531" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.89533" data-verso-hover="207">v</span> =&gt; <span class="var token" data-binding="var-_uniq.14015" data-verso-hover="177">m</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span>2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>‖<span class="var token" data-binding="var-_uniq.89533" data-verso-hover="207">v</span>‖₂²<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span> <span class="var token" data-binding="var-_uniq.89531" data-verso-hover="207">x</span>) (<span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.89515" data-verso-hover="177">t'</span>) <span class="var token" data-binding="var-_uniq.89529" data-verso-hover="207">v'</span>).2 1) 1<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> -
    </span>(&lt;∂ (<span class="var token" data-binding="var-_uniq.89589" data-verso-hover="207">x'</span>:=<span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span>), (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.89591" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.89593" data-verso-hover="207">v</span> =&gt; <span class="var token" data-binding="var-_uniq.14015" data-verso-hover="177">m</span><span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span>2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span>‖<span class="var token" data-binding="var-_uniq.89593" data-verso-hover="207">v</span>‖₂²<span class="const token" data-binding="const-HSub.hSub" data-verso-hover="180"> - </span><span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span> <span class="var token" data-binding="var-_uniq.89591" data-verso-hover="207">x</span>) <span class="var token" data-binding="var-_uniq.89589" data-verso-hover="207">x'</span> (<span class="var token" data-binding="var-_uniq.89501" data-verso-hover="236">v</span> <span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span>)).2 1)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> =
  </span><span class="var token" data-binding="var-_uniq.14015" data-verso-hover="177">m</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span>(∂ (<span class="var token" data-binding="var-_uniq.89640" data-verso-hover="177">x_1</span>:=<span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span>), (∂ <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.89640" data-verso-hover="177">x_1</span>) 1) 1<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span>(&lt;∂ <span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span> (<span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span>)).2 1</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-4253008949492357590-17055-17076"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-17055">fun_trans</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-smul_smul" data-verso-hover="244">smul_smul</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-4253008949492357590-17055-17076"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type u_1</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.9050" data-verso-hover="209">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.9069" data-verso-hover="211">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.9233" data-verso-hover="213">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4337" data-verso-hover="206">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4339" data-verso-hover="207">x✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4345" data-verso-hover="183">g</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4347" data-verso-hover="207">x₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4349" data-verso-hover="207">y</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.14015" data-verso-hover="177">m</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> → <span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13609" data-verso-hover="238">hx</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-ContDiff" data-verso-hover="239">ContDiff</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="const token" data-binding="const-Top.top" data-verso-hover="242">⊤</span> <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.4147" data-verso-hover="129">X</span> → <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.13630" data-verso-hover="240">hφ</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="var token" data-binding="var-_uniq.13613" data-verso-hover="206">φ</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(∂ (<span class="var token" data-binding="var-_uniq.89499" data-verso-hover="177">t'</span>:=<span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span>), <span class="var token" data-binding="var-_uniq.14015" data-verso-hover="177">m</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span>(∂ <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.89499" data-verso-hover="177">t'</span>) 1) 1<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="var token" data-binding="var-_uniq.14015" data-verso-hover="177">m</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span>(∂ (<span class="var token" data-binding="var-_uniq.89519" data-verso-hover="177">x_1</span>:=<span class="var token" data-binding="var-_uniq.14016" data-verso-hover="177">t</span>), (∂ <span class="var token" data-binding="var-_uniq.13535" data-verso-hover="236">x</span> <span class="var token" data-binding="var-_uniq.89519" data-verso-hover="177">x_1</span>) 1) 1</span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-7-17079-17084"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSorry-17079" data-verso-hover="245">sorry</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-17079-17084"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></details></section>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Derivative-Rules">
              2.1.4. Derivative Rules</h2>
            <p>
              A commong issue when <code>fun_trans</code> is not doing what we expect is that there is a missing differentiation theorem.</p>
            <p>
              For example, if we define a function</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-17424">def</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x</span>
<span class="unknown token" data-binding=""></span></code><p>
              then nothing happens when we try to differentiate it</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; (∂ (x:=x), foo x) 1 : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-17542">#check</span></span> <span class="unknown token" data-binding="">∂!</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>fun x =&gt; (∂ (x:=x), foo x) 1 : ℝ → ℝ
</pre></div>
            <p>
              Turning on the <code>fun_trans</code> trace reveals useful information</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-17714" data-verso-hover="247">set_option</span> <span class="option token" data-binding="option-trace.Meta.Tactic.fun_trans" data-verso-hover="248">trace.Meta.Tactic.fun_trans</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-17714" data-verso-hover="247">true</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.in-17714">in</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; (∂ (x:=x), foo x) 1 : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-17761">#check</span></span> <span class="unknown token" data-binding="">∂!</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span>
<span class="unknown token" data-binding=""></span></code><pre>[Meta.Tactic.fun_trans] [❌] ∂ (x:=x), foo x
  [Meta.Tactic.fun_trans] candidate theorems for foo: []
  [Meta.Tactic.fun_trans] candidate local theorems for foo: []
  [Meta.Tactic.fun_trans] candidate fvar theorems: [isContinuousLinearMap_fderiv]
  [Meta.Tactic.fun_trans] [❌] applying: isContinuousLinearMap_fderiv
    [Meta.Tactic.fun_trans] isContinuousLinearMap_fderiv, failed to discharge hypotheses
          SciLean.IsContinuousLinearMap ℝ fun x =&gt; foo x
</pre><p>
              The <code>❌</code> on the first line signifies that <code>fun_trans</code> failed to make prograss on <code>∂ (x:=x), foo x</code>. The next two lines</p>
            <pre>  [Meta.Tactic.fun_trans] candidate theorems for foo: []
  [Meta.Tactic.fun_trans] candidate local theorems for foo: []
</pre><p>
              states that there are no derivative theorems for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span></code>. The next line</p>
            <pre>  [Meta.Tactic.fun_trans] candidate fvar theorems: [isContinuousLinearMap_fderiv]
</pre><p>
              states that there is a potentially applicable theorem <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-isContinuousLinearMap_fderiv" data-verso-hover="249">isContinuousLinearMap_fderiv</span></code> which can differentiate linear functions. However the next few lines report that applying this theorem failed as <code>fun_trans</code> can't prove that <code>foo</code> is (continuous) linear map.</p>
            <p>
              To remedy this problem we can define derivative of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span></code></p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-19020">def</span> <span class="const token" data-binding="const-foo_deriv" data-verso-hover="250" id="foo_deriv">foo_deriv</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="typed token" data-binding="" data-verso-hover="177">2</span><span class="unknown token" data-binding="">*</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">+</span> <span class="typed token" data-binding="" data-verso-hover="177">1</span>
<span class="unknown token" data-binding=""></span></code><p>
              and add a theorem that the derivative of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span></code> is equal to <code class="hl lean inline" data-lean-context="examples"><a href="#foo_deriv"><span class="const token" data-binding="const-foo_deriv" data-verso-hover="250">foo_deriv</span></a></code></p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-19150" data-verso-hover="162">open</span> <span class="unknown token" data-binding="">SciLean</span>
<span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_trans</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-19176">theorem</span> <span class="const token" data-binding="const-foo_deriv_rule" data-verso-hover="251" id="foo_deriv_rule">foo_deriv_rule</span> <span class="unknown token" data-binding="">:</span>
    <span class="const token" data-binding="const-fderiv" data-verso-hover="176">fderiv</span> <span class="unknown token" data-binding="">ℝ</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span>
    <span class="unknown token" data-binding="">=</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-19230">fun</span> <span class="var token" data-binding="var-_uniq.484" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="keyword token" data-binding="kw-occ-SciLean.«termFun_=>L[_]_»-19239">fun</span> <span class="var token" data-binding="var-_uniq.499" data-verso-hover="177">dx</span> <span class="unknown token" data-binding="">=&gt;L[</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">]</span> <span class="var token" data-binding="var-_uniq.499" data-verso-hover="177">dx</span> <span class="unknown token" data-binding="">•</span> <a href="#foo_deriv"><span class="const token" data-binding="const-foo_deriv" data-verso-hover="250">foo_deriv</span></a> <span class="var token" data-binding="var-_uniq.484" data-verso-hover="177">x</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-1271348222109479516-19277-19279"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-19277" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1271348222109479516-19277-19279"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∂ <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.16023" data-verso-hover="177">x</span> =&gt; <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.16037" data-verso-hover="177">dx</span> =&gt;L[<span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>] <span class="var token" data-binding="var-_uniq.16037" data-verso-hover="177">dx</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span><a href="#foo_deriv"><span class="const token" data-binding="const-foo_deriv" data-verso-hover="250">foo_deriv</span></a> <span class="var token" data-binding="var-_uniq.16023" data-verso-hover="177">x</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-11436752468945002392-19282-19302"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-19282" data-verso-hover="188">unfold</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <a href="#foo_deriv"><span class="const token" data-binding="const-foo_deriv" data-verso-hover="250">foo_deriv</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-11436752468945002392-19282-19302"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∂ <span class="var token" data-binding="var-_uniq.16023" data-verso-hover="177">x</span>, (<span class="var token" data-binding="var-_uniq.16023" data-verso-hover="177">x</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.16023" data-verso-hover="177">x</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.16048" data-verso-hover="177">x</span> =&gt; <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.16062" data-verso-hover="177">dx</span> =&gt;L[<span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>] <span class="var token" data-binding="var-_uniq.16062" data-verso-hover="177">dx</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span>(2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.16048" data-verso-hover="177">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span>1)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-843344813683911736-19304-19309"><span class="keyword token" data-binding="kw-occ-Lean.Elab.Tactic.Ext.ext-19304" data-verso-hover="252">ext</span> <span class="var token" data-binding="var-_uniq.2406" data-verso-hover="177">x</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-843344813683911736-19304-19309"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-36" checked="checked"><span for="--verso-unique-36" class="goal-name">h.h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2406" data-verso-hover="177">x</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(∂ (<span class="var token" data-binding="var-_uniq.16022" data-verso-hover="177">x</span>:=<span class="var token" data-binding="var-_uniq.2406" data-verso-hover="177">x</span>), (<span class="var token" data-binding="var-_uniq.16022" data-verso-hover="177">x</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.16022" data-verso-hover="177">x</span>)) 1<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span>(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.16060" data-verso-hover="177">dx</span> =&gt;L[<span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>] <span class="var token" data-binding="var-_uniq.16060" data-verso-hover="177">dx</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span>(2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.2406" data-verso-hover="177">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span>1)) 1</span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-19311-19320"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-19311">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-19311-19320"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              Because <code class="hl lean inline" data-lean-context="examples"><a href="#foo_deriv_rule"><span class="const token" data-binding="const-foo_deriv_rule" data-verso-hover="251">foo_deriv_rule</span></a></code> is marked with <code>fun_trans</code> attribute it will be used when we try to differentiate <code>foo</code> now</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; foo_deriv x : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-19474">#check</span></span> <span class="unknown token" data-binding="">∂!</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>fun x =&gt; foo_deriv x : ℝ → ℝ
</pre></div>
            <p>
              Unfortuantelly there is one more issue, <code>fun_trans</code> will do nothing when we try to compose <code>foo</code> together</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; (∂ (x:=x), foo (foo x)) 1 : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-19697">#check</span></span> <span class="unknown token" data-binding="">∂!</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>fun x =&gt; (∂ (x:=x), foo (foo x)) 1 : ℝ → ℝ
</pre></div>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-19817" data-verso-hover="247">set_option</span> <span class="option token" data-binding="option-trace.Meta.Tactic.fun_trans" data-verso-hover="248">trace.Meta.Tactic.fun_trans</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-19817" data-verso-hover="247">true</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.in-19817">in</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; (∂ (x:=x), foo (foo x)) 1 : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-19864">#check</span></span> <span class="unknown token" data-binding="">∂!</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><pre>...
  [Meta.Tactic.fun_trans] trying comp theorem SciLean.fderiv.comp_rule
  [Meta.Tactic.fun_trans] [❌] applying: SciLean.fderiv.comp_rule
    [Meta.Tactic.fun_trans] SciLean.fderiv.comp_rule, failed to discharge hypotheses
          Differentiable ℝ fun x0 =&gt; foo x0
...
</pre><p>
              The trace reveals that <code>fun_trans</code> tries to apply composition(chain) rule <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-SciLean.fderiv.comp_rule" data-verso-hover="253">SciLean.fderiv.comp_rule</span></code> but it fails as it can't prove <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="unknown token" data-binding="">ℝ</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-20344">fun</span> <span class="var token" data-binding="var-_uniq.587" data-verso-hover="177">x0</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="var token" data-binding="var-_uniq.587" data-verso-hover="177">x0</span></code>. We need another theorem stating that <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span></code> is differentiable function. Mathlib has a tactic <code>fun_prop</code> that can prove differentiability and many other function properties like linearity, continuity, measurability etc. and <code>fun_trans</code> uses this tactic to ensure it can apply chain rule.</p>
            <p>
              We need to add <code>fun_prop</code> theorem for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span></code></p>
            <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">fun_prop</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-20726">theorem</span> <span class="const token" data-binding="const-foo_differentiable" data-verso-hover="254" id="foo_differentiable">foo_differentiable</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="unknown token" data-binding="">ℝ</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-17444790373996943487-20781-20783"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-20781" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-17444790373996943487-20781-20783"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span></span></span></span></span></span> <span class="tactic"><label for="tactic-state-7813095363772071848-20784-20794"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-20784" data-verso-hover="188">unfold</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7813095363772071848-20784-20794"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1030" data-verso-hover="177">x</span> =&gt; <span class="var token" data-binding="var-_uniq.1030" data-verso-hover="177">x</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.1030" data-verso-hover="177">x</span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-20796-20804"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunProp.funPropTacStx-20796" data-verso-hover="255">fun_prop</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-20796-20804"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              Now <code>fun_trans</code> knows that <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span></code> is differentiable function and can safely apply chain rule</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; foo_deriv x * foo_deriv (foo x) : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-20942">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂!</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-SciLean.term_Rewrite_byAssuming__-20949">rewrite_by</span> <span class="tactic"><label for="tactic-state-5105650229118359227-20982-20986"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.Conv.simp-20982" data-verso-hover="221">simp</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5105650229118359227-20982-20986"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">| </span><span class="type"><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.12390" data-verso-hover="177">x</span> =&gt; <a href="#foo_deriv"><span class="const token" data-binding="const-foo_deriv" data-verso-hover="250">foo_deriv</span></a> <span class="var token" data-binding="var-_uniq.12390" data-verso-hover="177">x</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><a href="#foo_deriv"><span class="const token" data-binding="const-foo_deriv" data-verso-hover="250">foo_deriv</span></a> (<span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="var token" data-binding="var-_uniq.12390" data-verso-hover="177">x</span>)</span></span></span></span></span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>fun x =&gt; foo_deriv x * foo_deriv (foo x) : ℝ → ℝ
</pre></div>
            <p>
              Writing these theorems by hand is quite tedious so there is a macro <code>def_fun_prop</code> and <code>def_fun_trans</code> to help you with writing these theorems</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-SciLean.«commandDef_fun_propWith_transitive__:_By_»-21235" data-verso-hover="256">def_fun_prop</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="unknown token" data-binding="">ℝ</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="keyword token" data-binding="kw-occ-SciLean.«commandDef_fun_propWith_transitive__:_By_»-21235" data-verso-hover="256">by</span> <span class="tactic"><label for="tactic-state-5492121300301812861-21276-21286"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.unfold-21276" data-verso-hover="188">unfold</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-5492121300301812861-21276-21286"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span> <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1016" data-verso-hover="177">x</span> =&gt; <span class="var token" data-binding="var-_uniq.1016" data-verso-hover="177">x</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.1016" data-verso-hover="177">x</span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-21288-21296"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunProp.funPropTacStx-21288" data-verso-hover="255">fun_prop</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-21288-21296"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="keyword token" data-binding="kw-occ-SciLean.«commandDef_fun_transWith_transitive__:_By_»-21297" data-verso-hover="257">def_fun_trans</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-fderiv" data-verso-hover="176">fderiv</span> <span class="unknown token" data-binding="">ℝ</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span> <span class="keyword token" data-binding="kw-occ-SciLean.«commandDef_fun_transWith_transitive__:_By_»-21297" data-verso-hover="257">by</span> <span class="tactic"><label for="tactic-state-14005186379330919524-21331-21341"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.Conv.unfold-21331" data-verso-hover="258">unfold</span> <span class="const token" data-binding="const-foo" data-verso-hover="246">foo</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-14005186379330919524-21331-21341"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">| </span><span class="type">∂ <span class="var token" data-binding="var-_uniq.15584" data-verso-hover="177">x</span>, (<span class="var token" data-binding="var-_uniq.15584" data-verso-hover="177">x</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2<span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.15584" data-verso-hover="177">x</span>)</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-1413113978699637044-21343-21352"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransConvStx-21343">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1413113978699637044-21343-21352"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">| </span><span class="type"><span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.15582" data-verso-hover="177">x</span> =&gt; <span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.15596" data-verso-hover="177">x_1</span> =&gt;L[<span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>] 2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.15596" data-verso-hover="177">x_1</span><span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.15582" data-verso-hover="177">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.15596" data-verso-hover="177">x_1</span></span></span></span></span></span>
<span class="unknown token" data-binding=""></span></code><p>
              It generates these theorems and definition</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">foo.arg_x.Differentiable_rule : Differentiable ℝ foo</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-21428">#check</span></span> <span class="const token" data-binding="const-foo.arg_x.Differentiable_rule" data-verso-hover="259">foo.arg_x.Differentiable_rule</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">def foo.arg_x.fderiv : ℝ → ℝ →L[ℝ] ℝ :=
fun x =&gt; fun x_1 =&gt;L[ℝ] 2 * x_1 * x + x_1</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.print-21465">#print</span></span> <span class="const token" data-binding="const-foo.arg_x.fderiv" data-verso-hover="260">foo.arg_x.fderiv</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">foo.arg_x.fderiv_rule : ∂ foo = foo.arg_x.fderiv</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-21489">#check</span></span> <span class="const token" data-binding="const-foo.arg_x.fderiv_rule" data-verso-hover="261">foo.arg_x.fderiv_rule</span>
<span class="unknown token" data-binding=""></span></code><p>
              The problem of writing appropriate theorems for <code>fun_trans</code> and <code>fun_prop</code> is quite involved problem and will be discussed in future chapter.</p>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Differentiating-Division___-Log___-Sqrt___-_________">
              2.1.5. Differentiating Division, Log, Sqrt, ...</h2>
            <p>
              So far we have worked with functions that are smooth. However, functions like division, <code>log</code>, <code>sqrt</code>, <code>‖·‖₂</code> are not differentiable everywhere. We have to be a bit careful with those functions because <strong>SciLean</strong> tries to perform computations that are, at least in principle, fully formalizable. Let's try to differentiate division</p>
            <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; (∂ (x:=x), x⁻¹) 1 : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-22183">#check</span></span> <span class="unknown token" data-binding="">∂!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="177">x</span><span class="unknown token" data-binding="">:</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="177">1</span><span class="unknown token" data-binding="">/</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="177">x</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>fun x =&gt; (∂ (x:=x), x⁻¹) 1 : ℝ → ℝ
</pre></div>
            <p>
              We did not get expected <code>-x⁻²</code>. When differentiation, or any tactic, is not doing what we expect we can turn on tracing. Let's try again with tracing on</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-22449" data-verso-hover="247">set_option</span> <span class="option token" data-binding="option-trace.Meta.Tactic.fun_trans" data-verso-hover="248">trace.Meta.Tactic.fun_trans</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-22449" data-verso-hover="247">true</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.in-22449">in</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; (∂ (x:=x), x⁻¹) 1 : ℝ → ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-22496">#check</span></span> <span class="unknown token" data-binding="">∂!</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="177">x</span><span class="unknown token" data-binding="">:</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="177">1</span><span class="unknown token" data-binding="">/</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="177">x</span>
<span class="unknown token" data-binding=""></span></code><p>
              and the beggining of the trace is saying that <code>fun_trans</code> tried to apply theorem <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-HDiv.hDiv.arg_a0a1.fderiv_rule_at" data-verso-hover="262">HDiv.hDiv.arg_a0a1.fderiv_rule_at</span></code> however it failed to discharge <code>x ≠ 0</code></p>
            <pre>[Meta.Tactic.fun_trans] [❌] ∂ (x:=x), 1 / x
  [Meta.Tactic.fun_trans] candidate theorems for HDiv.hDiv: [HDiv.hDiv.arg_a0a1.fderiv_rule_at]
  [Meta.Tactic.fun_trans] [❌] applying: HDiv.hDiv.arg_a0a1.fderiv_rule_at
    [Meta.Tactic.fun_trans] [❌] discharging: x ≠ 0
    [Meta.Tactic.fun_trans] HDiv.hDiv.arg_a0a1.fderiv_rule_at, failed to discharge hypotheses
          x ≠ 0
</pre><p>
              This makes sense as division <code>1/x</code> is well defined and differentiable only away from zero. Therefore we have to differentiate it at a concrete point that is not equal to zero.</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-23289" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.28" data-verso-hover="263">hx₀</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀</span> <span class="unknown token" data-binding="">≠</span> <span class="typed token" data-binding="" data-verso-hover="177">0</span><span class="unknown token" data-binding="">)</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-23332" data-verso-hover="247">set_option</span> <span class="option token" data-binding="option-trace.Meta.Tactic.fun_trans" data-verso-hover="248">trace.Meta.Tactic.fun_trans</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-23332" data-verso-hover="247">true</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.in-23332">in</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">-1 / x₀ ^ 2 : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-23379">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.61" data-verso-hover="177">x</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="177">1</span><span class="unknown token" data-binding="">/</span><span class="var token" data-binding="var-_uniq.61" data-verso-hover="177">x</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-SciLean.term_Rewrite_byAssuming__-23386">rewrite_by</span> <span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransConvStx-23418">fun_trans</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-token.disch-23429">disch</span><span class="unknown token" data-binding="">:=</span><span class="tactic"><label for="tactic-state-7-23436-23446"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.assumption-23436" data-verso-hover="264">assumption</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-23436-23446"><span class="tactic-state">All goals completed! 🐙</span></span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>-1 / x₀ ^ 2 : ℝ
</pre></div>
            <p>
              We introduced a point <code>x₀</code> and assumption <code>hx₀</code> that it is not equal to zero. By default <code>fun_trans</code> does not see this assumption and we have to provide discharger. A discharger is any tactic that tries to satisfy(discharge) any assumption of the theorems <code>fun_trans</code> is using. In this simple case <code>assumption</code> tactic is enough as it just looks through the local context and tries to directly apply any existing assumptions.</p>
            <p>
              Using <code>assumption</code> is not enough for a more complicated expression</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-24027" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.37" data-verso-hover="263">hx₀</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀</span> <span class="unknown token" data-binding="">≠</span> <span class="typed token" data-binding="" data-verso-hover="177">0</span><span class="unknown token" data-binding="">)</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">(∂ (x:=x₀), (x ^ 2)⁻¹) 1 : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-24070">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.79" data-verso-hover="36">x</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="177">1</span><span class="unknown token" data-binding="">/</span><span class="var token" data-binding="var-_uniq.79" data-verso-hover="36">x</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-SciLean.term_Rewrite_byAssuming__-24077">rewrite_by</span> <span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransConvStx-24111">fun_trans</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-token.disch-24122">disch</span><span class="unknown token" data-binding="">:=</span><span class="tactic"><label for="tactic-state-12499630208341041359-24129-24139"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.assumption-24129" data-verso-hover="264">assumption</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12499630208341041359-24129-24139"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-43" checked="checked"><span for="--verso-unique-43" class="goal-name">funProp.discharger</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.28" data-verso-hover="265">hx₀✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.37" data-verso-hover="263">hx₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∀ (<span class="var token" data-binding="var-_uniq.11400" data-verso-hover="177">x</span> : <span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span>), <span class="var token" data-binding="var-_uniq.11400" data-verso-hover="177">x</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span></span></span></span></span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>(∂ (x:=x₀), (x ^ 2)⁻¹) 1 : ℝ
</pre></div>
            <p>
              tracing shows</p>
            <pre>[Meta.Tactic.fun_trans] HDiv.hDiv.arg_a0a1.fderiv_rule_at,
  failed to discharge hypotheses x₀ ^ 2 ≠ 0
</pre><p>
              We need a tactic that is capable of infering <code>(x₀^2 ≠ 0)</code> from <code>(x₀ ≠ 0)</code>. A very general and powerful tactic is <code>aesop</code></p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-24501" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.46" data-verso-hover="263">hx₀</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀</span> <span class="unknown token" data-binding="">≠</span> <span class="typed token" data-binding="" data-verso-hover="177">0</span><span class="unknown token" data-binding="">)</span>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">-(2 * x₀) / (x₀ ^ 2) ^ 2 : ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-24544">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.97" data-verso-hover="177">x</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="177">1</span><span class="unknown token" data-binding="">/</span><span class="var token" data-binding="var-_uniq.97" data-verso-hover="177">x</span><span class="unknown token" data-binding="">^</span><span class="typed token" data-binding="" data-verso-hover="2">2</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-SciLean.term_Rewrite_byAssuming__-24551">rewrite_by</span> <span class="tactic"><label for="tactic-state-1626494091117195862-24585-24609"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransConvStx-24585">fun_trans</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-token.disch-24596">disch</span><span class="unknown token" data-binding="">:=</span><span class="has-info warning"><span class="hover-container"><span class="hover-info messages"><code class="message warning">aesop: maximum number of rule applications (200) reached. Set the 'maxRuleApplications' option to increase the limit.</code></span></span><span class="keyword token" data-binding="kw-occ-Aesop.Frontend.Parser.aesopTactic-24603" data-verso-hover="266">aesop</span></span><span class="unknown token" data-binding="">)</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1626494091117195862-24585-24609"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.28" data-verso-hover="267">hx₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝¹</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.37" data-verso-hover="265">hx₀✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀✝</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.46" data-verso-hover="263">hx₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span></span><span class="conclusion"><span class="prefix">| </span><span class="type"><span class="const token" data-binding="const-Neg.neg" data-verso-hover="199">-</span>(2<span class="const token" data-binding="const-HMul.hMul" data-verso-hover="140"> * </span><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀</span>)<span class="const token" data-binding="const-HDiv.hDiv" data-verso-hover="139"> / </span>(<span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀</span><span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2)<span class="const token" data-binding="const-HPow.hPow" data-verso-hover="179"> ^ </span>2</span></span></span></span></span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>-(2 * x₀) / (x₀ ^ 2) ^ 2 : ℝ
</pre></div>
            <p>
              In multiple dimensions we often want to differentiate the norm</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-24755" data-verso-hover="162">open</span> <span class="unknown token" data-binding="">SciLean</span> <span class="unknown token" data-binding="">Scalar</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-24776" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">×</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.88" data-verso-hover="263">hx₀</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span> <span class="unknown token" data-binding="">≠</span> <span class="typed token" data-binding="" data-verso-hover="181">0</span><span class="unknown token" data-binding="">)</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">‖x₀‖₂[ℝ]⁻¹ • x₀ : ℝ × ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-24825">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∇</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.181" data-verso-hover="181">x</span><span class="unknown token" data-binding="">:=</span><span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">‖</span><span class="var token" data-binding="var-_uniq.181" data-verso-hover="181">x</span><span class="unknown token" data-binding="">‖₂</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-SciLean.term_Rewrite_byAssuming__-24832">rewrite_by</span> <span class="tactic"><label for="tactic-state-14153371578172540536-24871-24887"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.Conv.unfold-24871" data-verso-hover="258">unfold</span> <span class="const token" data-binding="const-SciLean.fgradient" data-verso-hover="243">fgradient</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-14153371578172540536-24871-24887"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.28" data-verso-hover="268">hx₀✝²</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝²</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.37" data-verso-hover="267">hx₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀✝¹</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.46" data-verso-hover="265">hx₀✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀✝</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.88" data-verso-hover="263">hx₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span></span><span class="conclusion"><span class="prefix">| </span><span class="type">(&lt;∂ (<span class="var token" data-binding="var-_uniq.6959" data-verso-hover="181">x</span>:=<span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span>), <span class="const token" data-binding="const-SciLean.norm₂" data-verso-hover="269">‖</span><span class="var token" data-binding="var-_uniq.6959" data-verso-hover="181">x</span><span class="const token" data-binding="const-SciLean.norm₂" data-verso-hover="269">‖₂[</span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-SciLean.norm₂" data-verso-hover="269">]</span>).2 1</span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransConvStx-24889">fun_trans</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-token.disch-24900">disch</span><span class="unknown token" data-binding="">:=</span><span class="tactic"><label for="tactic-state-7-24907-24917"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.assumption-24907" data-verso-hover="264">assumption</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-24907-24917"><span class="tactic-state">All goals completed! 🐙</span></span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
              The fact that norm is not differentiable can cause issues. The common practice when writing numerical algorithms is to regularize norm using a small positive <code>ε</code>.</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-25118" data-verso-hover="162">open</span> <span class="unknown token" data-binding="">SciLean</span> <span class="unknown token" data-binding="">Scalar</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-25138" data-verso-hover="49">variable</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.90" data-verso-hover="177">ε</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.122" data-verso-hover="270">hε</span> <span class="unknown token" data-binding="">:</span> <span class="typed token" data-binding="" data-verso-hover="177">0</span> <span class="unknown token" data-binding="">&lt;</span> <span class="var token" data-binding="var-_uniq.90" data-verso-hover="177">ε</span><span class="unknown token" data-binding="">)</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun w =&gt; fun x =&gt;L[ℝ] 2 * ⟪x, w⟫ / (2 * sqrt (ε + ‖w‖₂²)) : ℝ × ℝ → ℝ × ℝ →L[ℝ] ℝ</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-25174">#check</span></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.252" data-verso-hover="181">x</span><span class="unknown token" data-binding="">:</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">×</span><span class="unknown token" data-binding="">ℝ</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.90" data-verso-hover="177">ε</span> <span class="unknown token" data-binding="">+</span> <span class="unknown token" data-binding="">‖</span><span class="var token" data-binding="var-_uniq.252" data-verso-hover="181">x</span><span class="unknown token" data-binding="">‖₂²</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-SciLean.term_Rewrite_byAssuming__-25181">rewrite_by</span>
  <span class="tactic"><label for="tactic-state-17788989527100751505-25239-25251"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.Conv.unfold-25239" data-verso-hover="258">unfold</span> <span class="const token" data-binding="const-deriv" data-verso-hover="190">deriv</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-17788989527100751505-25239-25251"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.28" data-verso-hover="268">hx₀✝²</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝²</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.37" data-verso-hover="267">hx₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀✝¹</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.46" data-verso-hover="265">hx₀✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀✝</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.88" data-verso-hover="263">hx₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.90" data-verso-hover="177">ε</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.122" data-verso-hover="270">hε</span></span><span class="colon">:</span><span class="type">0<span class="const token" data-binding="const-LT.lt" data-verso-hover="141"> &lt; </span><span class="var token" data-binding="var-_uniq.90" data-verso-hover="177">ε</span></span></span></span><span class="conclusion"><span class="prefix">| </span><span class="type">∂ <span class="var token" data-binding="var-_uniq.32358" data-verso-hover="181">x</span>, <span class="const token" data-binding="const-SciLean.Scalar.sqrt" data-verso-hover="90">sqrt</span> (<span class="var token" data-binding="var-_uniq.90" data-verso-hover="177">ε</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span>‖<span class="var token" data-binding="var-_uniq.32358" data-verso-hover="181">x</span>‖₂²)</span></span></span></span></span>
  <span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransConvStx-25254">fun_trans</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-token.disch-25265">disch</span><span class="unknown token" data-binding="">:=</span><span class="tactic"><label for="tactic-state-3670716780496545452-25272-25279"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.intro-25272" data-verso-hover="271">intro</span> <span class="var token" data-binding="var-_uniq.1938" data-verso-hover="181">x</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3670716780496545452-25272-25279"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-47" checked="checked"><span for="--verso-unique-47" class="goal-name">funProp.discharger</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.28" data-verso-hover="268">hx₀✝²</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝²</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.37" data-verso-hover="267">hx₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀✝¹</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.46" data-verso-hover="265">hx₀✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀✝</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.88" data-verso-hover="263">hx₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.90" data-verso-hover="177">ε</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.122" data-verso-hover="270">hε</span></span><span class="colon">:</span><span class="type">0<span class="const token" data-binding="const-LT.lt" data-verso-hover="141"> &lt; </span><span class="var token" data-binding="var-_uniq.90" data-verso-hover="177">ε</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1938" data-verso-hover="181">x</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="var token" data-binding="var-_uniq.90" data-verso-hover="177">ε</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span>‖<span class="var token" data-binding="var-_uniq.1938" data-verso-hover="181">x</span>‖₂²<span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-25281-25311"><span class="keyword token" data-binding="kw-occ-nlinarith-25281" data-verso-hover="272">nlinarith</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-SciLean.norm2_nonneg" data-verso-hover="273">norm2_nonneg</span> <span class="unknown token" data-binding="">ℝ</span> <span class="var token" data-binding="var-_uniq.1938" data-verso-hover="181">x</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-25281-25311"><span class="tactic-state">All goals completed! 🐙</span></span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
              <pre>fun w =&gt; fun x =&gt;L[ℝ] 2 * ⟪x, w⟫ / (2 * sqrt (ε + ‖w‖₂²)) : ℝ × ℝ → ℝ × ℝ →L[ℝ] ℝ
</pre></div>
            <section>
              <h3 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Differentiating-Division___-Log___-Sqrt___-_________--Exercises">
                2.1.5.1. Exercises</h3>
              <ol start="1">
                <li>
                  <p>
                    gradient of energy for n-body system, newton's potential, lenard jones potential</p>
                  <ul>
                    <li>
                      <p>
                        do it for two particles</p>
                      </li>
                    <li>
                      <p>
                        do it for n-particles</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    signed distance function</p>
                  <ul>
                    <li>
                      <p>
                        compute gradient of sphere sdf</p>
                      </li>
                    <li>
                      <p>
                        compute mean and gaussian curvature of sphere</p>
                      </li>
                    <li>
                      <p>
                        pick SDF from https://iquilezles.org/articles/distfunctions/</p>
                      <ul>
                        <li>
                          <p>
                            most of them involve functions that are not differentiable everywhere</p>
                          </li>
                        <li>
                          <p>
                            compute derivative in unsafe mode</p>
                          </li>
                        <li>
                          <p>
                            figure out the minimal condition under which it is differentiable</p>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ol>
              </section>
            </section>
          <section>
            <h2 id="Scientific-Computing-in-Lean--Differentiation--Symbolic-Differentiation--Abstract-Vector-Spaces">
              2.1.6. Abstract Vector Spaces</h2>
            <p>
              In calculus we usually consider only functions \((f : \mathbb{R}^n \rightarrow \mathbb{R}^m) \). The issue is that on computers the type \( \mathbb{R}^n \) can have multiple different realizations. For example \( \mathbb{R}^3 \) can be modeled by <code>Float×Float×Float</code>, <code>Float^[3]</code> or <code>Float×Float^[2]</code>. They are all equivalent but in code we have to explicitely convert between these types. For this reason it is better to work with abstract vector spaces instead of with \( \mathbb{R}^n \).</p>
            <p>
              Fortunately mathlib's derivative <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-fderiv" data-verso-hover="176">fderiv</span></code> is already defined for a function <code>(f : X → Y)</code> between two abstract vector spaces <code>X</code> and <code>Y</code> over a field <code>𝕜</code>. Mathlib's way of introducing an abstract vector space is rather involved and we need to spend some time talking about it. This presentation will be rather simplified. For interested reader we provide references at the end of this section that go over mathlib's algebraic stracutes in more detail.</p>
            <p>
              A vector space <code>X</code> is a set with operations <code>+,-,•,0</code> such that</p>
            <pre>  ∀ (x y z : X), x + (y + z) = (x + y) + z
  ∀ (x y : X), x + y = y + x
  ∀ (x : X), x + 0 = 0
  ∀ (x : X), x + (-x) = 0

  ∀ (r s : 𝕜) (x : X), r • (s • x) = (r * s) • x(
  ∀ (x : X), 1 • x = x
  ∀ (r : 𝕜) (x y : X), r • (x + y) = r • x + r • y
  ∀ (r s : 𝕜) (x : X), (r + s) • x = r • x + s • x
</pre><p>
              in mathlib the axioms talking about addition and negation are captured by the type class <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-AddCommGroup" data-verso-hover="274">AddCommGroup</span></code> and the aximps talking about scalar multiplication are captured by the type class <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Module" data-verso-hover="275">Module</span></code>. Therefore if we want to introduce a new abstract vector space over a field <code>R</code> we have to introduce these variables</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-28222" data-verso-hover="49">variable</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.124" data-verso-hover="36">𝕜</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Field" data-verso-hover="276">Field</span> <span class="var token" data-binding="var-_uniq.124" data-verso-hover="36">𝕜</span><span class="unknown token" data-binding="">]</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.129" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-AddCommGroup" data-verso-hover="274">AddCommGroup</span> <span class="var token" data-binding="var-_uniq.129" data-verso-hover="36">X</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Module" data-verso-hover="275">Module</span> <span class="var token" data-binding="var-_uniq.124" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.129" data-verso-hover="36">X</span><span class="unknown token" data-binding="">]</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-28307">example</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1698" data-verso-hover="277">s</span> <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="277">r</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.124" data-verso-hover="36">𝕜</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1702" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.1704" data-verso-hover="207">y</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.129" data-verso-hover="36">X</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1698" data-verso-hover="277">s</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="277">r</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">•</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1702" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.1704" data-verso-hover="207">y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="var token" data-binding="var-_uniq.1698" data-verso-hover="277">s</span> <span class="unknown token" data-binding="">•</span> <span class="var token" data-binding="var-_uniq.1702" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="277">r</span> <span class="unknown token" data-binding="">•</span> <span class="var token" data-binding="var-_uniq.1702" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.1698" data-verso-hover="277">s</span> <span class="unknown token" data-binding="">•</span> <span class="var token" data-binding="var-_uniq.1704" data-verso-hover="207">y</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="277">r</span> <span class="unknown token" data-binding="">•</span> <span class="var token" data-binding="var-_uniq.1704" data-verso-hover="207">y</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-4676163570599722126-28407-28409"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-28407" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-4676163570599722126-28407-28409"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.28" data-verso-hover="268">hx₀✝²</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="177">x₀✝²</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.37" data-verso-hover="267">hx₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.30" data-verso-hover="177">x₀✝¹</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.46" data-verso-hover="265">hx₀✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="177">x₀✝</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.88" data-verso-hover="263">hx₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.50" data-verso-hover="181">x₀</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.90" data-verso-hover="177">ε</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.122" data-verso-hover="270">hε</span></span><span class="colon">:</span><span class="type">0<span class="const token" data-binding="const-LT.lt" data-verso-hover="141"> &lt; </span><span class="var token" data-binding="var-_uniq.90" data-verso-hover="177">ε</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.124" data-verso-hover="36">𝕜</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.975" data-verso-hover="278">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Field" data-verso-hover="276">Field</span> <span class="var token" data-binding="var-_uniq.124" data-verso-hover="36">𝕜</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.129" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.980" data-verso-hover="279">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AddCommGroup" data-verso-hover="274">AddCommGroup</span> <span class="var token" data-binding="var-_uniq.129" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1696" data-verso-hover="280">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Module" data-verso-hover="275">Module</span> <span class="var token" data-binding="var-_uniq.124" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.129" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1698" data-verso-hover="277">s</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.124" data-verso-hover="36">𝕜</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1700" data-verso-hover="277">r</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.124" data-verso-hover="36">𝕜</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1702" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.129" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1704" data-verso-hover="207">y</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.129" data-verso-hover="36">X</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(<span class="var token" data-binding="var-_uniq.1698" data-verso-hover="277">s</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.1700" data-verso-hover="277">r</span>)<span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span>(<span class="var token" data-binding="var-_uniq.1702" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.1704" data-verso-hover="207">y</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span><span class="var token" data-binding="var-_uniq.1698" data-verso-hover="277">s</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span><span class="var token" data-binding="var-_uniq.1702" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.1700" data-verso-hover="277">r</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span><span class="var token" data-binding="var-_uniq.1702" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.1698" data-verso-hover="277">s</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span><span class="var token" data-binding="var-_uniq.1704" data-verso-hover="207">y</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.1700" data-verso-hover="277">r</span><span class="const token" data-binding="const-HSMul.hSMul" data-verso-hover="230"> • </span><span class="var token" data-binding="var-_uniq.1704" data-verso-hover="207">y</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-7-28412-28451"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-28412" data-verso-hover="204">simp</span> <span class="keyword token" data-binding="kw-occ-null-28417">only</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-add_smul" data-verso-hover="281">add_smul</span><span class="unknown token" data-binding="">,</span><span class="const token" data-binding="const-smul_add" data-verso-hover="282">smul_add</span><span class="unknown token" data-binding="">,</span><span class="const token" data-binding="const-add_assoc" data-verso-hover="283">add_assoc</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-28412-28451"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              When we want to differentiate a function <code>(f : X → Y)</code> between two vector spaces we also need that <code>X</code> and <code>Y</code> are equiped with a norm. For this purpose there is <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span></code> which equips <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-AddCommGroup" data-verso-hover="274">AddCommGroup</span></code> with a norm and guarantees that it compatible with addition and negation, and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span></code> which equips <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Module" data-verso-hover="275">Module</span></code> with a norm and guarentees that it is compatible with scalar multiplication. Furthermore, we have to restric to a filed <code>𝕜</code> that is either real numbers <code>ℝ</code> or complex numbers <code>ℂ</code>. The type class <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-RCLike" data-verso-hover="285">RCLike</span></code> states exactly that. Therefore when we work with derivative in general setting the code usually looks like this</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-29263" data-verso-hover="49">variable</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-RCLike" data-verso-hover="285">RCLike</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span><span class="unknown token" data-binding="">]</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span><span class="unknown token" data-binding="">]</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">]</span>

<span class="keyword token" data-binding="kw-occ-SciLean.NotationOverField.commandSet_default_scalar_-29417">set_default_scalar</span> <span class="unknown token" data-binding="">𝕜</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-29442">example</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2348" data-verso-hover="287">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2365" data-verso-hover="288">hg</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.2374" data-verso-hover="207">x</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.2374" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.2374" data-verso-hover="207">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∂</span> <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-1030619621441622670-29574-29576"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-29574" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1030619621441622670-29574-29576"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.376" data-verso-hover="177">x₀✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.402" data-verso-hover="268">hx₀✝²</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.376" data-verso-hover="177">x₀✝²</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.404" data-verso-hover="177">x₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.411" data-verso-hover="267">hx₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.404" data-verso-hover="177">x₀✝¹</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.413" data-verso-hover="177">x₀✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.420" data-verso-hover="265">hx₀✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.413" data-verso-hover="177">x₀✝</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.424" data-verso-hover="181">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.462" data-verso-hover="263">hx₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.424" data-verso-hover="181">x₀</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.464" data-verso-hover="177">ε</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.496" data-verso-hover="270">hε</span></span><span class="colon">:</span><span class="type">0<span class="const token" data-binding="const-LT.lt" data-verso-hover="141"> &lt; </span><span class="var token" data-binding="var-_uniq.464" data-verso-hover="177">ε</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1445" data-verso-hover="289">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-RCLike" data-verso-hover="285">RCLike</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1450" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1586" data-verso-hover="290">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1591" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1692" data-verso-hover="292">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2348" data-verso-hover="287">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2365" data-verso-hover="288">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∂ <span class="var token" data-binding="var-_uniq.15317" data-verso-hover="207">x</span>, (<span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.15317" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.15317" data-verso-hover="207">x</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span>∂ <span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span>∂ <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span></span></span></span></span></span> <span class="tactic"><label for="tactic-state-8812255455011940073-29577-29585"><span class="keyword token" data-binding="kw-occ-Lean.Elab.Tactic.Ext.ext-29577" data-verso-hover="252">ext</span> <span class="var token" data-binding="var-_uniq.5129" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.6385" data-verso-hover="207">dx</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8812255455011940073-29577-29585"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-50" checked="checked"><span for="--verso-unique-50" class="goal-name">h.h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.376" data-verso-hover="177">x₀✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.402" data-verso-hover="268">hx₀✝²</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.376" data-verso-hover="177">x₀✝²</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.404" data-verso-hover="177">x₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.411" data-verso-hover="267">hx₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.404" data-verso-hover="177">x₀✝¹</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.413" data-verso-hover="177">x₀✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.420" data-verso-hover="265">hx₀✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.413" data-verso-hover="177">x₀✝</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.424" data-verso-hover="181">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.462" data-verso-hover="263">hx₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.424" data-verso-hover="181">x₀</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.464" data-verso-hover="177">ε</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.496" data-verso-hover="270">hε</span></span><span class="colon">:</span><span class="type">0<span class="const token" data-binding="const-LT.lt" data-verso-hover="141"> &lt; </span><span class="var token" data-binding="var-_uniq.464" data-verso-hover="177">ε</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1445" data-verso-hover="289">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-RCLike" data-verso-hover="285">RCLike</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1450" data-verso-hover="209">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1586" data-verso-hover="290">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1591" data-verso-hover="291">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1692" data-verso-hover="292">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.644" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2348" data-verso-hover="287">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2365" data-verso-hover="288">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.498" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5129" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.6385" data-verso-hover="207">dx</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.503" data-verso-hover="36">X</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">(∂ (<span class="var token" data-binding="var-_uniq.15316" data-verso-hover="207">x</span>:=<span class="var token" data-binding="var-_uniq.5129" data-verso-hover="207">x</span>), (<span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.15316" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.15316" data-verso-hover="207">x</span>)) <span class="var token" data-binding="var-_uniq.6385" data-verso-hover="207">dx</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span>((∂ <span class="var token" data-binding="var-_uniq.1696" data-verso-hover="286">f</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span>∂ <span class="var token" data-binding="var-_uniq.1700" data-verso-hover="286">g</span>) <span class="var token" data-binding="var-_uniq.5129" data-verso-hover="207">x</span>) <span class="var token" data-binding="var-_uniq.6385" data-verso-hover="207">dx</span></span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-29587-29596"><span class="keyword token" data-binding="kw-occ-Mathlib.Meta.FunTrans.funTransTacStx-29587">fun_trans</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-29587-29596"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              When working with gradients we also need inner product as <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-adjoint" data-verso-hover="208">adjoint</span></code> is defined through inner product. Unfortunately, here we diverge from mathlib a little bit. Mathlib defines <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-InnerProductSpace" data-verso-hover="293">InnerProductSpace</span></code> which equips <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span></code> with inner product. Understandably <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-InnerProductSpace" data-verso-hover="293">InnerProductSpace</span></code> requires that the <code>⟪x,x⟫ = ‖x‖²</code> however mathlib made the unfortunate decision by definin norm on produce spaces as <code>‖(x,y)‖ = max ‖x‖ ‖y‖</code> which is incompatible with the inner product structure. Therefore type like <code>ℝ×ℝ</code> can't be equiped with <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-InnerProductSpace" data-verso-hover="293">InnerProductSpace</span></code>. Because of these issues, SciLean introduces <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span></code> which is almost identical to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-InnerProductSpace" data-verso-hover="293">InnerProductSpace</span></code> but it only requires that the norm induced by inner product is equivalend to the existing norm i.e. <code>∃ (c d : ℝ⁺), ∀ x, c * ⟪x,x⟫ ≤ ‖x‖^2 ≤ d * ⟪x,x⟫</code>. On <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span></code> SciLean  introduces L₂-norm <code>‖x‖₂ := sqrt ⟪x,x⟫</code> which you have seen already and it is the norm you most likely want to use instead of the default norm <code>‖x‖</code>. Therfore when we work with gradient in general setting the code usually looks like this</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-30911" data-verso-hover="162">open</span> <span class="unknown token" data-binding="">SciLean</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-30924" data-verso-hover="49">variable</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-RCLike" data-verso-hover="285">RCLike</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span><span class="unknown token" data-binding="">]</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span><span class="unknown token" data-binding="">]</span>
  <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">]</span>

<span class="keyword token" data-binding="kw-occ-SciLean.NotationOverField.commandSet_default_scalar_-31116">set_default_scalar</span> <span class="unknown token" data-binding="">𝕜</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-31141">example</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2799" data-verso-hover="287">hf</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2816" data-verso-hover="288">hg</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∇</span> <span class="var token" data-binding="var-_uniq.2825" data-verso-hover="207">x</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.2825" data-verso-hover="207">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.2825" data-verso-hover="207">x</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∇</span> <span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">∇</span> <span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-17930634931338748476-31273-31275"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-31273" data-verso-hover="67">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-17930634931338748476-31273-31275"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.464" data-verso-hover="177">x₀✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.490" data-verso-hover="268">hx₀✝²</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.464" data-verso-hover="177">x₀✝²</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.492" data-verso-hover="177">x₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.499" data-verso-hover="267">hx₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.492" data-verso-hover="177">x₀✝¹</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.501" data-verso-hover="177">x₀✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.508" data-verso-hover="265">hx₀✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.501" data-verso-hover="177">x₀✝</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.512" data-verso-hover="181">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.550" data-verso-hover="263">hx₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.512" data-verso-hover="181">x₀</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.552" data-verso-hover="177">ε</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.584" data-verso-hover="270">hε</span></span><span class="colon">:</span><span class="type">0<span class="const token" data-binding="const-LT.lt" data-verso-hover="141"> &lt; </span><span class="var token" data-binding="var-_uniq.552" data-verso-hover="177">ε</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1621" data-verso-hover="289">inst✝⁶</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-RCLike" data-verso-hover="285">RCLike</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1626" data-verso-hover="209">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1651" data-verso-hover="294">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1812" data-verso-hover="213">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1817" data-verso-hover="291">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1834" data-verso-hover="295">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1956" data-verso-hover="296">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2799" data-verso-hover="287">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2816" data-verso-hover="288">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∇ <span class="var token" data-binding="var-_uniq.10540" data-verso-hover="207">x</span>, (<span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.10540" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.10540" data-verso-hover="207">x</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span>∇ <span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span>∇ <span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-9116645908463788779-31278-31283"><span class="keyword token" data-binding="kw-occ-Lean.Elab.Tactic.Ext.ext-31278" data-verso-hover="252">ext</span> <span class="var token" data-binding="var-_uniq.6387" data-verso-hover="207">x</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-9116645908463788779-31278-31283"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-52" checked="checked"><span for="--verso-unique-52" class="goal-name">h.h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.464" data-verso-hover="177">x₀✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.490" data-verso-hover="268">hx₀✝²</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.464" data-verso-hover="177">x₀✝²</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.492" data-verso-hover="177">x₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.499" data-verso-hover="267">hx₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.492" data-verso-hover="177">x₀✝¹</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.501" data-verso-hover="177">x₀✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.508" data-verso-hover="265">hx₀✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.501" data-verso-hover="177">x₀✝</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.512" data-verso-hover="181">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.550" data-verso-hover="263">hx₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.512" data-verso-hover="181">x₀</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.552" data-verso-hover="177">ε</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.584" data-verso-hover="270">hε</span></span><span class="colon">:</span><span class="type">0<span class="const token" data-binding="const-LT.lt" data-verso-hover="141"> &lt; </span><span class="var token" data-binding="var-_uniq.552" data-verso-hover="177">ε</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1621" data-verso-hover="289">inst✝⁶</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-RCLike" data-verso-hover="285">RCLike</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1626" data-verso-hover="209">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1651" data-verso-hover="294">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1812" data-verso-hover="213">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1817" data-verso-hover="291">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1834" data-verso-hover="295">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1956" data-verso-hover="296">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2799" data-verso-hover="287">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2816" data-verso-hover="288">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.6387" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.6422" data-verso-hover="297">x✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∇ (<span class="var token" data-binding="var-_uniq.10540" data-verso-hover="207">x</span>:=<span class="var token" data-binding="var-_uniq.6387" data-verso-hover="207">x</span>;<span class="var token" data-binding="var-_uniq.6422" data-verso-hover="297">x✝</span>), (<span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.10540" data-verso-hover="207">x</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.10540" data-verso-hover="207">x</span>)<span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span>(∇ <span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span>∇ <span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span>) <span class="var token" data-binding="var-_uniq.6387" data-verso-hover="207">x</span> <span class="var token" data-binding="var-_uniq.6422" data-verso-hover="297">x✝</span></span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-6370119809265422597-31285-31293"><span class="keyword token" data-binding="kw-occ-SciLean.Tactic.lautodiffTacticStx-31285">autodiff</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6370119809265422597-31285-31293"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.464" data-verso-hover="177">x₀✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.490" data-verso-hover="268">hx₀✝²</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.464" data-verso-hover="177">x₀✝²</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.492" data-verso-hover="177">x₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.499" data-verso-hover="267">hx₀✝¹</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.492" data-verso-hover="177">x₀✝¹</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.501" data-verso-hover="177">x₀✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.508" data-verso-hover="265">hx₀✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.501" data-verso-hover="177">x₀✝</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.512" data-verso-hover="181">x₀</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span><span class="const token" data-binding="const-Prod" data-verso-hover="68"> × </span><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.550" data-verso-hover="263">hx₀</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.512" data-verso-hover="181">x₀</span><span class="const token" data-binding="const-Ne" data-verso-hover="192"> ≠ </span>0</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.552" data-verso-hover="177">ε</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Real" data-verso-hover="178">ℝ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.584" data-verso-hover="270">hε</span></span><span class="colon">:</span><span class="type">0<span class="const token" data-binding="const-LT.lt" data-verso-hover="141"> &lt; </span><span class="var token" data-binding="var-_uniq.552" data-verso-hover="177">ε</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1621" data-verso-hover="289">inst✝⁶</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-RCLike" data-verso-hover="285">RCLike</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1626" data-verso-hover="209">inst✝⁵</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1651" data-verso-hover="294">inst✝⁴</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1812" data-verso-hover="213">inst✝³</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1817" data-verso-hover="291">inst✝²</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-NormedAddCommGroup" data-verso-hover="210">NormedAddCommGroup</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1834" data-verso-hover="295">inst✝¹</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-AdjointSpace" data-verso-hover="212">AdjointSpace</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1956" data-verso-hover="296">inst✝</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-CompleteSpace" data-verso-hover="214">CompleteSpace</span> <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span> → <span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2799" data-verso-hover="287">hf</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2816" data-verso-hover="288">hg</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Differentiable" data-verso-hover="241">Differentiable</span> <span class="var token" data-binding="var-_uniq.586" data-verso-hover="36">𝕜</span> <span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.6387" data-verso-hover="207">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.591" data-verso-hover="36">X</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.6422" data-verso-hover="297">x✝</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.782" data-verso-hover="36">Y</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.10526" data-verso-hover="298">ydf</span> := &lt;∂ <span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.6387" data-verso-hover="207">x</span>;
<span class="keyword token" data-binding="">let</span> <span class="var token" data-binding="var-_uniq.10537" data-verso-hover="298">ydg</span> := &lt;∂ <span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.6387" data-verso-hover="207">x</span>;
<span class="var token" data-binding="var-_uniq.10526" data-verso-hover="298">ydf</span>.2 <span class="var token" data-binding="var-_uniq.6422" data-verso-hover="297">x✝</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span><span class="var token" data-binding="var-_uniq.10537" data-verso-hover="298">ydg</span>.2 <span class="var token" data-binding="var-_uniq.6422" data-verso-hover="297">x✝</span><span class="const token" data-binding="const-Eq" data-verso-hover="69"> = </span>(&lt;∂ <span class="var token" data-binding="var-_uniq.1960" data-verso-hover="286">f</span> <span class="var token" data-binding="var-_uniq.6387" data-verso-hover="207">x</span>).2 <span class="var token" data-binding="var-_uniq.6422" data-verso-hover="297">x✝</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="143"> + </span>(&lt;∂ <span class="var token" data-binding="var-_uniq.1964" data-verso-hover="286">g</span> <span class="var token" data-binding="var-_uniq.6387" data-verso-hover="207">x</span>).2 <span class="var token" data-binding="var-_uniq.6422" data-verso-hover="297">x✝</span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-31295-31298"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticRfl-31295" data-verso-hover="215">rfl</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-31295-31298"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
              For interested reader we recommend reading the chapter <a href="https://leanprover-community.github.io/mathematics_in_lean/C07_Hierarchies.html">Hierachies</a> from <a href="https://leanprover-community.github.io/mathematics_in_lean/index.html">Mathematics in Lean</a> which explains how mathlib approaches algebraic hierachies like monoids, groups or modules. After reading that we recommend reading <a href="https://leanprover-community.github.io/mathematics_in_lean/C10_Differential_Calculus.html#differential-calculus-in-normed-spaces">Differential Calculus in Normed Spaces</a> which how <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-NormedSpace" data-verso-hover="284">NormedSpace</span></code> is structured.
</p>
            </section>
          </section>
        </main></div>
    </body>
  </html>

